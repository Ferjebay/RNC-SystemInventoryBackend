import{Q as F,a as h,b as N}from"./QTable.9df74c75.js";import{Q as P,a as p}from"./QTooltip.73d904aa.js";import{r as b,v as V,o,c as u,e as m,f as i,g as l,aU as S,a9 as n,af as c,aj as v,ad as Y,ai as L,h as d,Q as M,aZ as U,i as k,O as D,aa as g,ab as w}from"./index.1eb79b9c.js";import{Q as I}from"./QBadge.a5f7ee3f.js";import{Q as R}from"./QPageSticky.009c7164.js";import{C as z}from"./ClosePopup.dfa4db61.js";import{u as j}from"./useCliente.a389c5a7.js";import{d as G}from"./date.41a4d1c4.js";import"./QList.c5a11a96.js";import"./QSelect.1ef953d4.js";import"./format.694d017e.js";import"./useHelpers.33b51013.js";import"./use-quasar.36cfd852.js";import"./axios.a2ad1f31.js";const O={class:"q-ma-lg q-pt-md"},Z={class:"row q-col-gutter-lg"},H={class:"col-12"},J={key:0},K={key:1},W={key:2},X={class:"full-width row flex-center text-lime-10 q-gutter-sm"},ee=m("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),be={__name:"IndexPage",setup(te){const T=[{name:"acciones",label:"acciones",align:"center"},{name:"nombre",align:"center",label:"Cliente",field:"nombres",sortable:!0},{name:"ip",align:"center",label:"IP",field:"ip",sortable:!0},{name:"direccion",align:"center",label:"Direcci\xF3n Servicio",field:"direccion",sortable:!0},{name:"tipo_documento",align:"center",label:"T. Doc.",field:"tipo_documento"},{name:"numero_documento",align:"center",label:"Num. de Doc.",field:"numero_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Movil",field:"celular",align:"center"},{name:"instalado",label:"Instalado",field:"instalado",align:"center"},{name:"total_cobrar",label:"Total Cobrar",field:"total_cobrar",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{api:C,mostrarNotify:$,confirmDelete:E,isDeleted:x,loading:_}=j();const f=b(""),Q=b([]),y=async()=>{_.value=!0;try{const{data:a}=await C.get("/customers");a.length>0&&(a.forEach(t=>{t.ip=t.planInternet[0].ipv4,t.total_cobrar=`$${t.planInternet[0].precio}`,t.direccion=`${t.planInternet[0].direccion==""?"- - - - - -":t.planInternet[0].direccion}`,t.instalado=G.formatDate(t.planInternet[0].fecha_instalacion,"DD/MM/YYYY")}),Q.value=a)}catch(a){$("warning",a.response.data.message)}_.value=!1},q=async(a,t)=>{try{const{data:{msg:e}}=await C.patch(`/customers/${a}/${t}`);$("positive",e),y()}catch(e){console.log(e)}};V(x,(a,t)=>{a&&y()});const A=async a=>{try{E("Estas seguro de eliminar este cliente?",`/customers/${a}`)}catch(t){console.log(t)}};y();const s=b("list"),B=b({rowsPerPage:10});return(a,t)=>(o(),u(v,null,[m("div",O,[m("div",Z,[m("div",H,[i(S,{flat:"",class:"shadow_custom"},{default:l(()=>[i(F,{"title-class":"text-grey-7 text-h6",title:"Listado de Clientes",rows:Q.value,loading:Y(_),"hide-header":s.value==="grid",columns:T,"row-key":"name",grid:s.value==="grid",filter:f.value,pagination:B.value},{header:l(e=>[i(P,{props:e,style:{height:"60px"}},{default:l(()=>[(o(!0),u(v,null,L(e.cols,r=>(o(),n(N,{key:r.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:l(()=>[g(w(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":l(e=>[a.$q.screen.xs?c("",!0):(o(),n(d,{key:0,onClick:t[0]||(t[0]=r=>a.$router.push({name:"cliente.add"})),outline:"",color:"primary",label:"Agregar Cliente",class:"q-mr-xs"})),i(M,{style:U(a.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=r=>f.value=r),placeholder:"Buscar..."},{append:l(()=>[i(k,{name:"search"})]),_:1},8,["style","modelValue"]),s.value==="list"?(o(),n(d,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:l(()=>[D((o(),n(p,{disable:a.$q.platform.is.mobile},{default:l(()=>[g(w(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[z]])]),_:2},1032,["icon","onClick"])):c("",!0),e.inFullscreen?c("",!0):(o(),n(d,{key:2,flat:"",round:"",dense:"",icon:s.value==="grid"?"list":"grid_on",onClick:t[2]||(t[2]=r=>{s.value=s.value==="grid"?"list":"grid",a.separator=s.value==="grid"?"none":"horizontal"})},{default:l(()=>[D((o(),n(p,{disable:a.$q.platform.is.mobile},{default:l(()=>[g(w(s.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[z]])]),_:1},8,["icon"]))]),"body-cell-tipo_documento":l(e=>[i(h,{props:e},{default:l(()=>[m("div",null,[e.row.tipo_documento==4?(o(),u("label",J,"RUC")):e.row.tipo_documento==5?(o(),u("label",K,"Cedula")):(o(),u("label",W,"Pasaporte"))])]),_:2},1032,["props"])]),"body-cell-estado":l(e=>[i(h,{props:e},{default:l(()=>[e.row.isActive?(o(),n(I,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(o(),n(I,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":l(e=>[i(h,{props:e},{default:l(()=>[e.row.isActive?(o(),n(d,{key:0,round:"",color:"blue-grey",onClick:r=>a.$router.push({name:"cliente.edit",params:{client_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},{default:l(()=>[i(p,{class:"bg-indigo",anchor:"top middle",self:"center middle"},{default:l(()=>[g(" Editar ")]),_:1})]),_:2},1032,["onClick"])):c("",!0),e.row.isActive?(o(),u(v,{key:1},[e.row.isActive?(o(),n(d,{key:0,round:"",color:"blue-grey",icon:"close",onClick:r=>q(e.row.id,!1),size:"10px"},null,8,["onClick"])):c("",!0)],64)):(o(),u(v,{key:2},[e.row.isActive?c("",!0):(o(),n(d,{key:0,round:"",color:"blue-grey",icon:"done",onClick:r=>q(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.estado?c("",!0):(o(),n(d,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:r=>A(e.row.id),size:"10px"},{default:l(()=>[i(p,{class:"bg-indigo",anchor:"top middle",self:"center middle"},{default:l(()=>[g(" Eliminar ")]),_:1})]),_:2},1032,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":l(({icon:e})=>[m("div",X,[i(k,{size:"2em",name:"sentiment_dissatisfied"}),ee,i(k,{size:"2em",name:f.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),a.$q.screen.xs?(o(),n(R,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[i(d,{round:"",color:"secondary",size:"lg",icon:"add",onClick:t[3]||(t[3]=e=>a.$router.push({name:"cliente.add"}))})]),_:1})):c("",!0)],64))}};export{be as default};
