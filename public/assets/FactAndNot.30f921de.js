import{aJ as re,as as N,C as ne,aM as le,ap as E,aN as I,ay as J,am as Q,aq as R,r as X,n as D,v as de,z as ue,p as Y,aC as ce,bl as pe,s as se,Y as me,bD as ve,o as U,c as L,e as t,ac as n,f as q,i as H,a8 as V,g as x,a9 as b,ab as o,ah as fe,h as K,a7 as ge,ad as qe}from"./index.1587d895.js";import{g as Z,s as ee}from"./touch.3df10340.js";import{d as xe}from"./QItemLabel.c5f40d89.js";import{u as he}from"./use-cache.b0833c75.js";import{Q as P}from"./QSelect.99032b52.js";import{Q as ye}from"./QChip.a985b5aa.js";import{Q as W}from"./QBadge.1ce60094.js";import{u as be}from"./useCliente.7b33c2b3.js";import{d as M}from"./date.cb084834.js";function we(a){const c=[.06,6,50];return typeof a=="string"&&a.length&&a.split(":").forEach((f,h)=>{const r=parseFloat(f);r&&(c[h]=r)}),c}var $e=re({name:"touch-swipe",beforeMount(a,{value:c,arg:f,modifiers:h}){if(h.mouse!==!0&&N.has.touch!==!0)return;const r=h.mouseCapture===!0?"Capture":"",e={handler:c,sensitivity:we(f),direction:Z(h),noop:ne,mouseStart(l){ee(l,e)&&le(l)&&(E(e,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),e.start(l,!0))},touchStart(l){if(ee(l,e)){const g=l.target;E(e,"temp",[[g,"touchmove","move","notPassiveCapture"],[g,"touchcancel","end","notPassiveCapture"],[g,"touchend","end","notPassiveCapture"]]),e.start(l)}},start(l,g){N.is.firefox===!0&&I(a,!0);const w=J(l);e.event={x:w.left,y:w.top,time:Date.now(),mouse:g===!0,dir:!1}},move(l){if(e.event===void 0)return;if(e.event.dir!==!1){Q(l);return}const g=Date.now()-e.event.time;if(g===0)return;const w=J(l),$=w.left-e.event.x,v=Math.abs($),C=w.top-e.event.y,m=Math.abs(C);if(e.event.mouse!==!0){if(v<e.sensitivity[1]&&m<e.sensitivity[1]){e.end(l);return}}else if(window.getSelection().toString()!==""){e.end(l);return}else if(v<e.sensitivity[2]&&m<e.sensitivity[2])return;const y=v/g,A=m/g;e.direction.vertical===!0&&v<m&&v<100&&A>e.sensitivity[0]&&(e.event.dir=C<0?"up":"down"),e.direction.horizontal===!0&&v>m&&m<100&&y>e.sensitivity[0]&&(e.event.dir=$<0?"left":"right"),e.direction.up===!0&&v<m&&C<0&&v<100&&A>e.sensitivity[0]&&(e.event.dir="up"),e.direction.down===!0&&v<m&&C>0&&v<100&&A>e.sensitivity[0]&&(e.event.dir="down"),e.direction.left===!0&&v>m&&$<0&&m<100&&y>e.sensitivity[0]&&(e.event.dir="left"),e.direction.right===!0&&v>m&&$>0&&m<100&&y>e.sensitivity[0]&&(e.event.dir="right"),e.event.dir!==!1?(Q(l),e.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),xe(),e.styleCleanup=j=>{e.styleCleanup=void 0,document.body.classList.remove("non-selectable");const k=()=>{document.body.classList.remove("no-pointer-events--children")};j===!0?setTimeout(k,50):k()}),e.handler({evt:l,touch:e.event.mouse!==!0,mouse:e.event.mouse,direction:e.event.dir,duration:g,distance:{x:v,y:m}})):e.end(l)},end(l){e.event!==void 0&&(R(e,"temp"),N.is.firefox===!0&&I(a,!1),e.styleCleanup!==void 0&&e.styleCleanup(!0),l!==void 0&&e.event.dir!==!1&&Q(l),e.event=void 0)}};if(a.__qtouchswipe=e,h.mouse===!0){const l=h.mouseCapture===!0||h.mousecapture===!0?"Capture":"";E(e,"main",[[a,"mousedown","mouseStart",`passive${l}`]])}N.has.touch===!0&&E(e,"main",[[a,"touchstart","touchStart",`passive${h.capture===!0?"Capture":""}`],[a,"touchmove","noop","notPassiveCapture"]])},updated(a,c){const f=a.__qtouchswipe;f!==void 0&&(c.oldValue!==c.value&&(typeof c.value!="function"&&f.end(),f.handler=c.value),f.direction=Z(c.modifiers))},beforeUnmount(a){const c=a.__qtouchswipe;c!==void 0&&(R(c,"main"),R(c,"temp"),N.is.firefox===!0&&I(a,!1),c.styleCleanup!==void 0&&c.styleCleanup(),delete a.__qtouchswipe)}});const at={name:{required:!0},disable:Boolean},te={setup(a,{slots:c}){return()=>Y("div",{class:"q-panel scroll",role:"tabpanel"},se(c.default))}},rt={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},nt=["update:modelValue","beforeTransition","transition"];function lt(){const{props:a,emit:c,proxy:f}=ue(),{getCacheWithFn:h}=he();let r,e;const l=X(null),g=X(null);function w(d){const p=a.vertical===!0?"up":"left";T((f.$q.lang.rtl===!0?-1:1)*(d.direction===p?1:-1))}const $=D(()=>[[$e,w,void 0,{horizontal:a.vertical!==!0,vertical:a.vertical,mouse:!0}]]),v=D(()=>a.transitionPrev||`slide-${a.vertical===!0?"down":"right"}`),C=D(()=>a.transitionNext||`slide-${a.vertical===!0?"up":"left"}`),m=D(()=>`--q-transition-duration: ${a.transitionDuration}ms`),y=D(()=>typeof a.modelValue=="string"||typeof a.modelValue=="number"?a.modelValue:String(a.modelValue)),A=D(()=>({include:a.keepAliveInclude,exclude:a.keepAliveExclude,max:a.keepAliveMax})),j=D(()=>a.keepAliveInclude!==void 0||a.keepAliveExclude!==void 0);de(()=>a.modelValue,(d,p)=>{const _=i(d)===!0?s(d):-1;e!==!0&&z(_===-1?0:_<s(p)?-1:1),l.value!==_&&(l.value=_,c("beforeTransition",d,p),me(()=>{c("transition",d,p)}))});function k(){T(1)}function F(){T(-1)}function S(d){c("update:modelValue",d)}function i(d){return d!=null&&d!==""}function s(d){return r.findIndex(p=>p.props.name===d&&p.props.disable!==""&&p.props.disable!==!0)}function u(){return r.filter(d=>d.props.disable!==""&&d.props.disable!==!0)}function z(d){const p=d!==0&&a.animated===!0&&l.value!==-1?"q-transition--"+(d===-1?v.value:C.value):null;g.value!==p&&(g.value=p)}function T(d,p=l.value){let _=p+d;for(;_>-1&&_<r.length;){const B=r[_];if(B!==void 0&&B.props.disable!==""&&B.props.disable!==!0){z(d),e=!0,c("update:modelValue",B.props.name),setTimeout(()=>{e=!1});return}_+=d}a.infinite===!0&&r.length!==0&&p!==-1&&p!==r.length&&T(d,d===-1?r.length:-1)}function G(){const d=s(a.modelValue);return l.value!==d&&(l.value=d),!0}function O(){const d=i(a.modelValue)===!0&&G()&&r[l.value];return a.keepAlive===!0?[Y(ve,A.value,[Y(j.value===!0?h(y.value,()=>({...te,name:y.value})):te,{key:y.value,style:m.value},()=>d)])]:[Y("div",{class:"q-panel scroll",style:m.value,key:y.value,role:"tabpanel"},[d])]}function oe(){if(r.length!==0)return a.animated===!0?[Y(ce,{name:g.value},O)]:O()}function ie(d){return r=pe(se(d.default,[])).filter(p=>p.props!==null&&p.props.slot===void 0&&i(p.props.name)===!0),r.length}function ae(){return r}return Object.assign(f,{next:k,previous:F,goTo:S}),{panelIndex:l,panelDirectives:$,updatePanelsList:ie,updatePanelIndex:G,getPanelContent:oe,getEnabledPanels:u,getPanels:ae,isValidPanelName:i,keepAliveProps:A,needsUniqueKeepAliveWrapper:j,goToPanelByOffset:T,goToPanel:S,nextPanel:k,previousPanel:F}}const _e={class:"col-12 flex justify-start items-center q-pt-none"},Ve={class:"row"},Ce={class:"col-xs-12 col-md-7"},Ae={class:"row"},ke={class:"col-xs-12 col-md-7"},Pe={class:"row"},De={class:"col-xs-12 col-md-7"},je={class:"row"},Me={class:"col-xs-12 col-md-7"},Se={class:"row"},Te={class:"col-xs-12 col-md-7"},Ne={class:"row"},Ye={class:"col-xs-12 col-md-7"},Fe={class:"row"},Be={class:"col-xs-12 col-md-7"},Ee={class:"col-12 flex justify-start items-center q-py-md"},Ue={class:"row"},ze={class:"col-xs-12 col-md-7"},Ie={class:"col-md-12 q-py-md"},Qe={class:"row q-col-gutter-sm"},Re={class:"col-xs-12 col-md-4"},Le={class:"text-weight-bold"},Ke={class:"col-xs-12 col-md-4"},We={class:"text-weight-bold"},Xe={class:"col-xs-12 col-md-4"},Ge={class:"text-weight-bold"},dt={__name:"FactAndNot",props:["edit"],setup(a){const{api:c,mes_pago:f,mostrarNotify:h,formFacturacion:r,validacionesFacturacion:e,validarFormFact:l,step:g}=be();let w,$,v,C=r.value.dia_gracia.split(" ")[0];f.value.estado=="pagado"?(w=M.addToDate(f.value.dia_pago,{months:1}),$="Desactivado"):(w=M.formatDate(f.value.dia_pago,"DD/MM/YYYY"),$=M.addToDate(f.value.dia_pago,{day:C}));const m=f.value.dia_pago.split("-");v=M.addToDate(`${m[0]}-${m[1]}-02`,{months:1});const y=X(!1),A=async()=>{if(!l())try{y.value=!0;const{data:s}=await c.put(`/customers/actualizarDatosFactura/${r.value.id}`,r.value);r.value={...s.factura[0]},h("positive",s.msg),y.value=!1}catch(s){y.value=!1,h("warning",s.response.data.message)}};let j=new Array(28).fill(0).map((i,s)=>s+1),k=new Array(25).fill(0).map((i,s)=>`${s+1}  ${s==0?"D\xEDa":"D\xEDas"} antes`),F=new Array(25).fill(0).map((i,s)=>`${s+1}  ${s==0?"D\xEDa":"D\xEDas"}`),S=new Array(12).fill(0).map((i,s)=>`${s+1}  ${s==0?"Mes":"Meses"} ${s==0?"Vencido":"Vencidos"}`);return k.unshift("Desactivado"),S.unshift("Desactivado"),(i,s)=>(U(),L("div",{class:n(["row q-col-gutter-md",i.$q.screen.width>1022?"q-col-gutter-y-lg q-pt-md":""])},[t("div",_e,[t("label",{class:n(["text-h6 text-weight-medium",i.$q.screen.width>1022||"q-pt-xs"])},[q(H,{name:"description"}),V(" Facturaci\xF3n: ")],2)]),t("div",{class:n(["col-xs-12 col-md-6",(i.$q.screen.width<1022,"q-pt-xs")])},[t("div",Ve,[t("div",{class:n(["col-xs-12 col-md-4 flex items-center justify-end",[i.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"texto-rigth q-pb-md"]])},[t("label",{class:n(i.$q.screen.width<1022||"q-pr-md")}," Tipo: ",2)],2),t("div",Ce,[q(P,{dense:"",modelValue:o(r).tipo,"onUpdate:modelValue":[s[0]||(s[0]=u=>o(r).tipo=u),s[1]||(s[1]=u=>o(e).tipo.isValid=!0)],modelModifiers:{trim:!0},outlined:"",error:!o(e).tipo.isValid,"emit-value":"","map-options":"",options:[{label:"Prepago (Adelantado)",value:"prepago"},{label:"Postpago (Vencido)",value:"postpago"}]},{error:x(()=>[t("label",{class:n(i.$q.dark.isActive?"text-red-4":"text-negative")},b(o(e).tipo.message),3)]),_:1},8,["modelValue","error","options"])])])],2),t("div",{class:n(["col-xs-12 col-md-6",i.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",Ae,[t("div",{class:n(["col-xs-12 col-md-4 flex items-center justify-end",[i.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:n(i.$q.screen.width<1022||"q-pr-md")}," Dia Pago: ",2)],2),t("div",ke,[q(P,{dense:"",modelValue:o(r).dia_pago,"onUpdate:modelValue":[s[2]||(s[2]=u=>o(r).dia_pago=u),s[3]||(s[3]=u=>o(e).dia_pago.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:o(j),error:!o(e).dia_pago.isValid},{error:x(()=>[t("label",{class:n(i.$q.dark.isActive?"text-red-4":"text-negative")},b(o(e).dia_pago.message),3)]),_:1},8,["modelValue","options","error"])])])],2),t("div",{class:n(["col-xs-12 col-md-6",i.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",Pe,[t("div",{class:n(["col-xs-12 col-md-4 flex items-center justify-end",[i.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:n(i.$q.screen.width<1022||"q-pr-md")}," Crear Factura: ",2)],2),t("div",De,[q(P,{dense:"",modelValue:o(r).crear_factura,"onUpdate:modelValue":[s[4]||(s[4]=u=>o(r).crear_factura=u),s[5]||(s[5]=u=>o(e).crear_factura.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:o(k),error:!o(e).crear_factura.isValid},{error:x(()=>[t("label",{class:n(i.$q.dark.isActive?"text-red-4":"text-negative")},b(o(e).crear_factura.message),3)]),_:1},8,["modelValue","options","error"])])])],2),t("div",{class:n(["col-xs-12 col-md-6",i.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",je,[t("div",{class:n(["col-xs-12 col-md-4 flex items-center justify-end",[i.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:n(i.$q.screen.width<1022||"q-pr-md")}," Tipo Impuesto: ",2)],2),t("div",Me,[q(P,{dense:"",modelValue:o(r).tipo_impuesto,"onUpdate:modelValue":[s[6]||(s[6]=u=>o(r).tipo_impuesto=u),s[7]||(s[7]=u=>o(e).tipo_impuesto.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:["Impuestos incluido","Mas impuestos","Ninguno"],error:!o(e).tipo_impuesto.isValid},{error:x(()=>[t("label",{class:n(i.$q.dark.isActive?"text-red-4":"text-negative")},b(o(e).tipo_impuesto.message),3)]),_:1},8,["modelValue","error"])])])],2),t("div",{class:n(["col-xs-12 col-md-6",i.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",Se,[t("div",{class:n(["col-xs-12 col-md-4 flex items-center justify-end",[i.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:n(i.$q.screen.width<1022||"q-pr-md")}," D\xEDas de gracia: ",2)],2),t("div",Te,[q(P,{dense:"",modelValue:o(r).dia_gracia,"onUpdate:modelValue":[s[8]||(s[8]=u=>o(r).dia_gracia=u),s[9]||(s[9]=u=>o(e).dia_gracia.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:o(F),hint:"*d\xEDas tolerancia para aplicar corte",error:!o(e).dia_gracia.isValid},{error:x(()=>[t("label",{class:n(i.$q.dark.isActive?"text-red-4":"text-negative")},b(o(e).dia_gracia.message),3)]),_:1},8,["modelValue","options","error"])])])],2),t("div",{class:n(["col-xs-12 col-md-6",i.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",Ne,[t("div",{class:n(["col-xs-12 col-md-4 flex items-center justify-end",[i.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:n(i.$q.screen.width<1022||"q-pr-md")}," Aplicar Corte: ",2)],2),t("div",Ye,[q(P,{dense:"",modelValue:o(r).aplicar_corte,"onUpdate:modelValue":[s[10]||(s[10]=u=>o(r).aplicar_corte=u),s[11]||(s[11]=u=>o(e).aplicar_corte.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:o(S),error:!o(e).aplicar_corte.isValid},{error:x(()=>[t("label",{class:n(i.$q.dark.isActive?"text-red-4":"text-negative")},b(o(e).aplicar_corte.message),3)]),_:1},8,["modelValue","options","error"])])])],2),t("div",{class:n(["col-xs-12 col-md-6",i.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",Fe,[t("div",{class:n(["col-xs-12 col-md-4 flex items-center justify-end",[i.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:n(i.$q.screen.width<1022||"q-pr-md")}," Tipo Comprobante: ",2)],2),t("div",Be,[q(P,{dense:"",modelValue:o(r).tipo_comprobante,"onUpdate:modelValue":[s[12]||(s[12]=u=>o(r).tipo_comprobante=u),s[13]||(s[13]=u=>o(e).tipo_comprobante.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:["Factura","Recibo"],error:!o(e).tipo_comprobante.isValid},{error:x(()=>[t("label",{class:n(i.$q.dark.isActive?"text-red-4":"text-negative")},b(o(e).tipo_comprobante.message),3)]),_:1},8,["modelValue","error"])])])],2),t("div",Ee,[t("label",{class:n(["text-h6 text-weight-medium",i.$q.screen.width>1022||"q-pt-xs"])},[q(H,{name:"notifications"}),V(" Notificaciones: ")],2)]),t("div",{class:n(["col-xs-12 col-md-6",(i.$q.screen.width<1022,"q-pt-xs")])},[t("div",Ue,[t("div",{class:n(["col-xs-12 col-md-4 flex items-center justify-end",[i.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"texto-rigth q-pb-md"]])},[t("label",{class:n(i.$q.screen.width<1022||"q-pr-md")}," Recordatorios de pago: ",2)],2),t("div",ze,[q(P,{dense:"",modelValue:o(r).recordatorio_pago,"onUpdate:modelValue":[s[14]||(s[14]=u=>o(r).recordatorio_pago=u),s[15]||(s[15]=u=>o(e).recordatorio_pago.isValid=!0)],modelModifiers:{trim:!0},outlined:"",error:!o(e).recordatorio_pago.isValid,multiple:"","stack-label":"",options:["Correo","Telegram"]},{error:x(()=>[t("label",{class:n(i.$q.dark.isActive?"text-red-4":"text-negative")},b(o(e).recordatorio_pago.message),3)]),"selected-item":x(u=>[q(ye,{color:"deep-orange-14","text-color":"white",icon:"done",removable:"",dense:"",onRemove:z=>u.removeAtIndex(u.index),tabindex:u.tabindex,class:"q-ma-none q-mr-sm"},{default:x(()=>[V(b(u.opt),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","error"])])])],2),a.edit?(U(),L(fe,{key:0},[t("div",Ie,[t("div",Qe,[t("div",Re,[q(W,{class:"text-center flex-center q-py-md",style:{width:"100%","text-align":"center","font-size":"15px"},outline:"",color:"lime-7"},{default:x(()=>[V(" D\xEDa de pago: "),t("span",Le," \xA0"+b(o(w)),1)]),_:1})]),t("div",Ke,[q(W,{class:"text-center flex-center q-py-md",style:{width:"100%","text-align":"center","font-size":"15px"},outline:"",color:"red-4"},{default:x(()=>[V(" D\xEDa de corte: "),t("span",We," \xA0"+b(o(M).formatDate(o($),"DD/MM/YYYY")),1)]),_:1})]),t("div",Xe,[q(W,{class:"text-center flex-center q-py-md",style:{width:"100%","text-align":"center","font-size":"15px"},outline:"",color:"cyan-4"},{default:x(()=>[V(" Crear factura: "),t("span",Ge," \xA0"+b(o(M).formatDate(o(v),"DD/MM/YYYY"))+" 12:00 AM ",1)]),_:1})])])]),t("div",{class:n(["col-xs-12 col-md-12 flex q-py-md justify-center",[i.$q.screen.width<600?" q-pt-none q-ml-md":""]]),style:{"padding-bottom":"0px"}},[q(K,{"icon-right":"save",onClick:A,loading:y.value,outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:x(()=>[V(" \xA0 Guardar\xA0 ")]),_:1},8,["loading"])],2)],64)):(U(),L("div",{key:1,class:n(["col-xs-12 col-md-12 flex q-py-md",[i.$q.screen.width<600?"justify-center q-pt-none q-ml-md":"justify-between"]]),style:{"padding-bottom":"0px"}},[i.$q.screen.width>600?(U(),ge(K,{key:0,icon:"arrow_back",onClick:s[16]||(s[16]=u=>g.value=1),outline:"",rounded:"",class:"q-ml-md",color:i.$q.dark.isActive?"blue-grey-2":"blue-grey-10"},{default:x(()=>[V(" \xA0 Anterior ")]),_:1},8,["color"])):qe("",!0),q(K,{onClick:o(l),"icon-right":"arrow_forward",outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:x(()=>[V(" \xA0 Siguiente\xA0 ")]),_:1},8,["onClick"])],2))],2))}};export{dt as _,rt as a,nt as b,lt as c,at as u};
