import{Q as R,a as k,b as H}from"./QTable.804bbd40.js";import{Q as L,a as z}from"./QTooltip.c93b42a0.js";import{Q as G}from"./QSelect.07554658.js";import{r as f,D as J,o as a,c as d,e as c,f as i,g as l,aP as K,ad as r,aj as n,am as g,al as S,ah as h,ai as M,aS as O,h as m,Q as W,aU as X,i as _,R as V,ae as C,af as x}from"./index.c45ffa3b.js";import{Q as q}from"./QBadge.95a1a88b.js";import{Q as Y}from"./QPageSticky.749e467d.js";import{C as A}from"./ClosePopup.ab103b62.js";import{api as B}from"./axios.f92fb9a5.js";import{u as Z}from"./useHelpers.eb8fd38c.js";import{u as ee}from"./useNap.393b3fa5.js";import"./QList.85964241.js";import"./QItemLabel.76a85485.js";import"./QChip.6b3c471d.js";import"./format.2bc25e5f.js";import"./use-quasar.b32cdc4e.js";const ae={class:"q-ma-lg q-pt-md"},te={class:"row q-col-gutter-lg"},le={class:"col-12"},se={key:0,class:"text-center row justify-center",style:{width:"100%"}},oe=c("label",{class:"q-mb-sm text-grey-7 text-h6"}," Cajas Nap ",-1),ie=[oe],re=c("label",{class:"q-mr-sm row items-center"},[c("span",null,"Empresa: ")],-1),ne={key:0,class:"row q-col-gutter-y-xs",style:{"min-width":"220px"}},de={class:"col-2"},ce={class:""},ue={class:"full-width row flex-center text-lime-10 q-gutter-sm"},me=c("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),je={__name:"IndexPage",setup(pe){const D=[{name:"acciones",label:"acciones",align:"center"},{align:"center",label:"Nombre",field:"nombre",name:"nombre"},{align:"center",label:"Ubicaci\xF3n",field:"ubicacion",name:"ubicacion"},{align:"center",label:"Coordenadas",field:"coordenadas",name:"coordenadas"},{align:"center",label:"Puertos",name:"xd",style:"width: 200px",headerStyle:"width: 200px"},{align:"center",label:"Detalles",field:"detalles",name:"detalles"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{claim:b,cargarCompanies:F,listCompanies:N,selectCompany:p}=ee();const{mostrarNotify:Q,confirmDelete:P,isDeleted:T}=Z(),y=f(""),$=f([]),w=f(!1),v=async()=>{w.value=!0;try{N.value.length==0&&await F();let t={headers:{company_id:p.value,NotSetHeaderCompany:b.roles[0]=="Super-Administrador"}};const{data:s}=await B.get("/caja-nap",t);s.forEach(e=>{e.puertos.sort((o,U)=>o.puerto-U.puerto)}),$.value=s}catch(t){Q("warning",t.response.data.message)}w.value=!1},j=async(t,s)=>{try{const{data:{msg:e}}=await B.patch(`/caja-nap/${t}/${s}`);Q("positive",e),v()}catch(e){console.log(e)}};J(T,(t,s)=>{t&&v()});const E=async t=>{try{P("Estas seguro de eliminar esta Caja Nap?",`/caja-nap/${t}`)}catch(s){console.log(s)}};v();const u=f("list"),I=f({rowsPerPage:10});return(t,s)=>(a(),d(g,null,[c("div",ae,[c("div",te,[c("div",le,[i(K,{flat:"",class:"shadow_custom"},{default:l(()=>[i(R,{"title-class":"text-grey-7 text-h6",title:"Servicios de Internet",rows:$.value,loading:w.value,"hide-header":u.value==="grid",columns:D,"row-key":"name",grid:u.value==="grid",filter:y.value,pagination:I.value},{header:l(e=>[i(L,{props:e,style:{height:"60px"}},{default:l(()=>[(a(!0),d(g,null,S(e.cols,o=>(a(),r(H,{key:o.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:l(()=>[C(x(o.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-left":l(e=>[h(b).roles[0]!=="Super-Administrador"?(a(),d("div",se,ie)):n("",!0),h(b).roles[0]=="Super-Administrador"?(a(),d("div",{key:1,style:{display:"flex"},class:M([t.$q.screen.xs?"q-mb-md":""])},[re,i(G,{outlined:"",dense:"",modelValue:h(p),"onUpdate:modelValue":[s[0]||(s[0]=o=>O(p)?p.value=o:p=o),v],"emit-value":"","map-options":"",options:h(N)},null,8,["modelValue","options"])],2)):n("",!0)]),"top-right":l(e=>[t.$q.screen.xs?n("",!0):(a(),r(m,{key:0,onClick:s[1]||(s[1]=o=>t.$router.push({name:"cNap.add"})),outline:"",color:"primary",label:"Nuevo",class:"q-mr-xs"})),i(W,{style:X(t.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:y.value,"onUpdate:modelValue":s[2]||(s[2]=o=>y.value=o),placeholder:"Buscar..."},{append:l(()=>[i(_,{name:"search"})]),_:1},8,["style","modelValue"]),u.value==="list"?(a(),r(m,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:l(()=>[V((a(),r(z,{disable:t.$q.platform.is.mobile},{default:l(()=>[C(x(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[A]])]),_:2},1032,["icon","onClick"])):n("",!0),e.inFullscreen?n("",!0):(a(),r(m,{key:2,flat:"",round:"",dense:"",icon:u.value==="grid"?"list":"grid_on",onClick:s[3]||(s[3]=o=>{u.value=u.value==="grid"?"list":"grid",t.separator=u.value==="grid"?"none":"horizontal"})},{default:l(()=>[V((a(),r(z,{disable:t.$q.platform.is.mobile},{default:l(()=>[C(x(u.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[A]])]),_:1},8,["icon"]))]),"body-cell-xd":l(e=>[i(k,{props:e},{default:l(()=>[(a(),d("div",ne,[(a(!0),d(g,null,S(e.row.puertos,({puerto:o})=>(a(),d("div",de,[c("div",ce,[i(q,{filled:"",color:"secondary",label:o,style:{width:"30px",height:"30px","justify-content":"center"}},null,8,["label"])])]))),256))]))]),_:2},1032,["props"])]),"body-cell-estado":l(e=>[i(k,{props:e},{default:l(()=>[e.row.isActive?(a(),r(q,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(a(),r(q,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":l(e=>[i(k,{props:e},{default:l(()=>[e.row.isActive?(a(),r(m,{key:0,round:"",color:"blue-grey",onClick:o=>t.$router.push({name:"cNap.edit",params:{id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):n("",!0),e.row.isActive?(a(),d(g,{key:1},[e.row.isActive?(a(),r(m,{key:0,round:"",color:"blue-grey",icon:"close",onClick:o=>j(e.row.id,!1),size:"10px"},null,8,["onClick"])):n("",!0)],64)):(a(),d(g,{key:2},[e.row.isActive?n("",!0):(a(),r(m,{key:0,round:"",color:"blue-grey",icon:"done",onClick:o=>j(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.isActive?n("",!0):(a(),r(m,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:o=>E(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":l(({icon:e})=>[c("div",ue,[i(_,{size:"2em",name:"sentiment_dissatisfied"}),me,i(_,{size:"2em",name:y.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),t.$q.screen.xs?(a(),r(Y,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[i(m,{round:"",color:"secondary",size:"lg",icon:"add",onClick:s[4]||(s[4]=e=>t.$router.push({name:"cNap.add"}))})]),_:1})):n("",!0)],64))}};export{je as default};
