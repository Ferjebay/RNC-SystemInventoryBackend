import{Q as T,a as w,b as V}from"./QTable.841f7159.js";import{Q as I,a as Q}from"./QTooltip.a288d9b7.js";import{r as c,v as D,o as s,c as C,e as m,f as r,g as o,aR as R,ad as p,a9 as t,af as u,aj as q,ai as L,h as d,Q as S,aW as j,i as b,O as $,aa as y,ab as h}from"./index.d6c4bdc6.js";import{Q as x}from"./QBadge.dade6de9.js";import{Q as G}from"./QPageSticky.1408c27a.js";import{C as N}from"./ClosePopup.ce0f6283.js";import{u as H}from"./useHelpers.0a8a684c.js";import{u as O}from"./useRolPermisos.65eefceb.js";import"./QList.ed89e0ad.js";import"./QSelect.a8a1d697.js";import"./QChip.f02742be.js";import"./QItemLabel.1ee9546f.js";import"./format.cbf00d5d.js";import"./use-quasar.293c2d69.js";import"./axios.465f24f1.js";const W={class:"q-ma-lg q-pt-md"},J={class:"row q-col-gutter-lg"},K={class:"col-12"},M={class:"full-width row flex-center text-lime-10 q-gutter-sm"},X=m("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),fe={__name:"IndexPage",setup(Y){const U=[{name:"acciones",label:"acciones",align:"center"},{name:"fullName",align:"center",label:"Nombre",field:"fullName",sortable:!0},{name:"usuario",label:"Usuario",field:"usuario",align:"center"},{name:"email",align:"center",label:"Email",field:"email"},{name:"celular",label:"Celular",field:"celular",align:"center"},{name:"rol_name",align:"center",label:"Rol",field:"rol_name"},{name:"estado",label:"Estado",align:"center",field:"estado"}],g=c(""),_=c([]),v=c(!1),{api:z,mostrarNotify:A,confirmDelete:B,isDeleted:E}=H(),{validarPermisos:f}=O(),k=async()=>{v.value=!0;try{const{data:a}=await z.get("/auth/users");a.forEach(l=>{l.rol_name=l.roles[0],l.estado=l.isActive?"Activo":"Inactivo"}),_.value=a}catch(a){A("warning",a.response.data.message)}v.value=!1};D(E,(a,l)=>{a&&k()});const F=async a=>{try{B("Estas seguro de eliminar este usuario?",`/auth/${a}`)}catch(l){console.log(l)}};k();const i=c("list"),P=c({rowsPerPage:10});return(a,l)=>(s(),C(q,null,[m("div",W,[m("div",J,[m("div",K,[r(R,{flat:"",class:"shadow_custom"},{default:o(()=>[r(T,{"title-class":"text-grey-7 text-h6",title:"Listado de Usuarios",rows:_.value,loading:v.value,"hide-header":i.value==="grid",columns:U,"row-key":"name",grid:i.value==="grid",filter:g.value,pagination:P.value},{header:o(e=>[r(I,{props:e,style:{height:"60px"}},{default:o(()=>[(s(!0),C(q,null,L(e.cols,n=>(s(),t(V,{key:n.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:o(()=>[y(h(n.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":o(e=>[!a.$q.screen.xs&&p(f)("crear.usuario")?(s(),t(d,{key:0,onClick:l[0]||(l[0]=n=>a.$router.push({name:"Agregar Usuario"})),outline:"",color:"primary",label:"Agregar Usuario",class:"q-mr-xs"})):u("",!0),r(S,{style:j(a.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=n=>g.value=n),placeholder:"Buscar..."},{append:o(()=>[r(b,{name:"search"})]),_:1},8,["style","modelValue"]),i.value==="list"?(s(),t(d,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:o(()=>[$((s(),t(Q,{disable:a.$q.platform.is.mobile},{default:o(()=>[y(h(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[N]])]),_:2},1032,["icon","onClick"])):u("",!0),e.inFullscreen?u("",!0):(s(),t(d,{key:2,flat:"",round:"",dense:"",icon:i.value==="grid"?"list":"grid_on",onClick:l[2]||(l[2]=n=>{i.value=i.value==="grid"?"list":"grid",a.separator=i.value==="grid"?"none":"horizontal"})},{default:o(()=>[$((s(),t(Q,{disable:a.$q.platform.is.mobile},{default:o(()=>[y(h(i.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[N]])]),_:1},8,["icon"]))]),"body-cell-estado":o(e=>[r(w,{props:e},{default:o(()=>[e.row.isActive?(s(),t(x,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(s(),t(x,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":o(e=>[r(w,{props:e},{default:o(()=>[p(f)("editar.usuario")?(s(),t(d,{key:0,round:"",color:"blue-grey",onClick:n=>a.$router.push({name:"Editar Usuario",params:{term:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):u("",!0),e.row.estado=="Activo"&&p(f)("eliminar.usuario")?(s(),t(d,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:n=>F(e.row.id),size:"11px"},null,8,["onClick"])):u("",!0)]),_:2},1032,["props"])]),"no-data":o(({icon:e})=>[m("div",M,[r(b,{size:"2em",name:"sentiment_dissatisfied"}),X,r(b,{size:"2em",name:g.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),a.$q.screen.xs&&p(f)("crear.usuario")?(s(),t(G,{key:0,position:"bottom-right",offset:[18,18]},{default:o(()=>[r(d,{round:"",color:"secondary",size:"lg",icon:"add",onClick:l[3]||(l[3]=e=>a.$router.push({name:"Agregar Usuario"}))})]),_:1})):u("",!0)],64))}};export{fe as default};
