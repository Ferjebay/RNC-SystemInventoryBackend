import{Q as B,a as y,b as F}from"./QTable.f527f5c9.js";import{Q as V,a as q}from"./QTooltip.f36471e9.js";import{r as p,v as E,o as a,c as u,e as m,f as n,g as o,aP as S,a7 as i,ad as c,ah as f,ab as Y,ag as L,h as d,Q as M,aU as U,i as _,N as D,a8 as h,a9 as k}from"./index.40fdb496.js";import{Q as I}from"./QBadge.a98f07e0.js";import{Q as R}from"./QPageSticky.cb4f5572.js";import{C as z}from"./ClosePopup.1053d8d1.js";import{u as G}from"./useCliente.adea62ab.js";import{d as j}from"./date.7f8f9ccc.js";import"./QList.506a0a2c.js";import"./QSelect.a9b55c12.js";import"./QChip.fdff81c8.js";import"./QItemLabel.539bf52f.js";import"./format.2bc25e5f.js";import"./useHelpers.2e06ba78.js";import"./use-quasar.058f0b6e.js";import"./axios.c2065ba2.js";const H={class:"q-ma-lg q-pt-md"},J={class:"row q-col-gutter-lg"},K={class:"col-12"},O={key:0},W={key:1},X={key:2},Z={class:"full-width row flex-center text-lime-10 q-gutter-sm"},ee=m("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),ye={__name:"IndexPage",setup(te){const T=[{name:"acciones",label:"acciones",align:"center"},{name:"nombre",align:"center",label:"Cliente",field:"nombres",sortable:!0},{name:"ip",align:"center",label:"IP",field:"ip",sortable:!0},{name:"direccion",align:"center",label:"Direcci\xF3n Servicio",field:"direccion",sortable:!0},{name:"tipo_documento",align:"center",label:"T. Doc.",field:"tipo_documento"},{name:"numero_documento",align:"center",label:"Num. de Doc.",field:"numero_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Movil",field:"celular",align:"center"},{name:"instalado",label:"Instalado",field:"instalado",align:"center"},{name:"total_cobrar",label:"Total Cobrar",field:"total_cobrar",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{api:w,mostrarNotify:C,confirmDelete:N,isDeleted:P,loading:b}=G();const g=p(""),$=p([]),v=async()=>{b.value=!0;try{const{data:l}=await w.get("/customers");l.length>0&&(l.forEach(t=>{t.ip=t.planInternet[0].ipv4,t.total_cobrar=`$${t.planInternet[0].precio}`,t.direccion=`${t.planInternet[0].direccion==""?"- - - - - -":t.planInternet[0].direccion}`,t.instalado=j.formatDate(t.planInternet[0].fecha_instalacion,"DD/MM/YYYY")}),$.value=l)}catch(l){C("warning",l.response.data.message)}b.value=!1},Q=async(l,t)=>{try{const{data:{msg:e}}=await w.patch(`/customers/${l}/${t}`);C("positive",e),v()}catch(e){console.log(e)}};E(P,(l,t)=>{l&&v()});const x=async l=>{try{N("Estas seguro de eliminar este cliente?",`/customers/${l}`)}catch(t){console.log(t)}};v();const s=p("list"),A=p({rowsPerPage:10});return(l,t)=>(a(),u(f,null,[m("div",H,[m("div",J,[m("div",K,[n(S,{flat:"",class:"shadow_custom"},{default:o(()=>[n(B,{"title-class":"text-grey-7 text-h6",title:"Listado de Clientes",rows:$.value,loading:Y(b),"hide-header":s.value==="grid",columns:T,"row-key":"name",grid:s.value==="grid",filter:g.value,pagination:A.value},{header:o(e=>[n(V,{props:e,style:{height:"60px"}},{default:o(()=>[(a(!0),u(f,null,L(e.cols,r=>(a(),i(F,{key:r.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:o(()=>[h(k(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":o(e=>[l.$q.screen.xs?c("",!0):(a(),i(d,{key:0,onClick:t[0]||(t[0]=r=>l.$router.push({name:"cliente.add"})),outline:"",color:"primary",label:"Agregar Cliente",class:"q-mr-xs"})),n(M,{style:U(l.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=r=>g.value=r),placeholder:"Buscar..."},{append:o(()=>[n(_,{name:"search"})]),_:1},8,["style","modelValue"]),s.value==="list"?(a(),i(d,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:o(()=>[D((a(),i(q,{disable:l.$q.platform.is.mobile},{default:o(()=>[h(k(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[z]])]),_:2},1032,["icon","onClick"])):c("",!0),e.inFullscreen?c("",!0):(a(),i(d,{key:2,flat:"",round:"",dense:"",icon:s.value==="grid"?"list":"grid_on",onClick:t[2]||(t[2]=r=>{s.value=s.value==="grid"?"list":"grid",l.separator=s.value==="grid"?"none":"horizontal"})},{default:o(()=>[D((a(),i(q,{disable:l.$q.platform.is.mobile},{default:o(()=>[h(k(s.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[z]])]),_:1},8,["icon"]))]),"body-cell-tipo_documento":o(e=>[n(y,{props:e},{default:o(()=>[m("div",null,[e.row.tipo_documento==4?(a(),u("label",O,"RUC")):e.row.tipo_documento==5?(a(),u("label",W,"Cedula")):(a(),u("label",X,"Pasaporte"))])]),_:2},1032,["props"])]),"body-cell-estado":o(e=>[n(y,{props:e},{default:o(()=>[e.row.isActive?(a(),i(I,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(a(),i(I,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":o(e=>[n(y,{props:e},{default:o(()=>[e.row.isActive?(a(),i(d,{key:0,round:"",color:"blue-grey",onClick:r=>l.$router.push({name:"cliente.edit",params:{client_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):c("",!0),e.row.isActive?(a(),u(f,{key:1},[e.row.isActive?(a(),i(d,{key:0,round:"",color:"blue-grey",icon:"close",onClick:r=>Q(e.row.id,!1),size:"10px"},null,8,["onClick"])):c("",!0)],64)):(a(),u(f,{key:2},[e.row.isActive?c("",!0):(a(),i(d,{key:0,round:"",color:"blue-grey",icon:"done",onClick:r=>Q(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.estado?c("",!0):(a(),i(d,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:r=>x(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":o(({icon:e})=>[m("div",Z,[n(_,{size:"2em",name:"sentiment_dissatisfied"}),ee,n(_,{size:"2em",name:g.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),l.$q.screen.xs?(a(),i(R,{key:0,position:"bottom-right",offset:[18,18]},{default:o(()=>[n(d,{round:"",color:"secondary",size:"lg",icon:"add",onClick:t[3]||(t[3]=e=>l.$router.push({name:"cliente.add"}))})]),_:1})):c("",!0)],64))}};export{ye as default};
