import{Q as k,a as v}from"./QBreadcrumbs.4a39e0b9.js";import{d as $,bv as I,o as _,c as g,f as s,g as d,af as a,aQ as B,aR as F,ak as N,e,ag as r,Q as u,i as h,h as f,aN as x,aO as b,aP as P,O as T,a as D,ah as M}from"./index.f79d0ec0.js";import{Q as A}from"./QSelect.a2bd1843.js";import{Q as w}from"./QForm.f59b8004.js";import{C as O}from"./ClosePopup.7ee0673a.js";import{u as R}from"./useEmail.ef268fa0.js";import{u as z}from"./useSucursal.6b3294b6.js";import{u as G}from"./auth-user.3ae9d47f.js";import"./QChip.d3919d7a.js";import"./QItemLabel.4dc0bf17.js";import"./format.2bc25e5f.js";import"./axios.bfe01e18.js";import"./useHelpers.6134727c.js";import"./use-quasar.d82b6d9b.js";const H={class:"row"},K=e("label",{for:""},"Host/servidor:",-1),J=[K],L=e("label",{for:""},"Puerto:",-1),W=[L],X=e("label",{for:""},"Usuario/Correo:",-1),Y=[X],Z=e("label",{for:""},"Contrase\xF1a:",-1),ee=[Z],se=e("label",{for:""},"Empresa:",-1),te=[se],le=e("div",{class:"text-h6"},"Correo del cliente",-1),oe=$({__name:"FormEmail",props:{edit:{type:Boolean}},setup(V){const q=I(),{api:c,formEmail:o,loadingTesting:m,onSubmit:C,mostrarNotify:y,isPwd:p,prompt:n}=R();let{cargarCompanies:E,listCompanies:Q}=z();E();const j=async()=>{const{data:l}=await c.get(`/email/${q.params.email_id}`);o.value={...l,empresa:l.company_id.id}},U=async()=>{try{m.value=!0;const{data:l}=await c.post("/email/testing",{...o.value,puerto:parseInt(o.value.puerto)});y("positive",l),m.value=!1,n.value=!1}catch(l){console.log(l);let t="";m.value=!1,l.response.data.response?t=l.response.data.response:t=`${l.response.data.code} - ${l.response.data.command} `,y("negative",t),n.value=!1}},S=()=>{o.value.puerto=o.value.puerto.replace(/\D/g,"")};return j(),(l,t)=>(_(),g(N,null,[s(w,{onSubmit:t[7]||(t[7]=i=>a(C)())},{default:d(()=>[e("div",H,[e("div",{class:r(["col-xs-11 col-md-2 flex items-center",[l.$q.screen.width<1022?"justify-center q-mt-lg":"justify-end"]])},J,2),e("div",{class:r(["col-xs-11 col-md-3 q-ml-md",[l.$q.screen.width<1022?"q-mt-sm":"q-mt-lg"]])},[s(u,{modelValue:a(o).host,"onUpdate:modelValue":t[0]||(t[0]=i=>a(o).host=i),modelModifiers:{trim:!0},"input-class":"resaltarTextoInput",dense:"",outlined:"",required:""},null,8,["modelValue"])],2),e("div",{class:r(["col-xs-11 col-md-2 flex items-center q-mt-lg",[l.$q.screen.width<1022?"justify-center":"justify-end"]])},W,2),e("div",{class:r(["col-xs-11 col-md-3 q-ml-md",[l.$q.screen.width<1022?"q-mt-sm":"q-mt-lg"]])},[s(u,{modelValue:a(o).puerto,"onUpdate:modelValue":t[1]||(t[1]=i=>a(o).puerto=i),modelModifiers:{trim:!0},"input-class":"resaltarTextoInput",onKeyup:S,dense:"",outlined:"",required:""},null,8,["modelValue"])],2),e("div",{class:r(["col-xs-11 col-md-2 flex items-center q-mt-lg",[l.$q.screen.width<1022?"justify-center":"justify-end"]])},Y,2),e("div",{class:r(["col-xs-11 col-md-3 q-ml-md",[l.$q.screen.width<1022?"q-mt-sm":"q-mt-lg"]])},[s(u,{modelValue:a(o).usuario,"onUpdate:modelValue":t[2]||(t[2]=i=>a(o).usuario=i),modelModifiers:{trim:!0},"input-class":"resaltarTextoInput",dense:"",outlined:"",required:""},null,8,["modelValue"])],2),e("div",{class:r(["col-xs-11 col-md-2 flex items-center q-mt-lg",[l.$q.screen.width<1022?"justify-center":"justify-end"]])},ee,2),e("div",{class:r(["col-xs-11 col-md-3 q-ml-md",[l.$q.screen.width<1022?"q-mt-sm":"q-mt-lg"]])},[s(u,{"input-class":"resaltarTextoInput",type:a(p)?"password":"text","label-color":"blue-grey-3",outlined:"",dense:"",modelValue:a(o).password,"onUpdate:modelValue":t[4]||(t[4]=i=>a(o).password=i),modelModifiers:{trim:!0},required:""},{append:d(()=>[s(h,{name:a(p)?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:t[3]||(t[3]=i=>p.value=!a(p))},null,8,["name"])]),prepend:d(()=>[s(h,{name:"key"})]),_:1},8,["type","modelValue"])],2),e("div",{class:r(["col-xs-11 col-md-2 flex items-center q-mt-lg",[l.$q.screen.width<1022?"justify-center":"justify-end"]])},te,2),e("div",{class:r(["col-xs-11 col-md-3 q-ml-md",[l.$q.screen.width<1022?"q-mt-sm":"q-mt-lg"]]),disabled:""},[s(A,{outlined:"",dense:"",modelValue:a(o).empresa,"onUpdate:modelValue":t[5]||(t[5]=i=>a(o).empresa=i),"emit-value":"","map-options":"",options:a(Q)},null,8,["modelValue","options"])],2),e("div",{class:r(["col-xs-11 col-md-11 q-ml-md text-center q-pb-xl q-pt-lg",[l.$q.screen.width<1022?"q-mt-sm":"q-mt-lg"]])},[s(f,{onClick:t[6]||(t[6]=i=>n.value=!a(n)),label:"Probar Configuraci\xF3n","icon-right":"send",outline:"",rounded:"",class:"q-mr-lg",color:"secondary"}),s(f,{type:"submit",color:"secondary",outline:"",rounded:"","icon-right":"save",label:"Guardar"})],2)])]),_:1}),s(F,{modelValue:a(n),"onUpdate:modelValue":t[9]||(t[9]=i=>B(n)?n.value=i:null)},{default:d(()=>[s(x,{style:{"min-width":"350px"}},{default:d(()=>[s(b,null,{default:d(()=>[le]),_:1}),s(w,{onSubmit:U},{default:d(()=>[s(b,{class:"q-pt-none"},{default:d(()=>[s(u,{type:"email",dense:"",modelValue:a(o).email_client,"onUpdate:modelValue":t[8]||(t[8]=i=>a(o).email_client=i),autofocus:"",required:""},null,8,["modelValue"])]),_:1}),s(P,{align:"right",class:"text-primary"},{default:d(()=>[T(s(f,{flat:"",label:"Cancelar"},null,512),[[O]]),s(f,{type:"submit",loading:a(m),flat:"",label:"Enviar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),ae={class:"q-ma-lg q-pt-md"},ie={class:"row q-col-gutter-lg"},re={class:"col-12"},de=e("label",{class:"text-h6"},"Datos del servidor correo",-1),ne=[de],me={key:0,class:"col-xs-12 col-sm-12 col-md-6"},ue={class:"q-px-md"},ce={class:"row q-col-gutter-md"},pe={class:"col-xs-12 col-md-12"},Qe=$({__name:"EditEmail",setup(V){const q=G(),{claim:c}=D.read(q.token);return(o,m)=>(_(),g("div",ae,[e("div",ie,[e("div",re,[s(x,{flat:"",class:"shadow_custom"},{default:d(()=>[e("div",{class:r(["row q-py-md q-pl-md",o.$q.screen.xs?"justify-center":"justify-between"])},[e("div",{class:r(["col-xs-12 col-sm-12 col-md-6",[o.$q.screen.width<1022?"text-center":"text-left"]])},ne,2),a(c).roles[0]=="Super-Administrador"?(_(),g("div",me,[s(k,{class:r(["row q-mr-lg",[o.$q.screen.width<1022?"justify-center":"justify-end"]])},{default:d(()=>[s(v,{label:"Inicio",icon:"home",to:"/"}),s(v,{label:"Emails",icon:"mail",to:"/emails"}),s(v,{label:"Editar Email",icon:"add_circle"})]),_:1},8,["class"])])):M("",!0)],2),e("div",ue,[e("div",ce,[e("div",pe,[s(oe,{edit:!0})])])])]),_:1})])])]))}});export{Qe as default};
