import{r as X,n as x,z as le,aO as ne,am as ie,as as se,p as A,m as ue,b4 as de,b8 as ce,b5 as me,b7 as fe,b9 as ve,bo as pe,ba as H,b3 as ge,b6 as be,ao as Ve,d as ye,v as xe,o as R,a7 as I,g as m,ab as e,f as v,aQ as Ce,e as n,ac as b,Q as j,a9 as z,bp as Fe,i as w,w as J,ad as W,aR as _e,h as Z,a8 as ee,aP as qe}from"./index.5d1f09cd.js";import{Q as $e}from"./QChip.b975933a.js";import{h as ze}from"./format.2bc25e5f.js";import{Q as he}from"./QForm.ffdb1aff.js";import{u as ke}from"./useEmpresa.d8fd7601.js";function N(i,V,a,h){const l=[];return i.forEach(p=>{h(p)===!0?l.push(p):V.push({failedPropValidation:a,file:p})}),l}function O(i){i&&i.dataTransfer&&(i.dataTransfer.dropEffect="copy"),ie(i)}const Se={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},je=["rejected"];function Ae({editable:i,dnd:V,getFileInput:a,addFilesToQueue:h}){const{props:l,emit:p,proxy:$}=le(),F=X(null),S=x(()=>l.accept!==void 0?l.accept.split(",").map(r=>(r=r.trim(),r==="*"?"*/":(r.endsWith("/*")&&(r=r.slice(0,r.length-1)),r.toUpperCase()))):null),u=x(()=>parseInt(l.maxFiles,10)),t=x(()=>parseInt(l.maxTotalSize,10));function o(r){if(i.value)if(r!==Object(r)&&(r={target:null}),r.target!==null&&r.target.matches('input[type="file"]')===!0)r.clientX===0&&r.clientY===0&&ne(r);else{const _=a();_&&_!==r.target&&_.click(r)}}function U(r){i.value&&r&&h(null,r)}function T(r,_,D,Q){let d=Array.from(_||r.target.files);const C=[],k=()=>{C.length!==0&&p("rejected",C)};if(l.accept!==void 0&&S.value.indexOf("*/")===-1&&(d=N(d,C,"accept",c=>S.value.some(g=>c.type.toUpperCase().startsWith(g)||c.name.toUpperCase().endsWith(g))),d.length===0))return k();if(l.maxFileSize!==void 0){const c=parseInt(l.maxFileSize,10);if(d=N(d,C,"max-file-size",g=>g.size<=c),d.length===0)return k()}if(l.multiple!==!0&&d.length!==0&&(d=[d[0]]),d.forEach(c=>{c.__key=c.webkitRelativePath+c.lastModified+c.name+c.size}),Q===!0){const c=D.map(g=>g.__key);d=N(d,C,"duplicate",g=>c.includes(g.__key)===!1)}if(d.length===0)return k();if(l.maxTotalSize!==void 0){let c=Q===!0?D.reduce((g,L)=>g+L.size,0):0;if(d=N(d,C,"max-total-size",g=>(c+=g.size,c<=t.value)),d.length===0)return k()}if(typeof l.filter=="function"){const c=l.filter(d);d=N(d,C,"filter",g=>c.includes(g))}if(l.maxFiles!==void 0){let c=Q===!0?D.length:0;if(d=N(d,C,"max-files",()=>(c++,c<=u.value)),d.length===0)return k()}if(k(),d.length!==0)return d}function B(r){O(r),V.value!==!0&&(V.value=!0)}function f(r){ie(r),(r.relatedTarget!==null||se.is.safari!==!0?r.relatedTarget!==F.value:document.elementsFromPoint(r.clientX,r.clientY).includes(F.value)===!1)===!0&&(V.value=!1)}function E(r){O(r);const _=r.dataTransfer.files;_.length!==0&&h(null,_),V.value=!1}function M(r){if(V.value===!0)return A("div",{ref:F,class:`q-${r}__dnd absolute-full`,onDragenter:O,onDragover:O,onDragleave:f,onDrop:E})}return Object.assign($,{pickFiles:o,addFiles:U}),{pickFiles:o,addFiles:U,onDragover:B,onDragleave:f,processFiles:T,getDndNode:M,maxFilesNumber:u,maxTotalSizeNumber:t}}var te=ue({name:"QFile",inheritAttrs:!1,props:{...de,...ce,...Se,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...me,...je],setup(i,{slots:V,emit:a,attrs:h}){const{proxy:l}=le(),p=fe(),$=X(null),F=X(!1),S=ve(i),{pickFiles:u,onDragover:t,onDragleave:o,processFiles:U,getDndNode:T}=Ae({editable:p.editable,dnd:F,getFileInput:Y,addFilesToQueue:G}),B=pe(i),f=x(()=>Object(i.modelValue)===i.modelValue?"length"in i.modelValue?Array.from(i.modelValue):[i.modelValue]:[]),E=x(()=>H(f.value)),M=x(()=>f.value.map(s=>s.name).join(", ")),r=x(()=>ze(f.value.reduce((s,y)=>s+y.size,0))),_=x(()=>({totalSize:r.value,filesNumber:f.value.length,maxFiles:i.maxFiles})),D=x(()=>({tabindex:-1,type:"file",title:"",accept:i.accept,capture:i.capture,name:S.value,...h,id:p.targetUid.value,disabled:p.editable.value!==!0})),Q=x(()=>"q-file q-field--auto-height"+(F.value===!0?" q-file--dnd":"")),d=x(()=>i.multiple===!0&&i.append===!0);function C(s){const y=f.value.slice();y.splice(s,1),c(y)}function k(s){const y=f.value.indexOf(s);y>-1&&C(y)}function c(s){a("update:modelValue",i.multiple===!0?s:s[0])}function g(s){s.keyCode===13&&Ve(s)}function L(s){(s.keyCode===13||s.keyCode===32)&&u(s)}function Y(){return $.value}function G(s,y){const q=U(s,y,f.value,d.value),K=Y();K!=null&&(K.value=""),q!==void 0&&((i.multiple===!0?i.modelValue&&q.every(re=>f.value.includes(re)):i.modelValue===q[0])||c(d.value===!0?f.value.concat(q):q))}function P(){return[A("input",{class:[i.inputClass,"q-file__filler"],style:i.inputStyle})]}function ae(){if(V.file!==void 0)return f.value.length===0?P():f.value.map((y,q)=>V.file({index:q,file:y,ref:this}));if(V.selected!==void 0)return f.value.length===0?P():V.selected({files:f.value,ref:this});if(i.useChips===!0)return f.value.length===0?P():f.value.map((y,q)=>A($e,{key:"file-"+q,removable:p.editable.value,dense:!0,textColor:i.color,tabindex:i.tabindex,onRemove:()=>{C(q)}},()=>A("span",{class:"ellipsis",textContent:y.name})));const s=i.displayValue!==void 0?i.displayValue:M.value;return s.length!==0?[A("div",{class:i.inputClass,style:i.inputStyle,textContent:s})]:P()}function oe(){const s={ref:$,...D.value,...B.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:G};return i.multiple===!0&&(s.multiple=!0),A("input",s)}return Object.assign(p,{fieldClass:Q,emitValue:c,hasValue:E,inputRef:$,innerValue:f,floatingLabel:x(()=>E.value===!0||H(i.displayValue)),computedCounter:x(()=>{if(i.counterLabel!==void 0)return i.counterLabel(_.value);const s=i.maxFiles;return`${f.value.length}${s!==void 0?" / "+s:""} (${r.value})`}),getControlChild:()=>T("file"),getControl:()=>{const s={ref:p.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:i.tabindex};return p.editable.value===!0&&Object.assign(s,{onDragover:t,onDragleave:o,onKeydown:g,onKeyup:L}),A("div",s,[oe()].concat(ae()))}}),Object.assign(l,{removeAtIndex:C,removeFile:k,getNativeElement:()=>$.value}),ge(l,"nativeEl",()=>$.value),be(p)}});const we={class:"row q-pt-sm q-gutter-lg justify-center"},Ne=n("label",null,"R.U.C",-1),De=n("label",null,"Raz\xF3n Social",-1),Qe={class:"col-xs-11 col-md-5"},Ue=n("label",null,"Nombre Comercial:",-1),Ee={class:"col-xs-11 col-md-5"},Pe=n("label",null,"Direcci\xF3n:",-1),Re={class:"col-xs-11 col-md-5"},Ie=n("label",null,"Email:",-1),Oe=n("label",null,"Obligado Contabilidad:",-1),Te={class:"col-xs-11 col-md-5"},Be=n("label",null,"Celular:",-1),Me=n("label",null,"Clave Certificado:",-1),Le=n("label",null,"Cargar Certificado:",-1),Ke=n("label",null,"Logo de la empresa:",-1),We=n("div",null," La imagen debe tener las siguientes caracter\xEDsticas: ",-1),Xe=n("div",null,' Tama\xF1o m\xE1ximo 100 KB, extensi\xF3n .jpg o .png y ser menor a 200px por 200px." ',-1),et=ye({__name:"FormEmpresa",props:{edit:{type:Boolean}},setup(i){const V=i,{formEmpresa:a,loading:h,validaciones:l,onRejected:p,onSubmit:$,isPwd:F,isValid:S}=ke();return xe(()=>a.value.clave_certificado,(u,t)=>{S.value&&u!==t&&(S.value=!1)},{deep:!0}),(u,t)=>(R(),I(he,{onSubmit:t[25]||(t[25]=o=>e($)(V.edit))},{default:m(()=>[v(qe,{class:"my-card"},{default:m(()=>[v(Ce,{class:"q-pt-lg"},{default:m(()=>[n("div",we,[n("div",{class:b(["col-xs-11 col-md-5",[u.$q.screen.width>600||"q-mt-md"]])},[Ne,v(j,{type:u.$q.platform.is.mobile?"number":"text",modelValue:e(a).ruc,"onUpdate:modelValue":[t[0]||(t[0]=o=>e(a).ruc=o),t[1]||(t[1]=o=>e(l).ruc.isValid=!0)],counter:"",maxlength:"13",onKeyup:t[2]||(t[2]=o=>e(a).ruc=e(a).ruc.replace(/\D/g,"")),"lazy-rules":"",error:!e(l).ruc.isValid,dense:"",filled:""},{error:m(()=>[n("label",{class:b(u.$q.dark.isActive?"text-red-4":"text-negative")},z(e(l).ruc.message),3)]),_:1},8,["type","modelValue","error"])],2),n("div",{class:b(["col-xs-11 col-md-5",[u.$q.screen.width>600||"q-mt-xs"]])},[De,v(j,{modelValue:e(a).razon_social,"onUpdate:modelValue":[t[3]||(t[3]=o=>e(a).razon_social=o),t[4]||(t[4]=o=>e(l).razon_social.isValid=!0)],modelModifiers:{trim:!0},"input-style":"text-transform: uppercase;",error:!e(l).razon_social.isValid,dense:"",filled:""},{error:m(()=>[n("label",{class:b(u.$q.dark.isActive?"text-red-4":"text-negative")},z(e(l).razon_social.message),3)]),_:1},8,["modelValue","error"])],2),n("div",Qe,[Ue,v(j,{modelValue:e(a).nombre_comercial,"onUpdate:modelValue":[t[5]||(t[5]=o=>e(a).nombre_comercial=o),t[6]||(t[6]=o=>e(l).nombre_comercial.isValid=!0)],modelModifiers:{trim:!0},"input-style":"text-transform: uppercase;",error:!e(l).nombre_comercial.isValid,dense:"",filled:""},{error:m(()=>[n("label",{class:b(u.$q.dark.isActive?"text-red-4":"text-negative")},z(e(l).nombre_comercial.message),3)]),_:1},8,["modelValue","error"])]),n("div",Ee,[Pe,v(j,{modelValue:e(a).direccion_matriz,"onUpdate:modelValue":[t[7]||(t[7]=o=>e(a).direccion_matriz=o),t[8]||(t[8]=o=>e(l).direccion_matriz.isValid=!0)],modelModifiers:{trim:!0},error:!e(l).direccion_matriz.isValid,dense:"",filled:""},{error:m(()=>[n("label",{class:b(u.$q.dark.isActive?"text-red-4":"text-negative")},z(e(l).direccion_matriz.message),3)]),_:1},8,["modelValue","error"])]),n("div",Re,[Ie,v(j,{modelValue:e(a).email,"onUpdate:modelValue":[t[9]||(t[9]=o=>e(a).email=o),t[10]||(t[10]=o=>e(l).email.isValid=!0)],modelModifiers:{trim:!0},type:"text",error:!e(l).email.isValid,dense:"",filled:""},{error:m(()=>[n("label",{class:b(u.$q.dark.isActive?"text-red-4":"text-negative")},z(e(l).email.message),3)]),_:1},8,["modelValue","error"])]),n("div",{class:b(["col-xs-11 col-md-5",u.$q.screen.width<600||"obligadoContb"])},[Oe,v(Fe,{color:"green",size:"lg",modelValue:e(a).obligado_contabilidad,"onUpdate:modelValue":t[11]||(t[11]=o=>e(a).obligado_contabilidad=o)},null,8,["modelValue"])],2),n("div",Te,[Be,v(j,{type:u.$q.platform.is.mobile?"number":"text",modelValue:e(a).telefono,"onUpdate:modelValue":[t[12]||(t[12]=o=>e(a).telefono=o),t[13]||(t[13]=o=>e(l).telefono.isValid=!0)],counter:"",maxlength:"10",error:!e(l).telefono.isValid,onKeyup:t[14]||(t[14]=o=>e(a).telefono=e(a).telefono.replace(/\D/g,"")),"lazy-rules":"",dense:"",filled:""},{error:m(()=>[n("label",{class:b(u.$q.dark.isActive?"text-red-4":"text-negative")},z(e(l).telefono.message),3)]),_:1},8,["type","modelValue","error"])]),n("div",{class:b(["col-xs-11 col-md-5",[u.$q.screen.width>600||"q-mt-xs"]])},[Me,v(j,{type:e(F)?"password":"text",filled:"",modelValue:e(a).clave_certificado,"onUpdate:modelValue":[t[16]||(t[16]=o=>e(a).clave_certificado=o),t[17]||(t[17]=o=>e(l).clave_certificado.isValid=!0)],modelModifiers:{trim:!0},dense:"",error:!e(l).clave_certificado.isValid},{error:m(()=>[n("label",{class:b(u.$q.dark.isActive?"text-red-4":"text-negative")},z(e(l).clave_certificado.message),3)]),append:m(()=>[v(w,{name:e(F)?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:t[15]||(t[15]=o=>F.value=!e(F))},null,8,["name"])]),prepend:m(()=>[v(w,{name:"key",color:"blue-grey-3"})]),_:1},8,["type","modelValue","error"])],2),n("div",{class:b(["col-xs-11 col-md-5",[u.$q.screen.width>600||"q-mt-sm"]])},[Le,v(te,{dense:"",filled:"","bottom-slots":"",accept:".p12",onRejected:e(p),modelValue:e(a).archivo_certificado,"onUpdate:modelValue":[t[19]||(t[19]=o=>e(a).archivo_certificado=o),t[20]||(t[20]=o=>e(l).archivo_certificado.isValid=!0)],error:!e(l).archivo_certificado.isValid,label:e(a).archivo_certificado_old==null?"Cargar Certificado":e(a).archivo_certificado_old},{error:m(()=>[n("label",{class:b(u.$q.dark.isActive?"text-red-4":"text-negative")},z(e(l).archivo_certificado.message),3)]),prepend:m(()=>[v(w,{name:"attach_file"})]),append:m(()=>[typeof e(a).archivo_certificado=="object"&&e(a).archivo_certificado!==null?(R(),I(w,{key:0,name:"close",onClick:t[18]||(t[18]=J(o=>e(a).archivo_certificado=null,["stop","prevent"])),class:"cursor-pointer"})):W("",!0)]),_:1},8,["onRejected","modelValue","error","label"])],2),n("div",{class:b(["col-xs-11 col-md-5",[u.$q.screen.width>600||"q-mt-sm"]])},[Ke,v(te,{dense:"",filled:"","bottom-slots":"",accept:".jpg, image/*",onRejected:e(p),"onUpdate:modelValue":[t[22]||(t[22]=o=>e(l).logo.isValid=!0),t[23]||(t[23]=o=>e(a).logo=o)],modelValue:e(a).logo,error:!e(l).logo.isValid,label:e(a).logo_old==null?"Cargar Logo":e(a).logo_old},{error:m(()=>[n("label",{class:b(u.$q.dark.isActive?"text-red-4":"text-negative")},z(e(l).logo.message),3)]),prepend:m(()=>[v(w,{name:"fa-solid fa-image"})]),hint:m(()=>[We,Xe]),append:m(()=>[typeof e(a).logo=="object"&&e(a).logo!==null?(R(),I(w,{key:0,name:"close",onClick:t[21]||(t[21]=J(o=>e(a).logo=null,["stop","prevent"])),class:"cursor-pointer"})):W("",!0)]),_:1},8,["onRejected","modelValue","error","label"])],2)])]),_:1}),v(_e,{class:b(["q-pb-md",[u.$q.screen.width<600?"justify-center q-ml-xl q-pt-none q-mb-md":"justify-between"]])},{default:m(()=>[u.$q.screen.width>600?(R(),I(Z,{key:0,type:"submit",icon:"arrow_back",onClick:t[24]||(t[24]=o=>u.$router.push("/empresas")),outline:"",rounded:"",class:"q-ml-md",color:u.$q.dark.isActive?"blue-grey-2":"blue-grey-10"},{default:m(()=>[ee(" \xA0 Regresar ")]),_:1},8,["color"])):W("",!0),v(Z,{type:"submit",icon:"save",loading:e(h),outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:m(()=>[ee(" \xA0 Guardar Cambios ")]),_:1},8,["loading"])]),_:1},8,["class"])]),_:1})]),_:1}))}});export{et as _};
