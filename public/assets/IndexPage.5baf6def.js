import{Q as K}from"./QInnerLoading.0dd97844.js";import{Q as M,a as W}from"./QTable.b4b9e09e.js";import{Q as X,a as F}from"./QTooltip.5d8a1cf0.js";import{d as L,o as r,a9 as s,g as o,aU as R,f as t,e as p,aa as w,O as P,h as c,aV as T,ah as Y,r as y,v as B,c as k,ad as n,af as m,bb as v,ba as N,aj as h,ai as Z,Q as ee,bc as oe,i as ae,ab as C}from"./index.1a4ab021.js";import{Q as S}from"./QBadge.d7c44b08.js";import{Q as A}from"./QTd.763f1f54.js";import{Q as le}from"./QPageSticky.e66306da.js";import{C as $}from"./ClosePopup.33ec78de.js";import{a as I}from"./axios.5809c643.js";import{u as re}from"./useHelpers.ffebda4d.js";import{_ as te,u as ie,a as se}from"./AddProveedor.5f7abde6.js";import{u as ne}from"./useRolPermisos.2ac18795.js";import"./QList.d2c11813.js";import"./QSelect.763d6259.js";import"./format.4b4f4826.js";import"./use-quasar.df6266f3.js";import"./QForm.cd666327.js";import"./provincias.d5c49733.js";const de={class:"text-h6 text-center"},ce=L({__name:"EditProveedor",setup(U){return(q,_)=>(r(),s(R,{style:{width:"740px !important","max-width":"fit-content"}},{default:o(()=>[t(T,null,{default:o(()=>[p("div",de,[w(" Editar Proveedor "),P(t(c,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[$]])])]),_:1}),t(Y,{inset:""}),t(T,{class:"q-pt-none"},{default:o(()=>[t(te,{edit:!0})]),_:1})]),_:1}))}}),ue={class:"q-ma-lg q-pt-md"},me={class:"row q-col-gutter-lg"},fe={class:"col-12"},ge=p("div",{class:"full-width row flex-center text-lime-10 q-gutter-sm"},[p("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ")],-1),Fe=L({__name:"IndexPage",setup(U){const q=[{name:"acciones",label:"acciones",align:"center"},{name:"razon_social",align:"center",label:"Razon Social",field:"razon_social",sortable:!0},{name:"tipo_documento",align:"center",label:"Tipo de Documento",field:"tipo_documento"},{name:"numero_documento",align:"center",label:"Numero de Documento",field:"numero_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Celular",field:"celular",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"}],_=y(""),V=y([]),{validarPermisos:g}=ne();let{actualizarLista:z,modalAgregarProveedor:i,modalEditarProveedor:f,formProveedor:x}=ie();const Q=y(!1),{claim:j,mostrarNotify:D,confirmDelete:G,isDeleted:H}=re(),b=async()=>{Q.value=!0;try{const{data:a}=await I.get("/providers",{headers:{"company-id":j.company.id}});V.value=a}catch(a){console.log(a),D("warning",a.response.data.message)}Q.value=!1},E=async(a,l)=>{try{const{data:{msg:e}}=await I.patch(`/providers/${a}/${l}`);D("positive",e),b()}catch(e){console.log(e)}};B(z,(a,l)=>{a&&(b(),z.value=!1)}),B(H,(a,l)=>{a&&b()});const O=async a=>{try{G("Estas seguro de eliminar este proveedor?",`/providers/${a}`)}catch(l){console.log(l)}};b();const u=y("list"),J=y({rowsPerPage:10});return(a,l)=>(r(),k(h,null,[p("div",ue,[p("div",me,[p("div",fe,[t(R,{flat:"",class:"shadow_custom"},{default:o(()=>[t(M,{"title-class":"text-grey-7 text-h6",title:"Listado de Proveedores",rows:V.value,loading:Q.value,"hide-header":u.value==="grid",columns:q,"row-key":"name",grid:u.value==="grid",filter:_.value,pagination:J.value},{loading:o(()=>[t(K,{showing:"",color:"primary"})]),header:o(e=>[t(X,{props:e,style:{height:"60px"}},{default:o(()=>[(r(!0),k(h,null,Z(e.cols,d=>(r(),s(W,{key:d.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:o(()=>[w(C(d.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":o(e=>[!a.$q.screen.xs&&n(g)("crear.proveedor")?(r(),s(c,{key:0,onClick:l[0]||(l[0]=d=>v(i)?i.value=!n(i):i=!n(i)),outline:"",color:"primary",label:"Agregar Proveedor",class:"q-mr-xs"})):m("",!0),t(ee,{style:oe(a.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=d=>_.value=d),placeholder:"Buscar..."},{append:o(()=>[t(ae,{name:"search"})]),_:1},8,["style","modelValue"]),u.value==="list"?(r(),s(c,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:o(()=>[P((r(),s(F,{disable:a.$q.platform.is.mobile},{default:o(()=>[w(C(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[$]])]),_:2},1032,["icon","onClick"])):m("",!0),e.inFullscreen?m("",!0):(r(),s(c,{key:2,flat:"",round:"",dense:"",icon:u.value==="grid"?"list":"grid_on",onClick:l[2]||(l[2]=d=>{u.value=u.value==="grid"?"list":"grid",a.separator=u.value==="grid"?"none":"horizontal"})},{default:o(()=>[P((r(),s(F,{disable:a.$q.platform.is.mobile},{default:o(()=>[w(C(u.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[$]])]),_:1},8,["icon"]))]),"body-cell-estado":o(e=>[t(A,{props:e},{default:o(()=>[e.row.isActive?(r(),s(S,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(r(),s(S,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":o(e=>[t(A,{props:e},{default:o(()=>[e.row.isActive?(r(),k(h,{key:0},[n(g)("editar.proveedor")?(r(),s(c,{key:0,round:"",color:"blue-grey",onClick:d=>(v(x)?x.value={...e.row}:x={...e.row},v(f)?f.value=!0:f=!0),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):m("",!0),n(g)("inactivar.proveedor")?(r(),s(c,{key:1,round:"",color:"blue-grey",icon:"close",onClick:d=>E(e.row.id,!1),size:"10px"},null,8,["onClick"])):m("",!0)],64)):(r(),k(h,{key:1},[n(g)("activar.proveedor")?(r(),s(c,{key:0,round:"",color:"blue-grey",icon:"done",onClick:d=>E(e.row.id,!0),size:"10px"},null,8,["onClick"])):m("",!0),!e.row.estado&&n(g)("eliminar.proveedor")?(r(),s(c,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:d=>O(e.row.id),size:"10px"},null,8,["onClick"])):m("",!0)],64))]),_:2},1032,["props"])]),"no-data":o(({icon:e})=>[ge]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),a.$q.screen.xs&&n(g)("crear.proveedor")?(r(),s(le,{key:0,position:"bottom-right",offset:[18,18]},{default:o(()=>[t(c,{round:"",color:"secondary",size:"lg",icon:"add",onClick:l[3]||(l[3]=e=>v(i)?i.value=!n(i):i=!n(i))})]),_:1})):m("",!0),t(N,{modelValue:n(i),"onUpdate:modelValue":l[4]||(l[4]=e=>v(i)?i.value=e:i=e)},{default:o(()=>[t(se)]),_:1},8,["modelValue"]),t(N,{modelValue:n(f),"onUpdate:modelValue":l[5]||(l[5]=e=>v(f)?f.value=e:f=e)},{default:o(()=>[t(ce)]),_:1},8,["modelValue"])],64))}});export{Fe as default};
