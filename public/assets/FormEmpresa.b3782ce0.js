import{r as W,n as h,z as le,aO as ne,am as te,as as re,p as N,m as se,b4 as ue,b8 as de,b5 as ce,b7 as me,b9 as fe,bo as pe,ba as G,b3 as ve,b6 as ge,ao as be,d as ye,v as he,o as O,a7 as T,g as y,ab as e,f,aQ as Ve,e as u,ac as U,Q as w,aU as xe,bp as Ce,i as A,w as H,ad as L,aR as _e,h as J,a8 as Z,aP as Fe}from"./index.af8b3988.js";import{Q as qe}from"./QChip.f2c2a808.js";import{h as Se}from"./format.2bc25e5f.js";import{Q as ze}from"./QForm.f32b6387.js";import{u as je}from"./useEmpresa.c90e544a.js";function Q(l,g,a,S){const d=[];return l.forEach(p=>{S(p)===!0?d.push(p):g.push({failedPropValidation:a,file:p})}),d}function I(l){l&&l.dataTransfer&&(l.dataTransfer.dropEffect="copy"),te(l)}const ke={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},we=["rejected"];function Ne({editable:l,dnd:g,getFileInput:a,addFilesToQueue:S}){const{props:d,emit:p,proxy:_}=le(),F=W(null),k=h(()=>d.accept!==void 0?d.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),$=h(()=>parseInt(d.maxFiles,10)),q=h(()=>parseInt(d.maxTotalSize,10));function z(t){if(l.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&ne(t);else{const x=a();x&&x!==t.target&&x.click(t)}}function m(t){l.value&&t&&S(null,t)}function i(t,x,R,D){let r=Array.from(x||t.target.files);const V=[],j=()=>{V.length!==0&&p("rejected",V)};if(d.accept!==void 0&&k.value.indexOf("*/")===-1&&(r=Q(r,V,"accept",s=>k.value.some(v=>s.type.toUpperCase().startsWith(v)||s.name.toUpperCase().endsWith(v))),r.length===0))return j();if(d.maxFileSize!==void 0){const s=parseInt(d.maxFileSize,10);if(r=Q(r,V,"max-file-size",v=>v.size<=s),r.length===0)return j()}if(d.multiple!==!0&&r.length!==0&&(r=[r[0]]),r.forEach(s=>{s.__key=s.webkitRelativePath+s.lastModified+s.name+s.size}),D===!0){const s=R.map(v=>v.__key);r=Q(r,V,"duplicate",v=>s.includes(v.__key)===!1)}if(r.length===0)return j();if(d.maxTotalSize!==void 0){let s=D===!0?R.reduce((v,B)=>v+B.size,0):0;if(r=Q(r,V,"max-total-size",v=>(s+=v.size,s<=q.value)),r.length===0)return j()}if(typeof d.filter=="function"){const s=d.filter(r);r=Q(r,V,"filter",v=>s.includes(v))}if(d.maxFiles!==void 0){let s=D===!0?R.length:0;if(r=Q(r,V,"max-files",()=>(s++,s<=$.value)),r.length===0)return j()}if(j(),r.length!==0)return r}function n(t){I(t),g.value!==!0&&(g.value=!0)}function c(t){te(t),(t.relatedTarget!==null||re.is.safari!==!0?t.relatedTarget!==F.value:document.elementsFromPoint(t.clientX,t.clientY).includes(F.value)===!1)===!0&&(g.value=!1)}function P(t){I(t);const x=t.dataTransfer.files;x.length!==0&&S(null,x),g.value=!1}function K(t){if(g.value===!0)return N("div",{ref:F,class:`q-${t}__dnd absolute-full`,onDragenter:I,onDragover:I,onDragleave:c,onDrop:P})}return Object.assign(_,{pickFiles:z,addFiles:m}),{pickFiles:z,addFiles:m,onDragover:n,onDragleave:c,processFiles:i,getDndNode:K,maxFilesNumber:$,maxTotalSizeNumber:q}}var ee=se({name:"QFile",inheritAttrs:!1,props:{...ue,...de,...ke,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ce,...we],setup(l,{slots:g,emit:a,attrs:S}){const{proxy:d}=le(),p=me(),_=W(null),F=W(!1),k=fe(l),{pickFiles:$,onDragover:q,onDragleave:z,processFiles:m,getDndNode:i}=Ne({editable:p.editable,dnd:F,getFileInput:X,addFilesToQueue:Y}),n=pe(l),c=h(()=>Object(l.modelValue)===l.modelValue?"length"in l.modelValue?Array.from(l.modelValue):[l.modelValue]:[]),P=h(()=>G(c.value)),K=h(()=>c.value.map(o=>o.name).join(", ")),t=h(()=>Se(c.value.reduce((o,b)=>o+b.size,0))),x=h(()=>({totalSize:t.value,filesNumber:c.value.length,maxFiles:l.maxFiles})),R=h(()=>({tabindex:-1,type:"file",title:"",accept:l.accept,capture:l.capture,name:k.value,...S,id:p.targetUid.value,disabled:p.editable.value!==!0})),D=h(()=>"q-file q-field--auto-height"+(F.value===!0?" q-file--dnd":"")),r=h(()=>l.multiple===!0&&l.append===!0);function V(o){const b=c.value.slice();b.splice(o,1),s(b)}function j(o){const b=c.value.indexOf(o);b>-1&&V(b)}function s(o){a("update:modelValue",l.multiple===!0?o:o[0])}function v(o){o.keyCode===13&&be(o)}function B(o){(o.keyCode===13||o.keyCode===32)&&$(o)}function X(){return _.value}function Y(o,b){const C=m(o,b,c.value,r.value),M=X();M!=null&&(M.value=""),C!==void 0&&((l.multiple===!0?l.modelValue&&C.every(oe=>c.value.includes(oe)):l.modelValue===C[0])||s(r.value===!0?c.value.concat(C):C))}function E(){return[N("input",{class:[l.inputClass,"q-file__filler"],style:l.inputStyle})]}function ae(){if(g.file!==void 0)return c.value.length===0?E():c.value.map((b,C)=>g.file({index:C,file:b,ref:this}));if(g.selected!==void 0)return c.value.length===0?E():g.selected({files:c.value,ref:this});if(l.useChips===!0)return c.value.length===0?E():c.value.map((b,C)=>N(qe,{key:"file-"+C,removable:p.editable.value,dense:!0,textColor:l.color,tabindex:l.tabindex,onRemove:()=>{V(C)}},()=>N("span",{class:"ellipsis",textContent:b.name})));const o=l.displayValue!==void 0?l.displayValue:K.value;return o.length!==0?[N("div",{class:l.inputClass,style:l.inputStyle,textContent:o})]:E()}function ie(){const o={ref:_,...R.value,...n.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:Y};return l.multiple===!0&&(o.multiple=!0),N("input",o)}return Object.assign(p,{fieldClass:D,emitValue:s,hasValue:P,inputRef:_,innerValue:c,floatingLabel:h(()=>P.value===!0||G(l.displayValue)),computedCounter:h(()=>{if(l.counterLabel!==void 0)return l.counterLabel(x.value);const o=l.maxFiles;return`${c.value.length}${o!==void 0?" / "+o:""} (${t.value})`}),getControlChild:()=>i("file"),getControl:()=>{const o={ref:p.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:l.tabindex};return p.editable.value===!0&&Object.assign(o,{onDragover:q,onDragleave:z,onKeydown:v,onKeyup:B}),N("div",o,[ie()].concat(ae()))}}),Object.assign(d,{removeAtIndex:V,removeFile:j,getNativeElement:()=>_.value}),ve(d,"nativeEl",()=>_.value),ge(p)}});const $e={class:"row q-pt-sm q-gutter-lg justify-center"},Ue=u("label",null,"R.U.C",-1),Ae=u("label",null,"Raz\xF3n Social",-1),Qe={class:"col-xs-11 col-md-5"},Re=u("label",null,"Nombre Comercial:",-1),De={class:"col-xs-11 col-md-5"},Pe=u("label",null,"Direcci\xF3n:",-1),Ee={class:"col-xs-11 col-md-5"},Oe=u("label",null,"Email:",-1),Te=u("label",null,"Obligado Contabilidad:",-1),Ie={class:"col-xs-11 col-md-5"},Ke=u("label",null,"Celular:",-1),Be=u("label",null,"Clave Certificado:",-1),Me=u("label",null,"Cargar Certificado:",-1),Le=u("label",null,"Logo de la empresa:",-1),We=u("div",null," La imagen debe tener las siguientes caracter\xEDsticas: ",-1),Xe=u("div",null,' Tama\xF1o m\xE1ximo 100 KB, extensi\xF3n .jpg o .png y ser menor a 200px por 200px." ',-1),el=ye({__name:"FormEmpresa",props:{edit:{type:Boolean}},setup(l){const g=l,{formEmpresa:a,loading:S,allowOnlyNumber:d,validateNumRuc:p,validateNumCelular:_,transformToUpperCase:F,onRejected:k,onSubmit:$,isPwd:q,isValid:z}=je();return he(()=>a.value.clave_certificado,(m,i)=>{z.value&&m!==i&&(z.value=!1)},{deep:!0}),(m,i)=>(O(),T(ze,{onSubmit:i[14]||(i[14]=n=>e($)(g.edit))},{default:y(()=>[f(Fe,{class:"my-card"},{default:y(()=>[f(Ve,{class:"q-pt-lg"},{default:y(()=>[u("div",$e,[u("div",{class:U(["col-xs-11 col-md-5",[m.$q.screen.width>600||"q-mt-md"]])},[Ue,f(w,{type:m.$q.platform.is.mobile?"number":"text",modelValue:e(a).ruc,"onUpdate:modelValue":i[0]||(i[0]=n=>e(a).ruc=n),counter:"",maxlength:"13",rules:e(p),onKeyup:e(d),"lazy-rules":"",dense:"",filled:"",required:""},null,8,["type","modelValue","rules","onKeyup"])],2),u("div",{class:U(["col-xs-11 col-md-5",[m.$q.screen.width>600||"q-mt-xs"]])},[Ae,f(w,{modelValue:e(a).razon_social,"onUpdate:modelValue":i[1]||(i[1]=n=>e(a).razon_social=n),modelModifiers:{trim:!0},onKeyup:e(F),dense:"",filled:"",required:""},null,8,["modelValue","onKeyup"])],2),u("div",Qe,[Re,f(w,{modelValue:e(a).nombre_comercial,"onUpdate:modelValue":i[2]||(i[2]=n=>e(a).nombre_comercial=n),modelModifiers:{trim:!0},onKeyup:e(F),dense:"",filled:"",required:""},null,8,["modelValue","onKeyup"])]),u("div",De,[Pe,f(w,{modelValue:e(a).direccion_matriz,"onUpdate:modelValue":i[3]||(i[3]=n=>e(a).direccion_matriz=n),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),u("div",Ee,[Oe,f(w,{modelValue:e(a).email,"onUpdate:modelValue":i[4]||(i[4]=n=>e(a).email=n),modelModifiers:{trim:!0},type:"email",dense:"",filled:"",required:""},null,8,["modelValue"])]),u("div",{class:"col-xs-11 col-md-5",style:xe(m.$q.screen.width<600||"position: relative; top: 12px;left: 24px;")},[Te,f(Ce,{color:"green",size:"lg",modelValue:e(a).obligado_contabilidad,"onUpdate:modelValue":i[5]||(i[5]=n=>e(a).obligado_contabilidad=n)},null,8,["modelValue"])],4),u("div",Ie,[Ke,f(w,{type:m.$q.platform.is.mobile?"number":"text",modelValue:e(a).telefono,"onUpdate:modelValue":i[6]||(i[6]=n=>e(a).telefono=n),counter:"",maxlength:"10",rules:e(_),onKeyup:e(d),"lazy-rules":"",dense:"",filled:"",required:""},null,8,["type","modelValue","rules","onKeyup"])]),u("div",{class:U(["col-xs-11 col-md-5",[m.$q.screen.width>600||"q-mt-xs"]])},[Be,f(w,{type:e(q)?"password":"text",filled:"",modelValue:e(a).clave_certificado,"onUpdate:modelValue":i[8]||(i[8]=n=>e(a).clave_certificado=n),modelModifiers:{trim:!0},dense:"",required:"","error-message":"La clave del certificado es incorrecta",error:e(z)},{append:y(()=>[f(A,{name:e(q)?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:i[7]||(i[7]=n=>q.value=!e(q))},null,8,["name"])]),prepend:y(()=>[f(A,{name:"key",color:"blue-grey-3"})]),_:1},8,["type","modelValue","error"])],2),u("div",{class:U(["col-xs-11 col-md-5",[m.$q.screen.width>600||"q-mt-sm"]])},[Me,f(ee,{dense:"",filled:"","bottom-slots":"",accept:".p12",onRejected:e(k),modelValue:e(a).archivo_certificado,"onUpdate:modelValue":i[10]||(i[10]=n=>e(a).archivo_certificado=n),label:e(a).archivo_certificado_old==null?"Cargar Certificado":e(a).archivo_certificado_old},{prepend:y(()=>[f(A,{name:"attach_file"})]),append:y(()=>[typeof e(a).archivo_certificado=="object"&&e(a).archivo_certificado!==null?(O(),T(A,{key:0,name:"close",onClick:i[9]||(i[9]=H(n=>e(a).archivo_certificado=null,["stop","prevent"])),class:"cursor-pointer"})):L("",!0)]),_:1},8,["onRejected","modelValue","label"])],2),u("div",{class:U(["col-xs-11 col-md-5",[m.$q.screen.width>600||"q-mt-sm"]])},[Le,f(ee,{dense:"",filled:"","bottom-slots":"",accept:".jpg, image/*",onRejected:e(k),modelValue:e(a).logo,"onUpdate:modelValue":i[12]||(i[12]=n=>e(a).logo=n),label:e(a).logo_old==null?"Cargar Logo":e(a).logo_old},{prepend:y(()=>[f(A,{name:"fa-solid fa-image"})]),hint:y(()=>[We,Xe]),append:y(()=>[typeof e(a).logo=="object"&&e(a).logo!==null?(O(),T(A,{key:0,name:"close",onClick:i[11]||(i[11]=H(n=>e(a).logo=null,["stop","prevent"])),class:"cursor-pointer"})):L("",!0)]),_:1},8,["onRejected","modelValue","label"])],2)])]),_:1}),f(_e,{class:U(["q-pb-md",[m.$q.screen.width<600?"justify-center q-ml-xl q-pt-none q-mb-md":"justify-between"]])},{default:y(()=>[m.$q.screen.width>600?(O(),T(J,{key:0,type:"submit",icon:"arrow_back",onClick:i[13]||(i[13]=n=>m.$router.push("/empresas")),outline:"",rounded:"",class:"q-ml-md",color:m.$q.dark.isActive?"blue-grey-2":"blue-grey-10"},{default:y(()=>[Z(" \xA0 Regresar ")]),_:1},8,["color"])):L("",!0),f(J,{type:"submit",icon:"save",loading:e(S),outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:y(()=>[Z(" \xA0 Guardar Cambios ")]),_:1},8,["loading"])]),_:1},8,["class"])]),_:1})]),_:1}))}});export{el as _};
