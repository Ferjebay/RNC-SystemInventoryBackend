import{d as k,a as Q,r as u,C as N,o as p,c as F,e as l,f as i,g as s,aN as B,aO as g,ag as D,Q as d,bi as M,i as r,ab as b,w as y,ah as q,h as $,ac as S}from"./index.33b032fc.js";import{Q as V}from"./QFile.b71ce6cc.js";import{Q as E}from"./QForm.48b7518b.js";import{u as K}from"./auth-user.5d5f881c.js";import{api as h}from"./axios.af8f8fcb.js";import{u as R}from"./useHelpers.1a30e8cf.js";import"./QChip.8e25d136.js";import"./format.2bc25e5f.js";import"./use-quasar.9902431c.js";const T={class:"q-ma-lg q-pt-md"},A={class:"row q-col-gutter-lg"},I=l("div",{class:"col-md-2"},null,-1),O={class:"col-xs-12 col-md-8"},L=l("div",{class:"text-h6"},"Configuraci\xF3n Basica",-1),G={class:"row q-pt-lg"},H=l("div",{class:"col-4 flex justify-end items-center"},[l("label",{for:""},"R.U.C:")],-1),P={class:"col-6 q-ml-md"},J=l("div",{class:"col-4 flex justify-end items-center q-mt-md"},[l("label",null,"Raz\xF3n Social:")],-1),W={class:"col-6 q-ml-md q-mt-md"},X=l("div",{class:"col-4 flex justify-end items-center q-mt-md"},[l("label",{for:""},"Nombre Comercial:")],-1),Y={class:"col-6 q-ml-md q-mt-md"},Z=l("div",{class:"col-4 flex justify-end items-center q-mt-md"},[l("label",{for:""},"Direcci\xF3n:")],-1),ee={class:"col-6 q-ml-md q-mt-md"},le=l("div",{class:"col-4 flex justify-end items-center q-mt-md"},[l("label",null,"Email:")],-1),oe={class:"col-6 q-ml-md q-mt-md"},ae=l("div",{class:"col-4 flex justify-end items-center"},[l("label",null,"Obligado Contabilidad:")],-1),te={class:"col-6 q-ml-md"},ie=l("div",{class:"col-4 flex justify-end items-center q-mt-md"},[l("label",null,"Celular:")],-1),se={class:"col-6 q-ml-md q-mt-md"},de=l("div",{class:"col-4 flex justify-end items-center q-mt-md"},[l("label",null,"Clave Certificado:")],-1),re={class:"col-6 q-ml-md q-mt-md"},ne=l("div",{class:"col-4 flex justify-end items-center q-mt-md"},[l("label",null,"Cargar Certificado:")],-1),ce={class:"col-6 q-ml-md q-mt-lg"},me=l("div",{class:"col-4 flex justify-end items-center q-mt-md"},[l("label",null,"Logo Empresa:")],-1),ue={class:"col-6 q-ml-md q-mt-lg"},pe={class:"col-12 q-ml-md q-mt-lg text-center"},xe=k({__name:"FormFactura",setup(ve){const C=K(),{claim:x}=Q.read(C.token),{mostrarNotify:m}=R(),n=u(!0),z=async()=>{const{data:a}=await h.get(`/companies/find/${x.company.id}`);let{archivo_certificado:o,...t}=a[0];e.value={...t},e.value.archivo_certificado_old=o},U=async()=>{let a=new FormData;a.append("id",e.value.id),a.append("ruc",e.value.ruc),a.append("nombre_comercial",e.value.nombre_comercial),a.append("razon_social",e.value.razon_social),a.append("direccion_matriz",e.value.direccion_matriz),a.append("obligado_contabilidad",e.value.obligado_contabilidad),a.append("email",e.value.email),a.append("telefono",e.value.telefono),a.append("clave_certificado",e.value.clave_certificado),a.append("archivo_certificado",e.value.archivo_certificado),a.append("archivo_certificado_old",e.value.archivo_certificado_old),a.append("logo_empresa",e.value.logo_empresa),a.append("logo_empresa_old",e.value.logo_empresa_old);try{const{data:o}=await h.post(`/companies/${e.value.id}`,a,{headers:{"Content-Type":"multipart/form-data"}});m("positive",o.msg)}catch(o){c.value=!0,m("warning",o.response.data.message)}},e=u({id:"",ruc:"",nombre_comercial:"",razon_social:"",direccion_matriz:"",obligado_contabilidad:!1,email:"",telefono:"",clave_certificado:"",archivo_certificado:null,archivo_certificado_old:null,logo_empresa:null,logo_empresa_old:null}),v=()=>{e.value.ruc=e.value.ruc.replace(/\D/g,"")},w=[a=>a.length>=13||"Debes completar 13 digitos"],j=[a=>a.length>=10||"Debes completar 10 digitos"],_=()=>{e.value.nombre_comercial=e.value.nombre_comercial.toUpperCase(),e.value.razon_social=e.value.razon_social.toUpperCase()},f=()=>{m("negative","El tipo de archivo es invalido")};z();const c=u(!1);return N(()=>e.value.clave_certificado,(a,o)=>{c.value&&a!==o&&(c.value=!1)},{deep:!0}),(a,o)=>(p(),F("div",T,[l("div",A,[I,l("div",O,[i(B,{class:"my-card"},{default:s(()=>[i(g,{class:D(["text-white q-py-sm",[a.$q.dark.isActive?"":"bg-blue-grey-10"]])},{default:s(()=>[L]),_:1},8,["class"]),i(g,{class:"q-pt-none",style:{"padding-bottom":"21px"}},{default:s(()=>[i(E,{onSubmit:U},{default:s(()=>[l("div",G,[H,l("div",P,[i(d,{modelValue:e.value.ruc,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.ruc=t),counter:"",maxlength:"13",rules:w,onKeyup:v,"lazy-rules":"",dense:"",outlined:"",required:""},null,8,["modelValue"])]),J,l("div",W,[i(d,{modelValue:e.value.razon_social,"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.razon_social=t),modelModifiers:{trim:!0},onKeyup:_,dense:"",outlined:"",required:""},null,8,["modelValue"])]),X,l("div",Y,[i(d,{modelValue:e.value.nombre_comercial,"onUpdate:modelValue":o[2]||(o[2]=t=>e.value.nombre_comercial=t),modelModifiers:{trim:!0},onKeyup:_,dense:"",outlined:"",required:""},null,8,["modelValue"])]),Z,l("div",ee,[i(d,{modelValue:e.value.direccion_matriz,"onUpdate:modelValue":o[3]||(o[3]=t=>e.value.direccion_matriz=t),modelModifiers:{trim:!0},dense:"",outlined:"",required:""},null,8,["modelValue"])]),le,l("div",oe,[i(d,{modelValue:e.value.email,"onUpdate:modelValue":o[4]||(o[4]=t=>e.value.email=t),modelModifiers:{trim:!0},type:"email",dense:"",outlined:"",required:""},null,8,["modelValue"])]),ae,l("div",te,[i(M,{color:"green",size:"lg",modelValue:e.value.obligado_contabilidad,"onUpdate:modelValue":o[5]||(o[5]=t=>e.value.obligado_contabilidad=t)},null,8,["modelValue"])]),ie,l("div",se,[i(d,{modelValue:e.value.telefono,"onUpdate:modelValue":o[6]||(o[6]=t=>e.value.telefono=t),counter:"",maxlength:"10",rules:j,onKeyup:v,"lazy-rules":"",dense:"",outlined:"",required:""},null,8,["modelValue"])]),de,l("div",re,[i(d,{type:n.value?"password":"text",outlined:"",modelValue:e.value.clave_certificado,"onUpdate:modelValue":o[8]||(o[8]=t=>e.value.clave_certificado=t),modelModifiers:{trim:!0},dense:"",required:"","error-message":"La clave del certificado es incorrecta",error:c.value},{append:s(()=>[i(r,{name:n.value?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:o[7]||(o[7]=t=>n.value=!n.value)},null,8,["name"])]),prepend:s(()=>[i(r,{name:"key",color:"blue-grey-3"})]),_:1},8,["type","modelValue","error"])]),ne,l("div",ce,[i(V,{dense:"",outlined:"","bottom-slots":"",accept:".p12",onRejected:f,modelValue:e.value.archivo_certificado,"onUpdate:modelValue":o[10]||(o[10]=t=>e.value.archivo_certificado=t),label:e.value.archivo_certificado_old==null?"Cargar Certificado":e.value.archivo_certificado_old},{prepend:s(()=>[i(r,{name:"attach_file"})]),append:s(()=>[typeof e.value.archivo_certificado=="object"&&e.value.archivo_certificado!==null?(p(),b(r,{key:0,name:"close",onClick:o[9]||(o[9]=y(t=>e.value.archivo_certificado=null,["stop","prevent"])),class:"cursor-pointer"})):q("",!0)]),_:1},8,["modelValue","label"])]),me,l("div",ue,[i(V,{dense:"",outlined:"","bottom-slots":"",accept:".jpg, image/*",onRejected:f,modelValue:e.value.logo_empresa,"onUpdate:modelValue":o[12]||(o[12]=t=>e.value.logo_empresa=t),label:e.value.logo_empresa_old==null?"Cargar Imagen":e.value.logo_empresa_old},{prepend:s(()=>[i(r,{name:"fa-solid fa-image"})]),append:s(()=>[typeof e.value.logo_empresa=="object"&&e.value.logo_empresa!==null?(p(),b(r,{key:0,name:"close",onClick:o[11]||(o[11]=y(t=>e.value.logo_empresa=null,["stop","prevent"])),class:"cursor-pointer"})):q("",!0)]),_:1},8,["modelValue","label"])]),l("div",pe,[i($,{type:"submit",icon:"save",outline:"",rounded:"",class:"q-ml-lg",color:"primary",style:{position:"relative",left:"60px"}},{default:s(()=>[S(" \xA0 Guardar Cambios ")]),_:1})])])]),_:1})]),_:1})]),_:1})])])]))}});export{xe as default};
