import{Q as V,a as k,b as P}from"./QTable.ab430b4f.js";import{Q as D,a as $}from"./QTooltip.73375d96.js";import{d as I,r as m,v as S,o,c as f,e as u,f as t,g as a,aP as L,a7 as i,ad as c,ah as p,ag as R,h as d,Q as U,aU as O,i as w,N as x,a8 as b,a9 as v}from"./index.349610b2.js";import{Q}from"./QBadge.ab282333.js";import{Q as G}from"./QPageSticky.eb8d9f57.js";import{C as q}from"./ClosePopup.af4a4206.js";import{u as H}from"./useHelpers.cdec0ff9.js";import{u as j}from"./useEmpresa.6578c8bb.js";import"./QList.99705dab.js";import"./QSelect.60fb7254.js";import"./QChip.970758e5.js";import"./QItemLabel.09e165b8.js";import"./format.2bc25e5f.js";import"./use-quasar.0505bd38.js";import"./axios.9a6212db.js";const J={class:"q-ma-lg q-pt-md"},K={class:"row q-col-gutter-lg"},M={class:"col-12"},W={class:"full-width row flex-center text-lime-10 q-gutter-sm"},X=u("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),pe=I({__name:"IndexPage",setup(Y){const E=[{name:"acciones",label:"Acciones",align:"center"},{label:"R.U.C",field:"ruc",align:"left",name:"b"},{label:"Nombre Comercial",field:"nombre_comercial",align:"left",name:"c"},{label:"Raz\xF3n Social",field:"razon_social",align:"left",name:"d"},{label:"Telefono",field:"telefono",align:"center",name:"e"},{label:"Email",field:"email",name:"email",align:"center"},{label:"Obligado Contabilidad",name:"obligadoContabilidad",align:"center"},{label:"Estado",name:"estado",align:"center"}];let{api:h,formEmpresa:Z}=j();const g=m(""),C=m([]),z=m(!1),{mostrarNotify:A,confirmDelete:F,isDeleted:N}=H(),y=async()=>{const{data:l}=await h.get("/companies");C.value=l},_=async(l,s)=>{try{const{data:{msg:e}}=await h.patch(`/companies/${l}/${s}`);A("positive",e),y()}catch(e){console.log(e)}};S(N,(l,s)=>{l&&y()});const T=async l=>{F("Estas seguro de eliminar esta empresa?",`/companies/${l}`)};y();const r=m("list"),B=m({rowsPerPage:10});return(l,s)=>(o(),f(p,null,[u("div",J,[u("div",K,[u("div",M,[t(L,{flat:"",class:"shadow_custom"},{default:a(()=>[t(V,{"title-class":"text-grey-7 text-h6",title:"Listado de Empresas",rows:C.value,loading:z.value,"hide-header":r.value==="grid",columns:E,"row-key":"name",grid:r.value==="grid",filter:g.value,pagination:B.value},{header:a(e=>[t(D,{props:e,style:{height:"60px"}},{default:a(()=>[(o(!0),f(p,null,R(e.cols,n=>(o(),i(P,{key:n.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:a(()=>[b(v(n.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":a(e=>[l.$q.screen.xs?c("",!0):(o(),i(d,{key:0,onClick:s[0]||(s[0]=n=>l.$router.push({name:"Agregar Empresa"})),outline:"",color:"primary",label:"Agregar Empresa",class:"q-mr-xs"})),t(U,{style:O(l.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=n=>g.value=n),placeholder:"Buscar..."},{append:a(()=>[t(w,{name:"search"})]),_:1},8,["style","modelValue"]),r.value==="list"?(o(),i(d,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:a(()=>[x((o(),i($,{disable:l.$q.platform.is.mobile},{default:a(()=>[b(v(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[q]])]),_:2},1032,["icon","onClick"])):c("",!0),e.inFullscreen?c("",!0):(o(),i(d,{key:2,flat:"",round:"",dense:"",icon:r.value==="grid"?"list":"grid_on",onClick:s[2]||(s[2]=n=>{r.value=r.value==="grid"?"list":"grid",l.separator=r.value==="grid"?"none":"horizontal"})},{default:a(()=>[x((o(),i($,{disable:l.$q.platform.is.mobile},{default:a(()=>[b(v(r.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[q]])]),_:1},8,["icon"]))]),"body-cell-obligadoContabilidad":a(e=>[t(k,{props:e},{default:a(()=>[b(v(e.row.obligado_contabilidad?"SI":"NO"),1)]),_:2},1032,["props"])]),"body-cell-estado":a(e=>[t(k,{props:e},{default:a(()=>[e.row.isActive?(o(),i(Q,{key:0,outline:"",color:"positive",label:"Activo",ss:"q-pa-sm"})):(o(),i(Q,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":a(e=>[t(k,{props:e},{default:a(()=>[e.row.isActive?(o(),f(p,{key:0},[t(d,{round:"",color:"blue-grey",onClick:n=>l.$router.push({name:"Editar Empresa",params:{empresa_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"]),e.row.isActive?(o(),i(d,{key:0,round:"",color:"blue-grey",icon:"close",onClick:n=>_(e.row.id,!1),size:"10px"},null,8,["onClick"])):c("",!0)],64)):(o(),f(p,{key:1},[e.row.isActive?c("",!0):(o(),i(d,{key:0,round:"",color:"blue-grey",icon:"done",onClick:n=>_(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.estado?c("",!0):(o(),i(d,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:n=>T(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":a(({icon:e})=>[u("div",W,[t(w,{size:"2em",name:"sentiment_dissatisfied"}),X,t(w,{size:"2em",name:g.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),l.$q.screen.xs?(o(),i(G,{key:0,position:"bottom-right",offset:[18,18]},{default:a(()=>[t(d,{round:"",color:"secondary",size:"lg",icon:"add",onClick:s[3]||(s[3]=e=>l.$router.push({name:"Agregar Empresa"}))})]),_:1})):c("",!0)],64))}});export{pe as default};
