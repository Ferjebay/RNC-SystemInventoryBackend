import{Q as J,a as Q,b as T,c as K}from"./QTable.702055f1.js";import{Q as M,a as A}from"./QTooltip.68bb2c78.js";import{d as R,o as a,ab as s,g as l,aN as S,f as t,e as g,ac as k,O as V,h as d,aO as B,N as W,r as v,C as P,c as m,ah as f,af as _,aQ as p,aR as I,ak as C,aj as X,Q as Y,i as $,ad as q}from"./index.35433652.js";import{Q as Z}from"./QPageSticky.fcb67967.js";import{C as z}from"./ClosePopup.0eb31d95.js";import{api as L}from"./axios.e480c0af.js";import{u as ee}from"./useHelpers.b0a9dae0.js";import{a as le,u as te,_ as ae}from"./AddCliente.80c50f40.js";import"./QList.363f2ff9.js";import"./QSelect.5729d85f.js";import"./QChip.98d4cceb.js";import"./QItemLabel.e08d5cac.js";import"./format.2bc25e5f.js";import"./use-quasar.c036a036.js";import"./QForm.1a4d893e.js";const oe={class:"text-h6"},ie=R({__name:"EditCliente",setup(U){return(N,w)=>(a(),s(S,{style:{width:"710px !important","max-width":"fit-content"}},{default:l(()=>[t(B,null,{default:l(()=>[g("div",oe,[k(" Editar Cliente "),V(t(d,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[z]])])]),_:1}),t(W,{inset:""}),t(B,{class:"q-pt-none"},{default:l(()=>[t(le,{edit:!0})]),_:1})]),_:1}))}}),ne={class:"q-ma-lg q-pt-md"},se={class:"row q-col-gutter-lg"},re={class:"col-12"},de={key:0},ce={key:1},ue={key:2},me={class:"full-width row flex-center text-lime-10 q-gutter-sm"},fe=g("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),ze=R({__name:"IndexPage",setup(U){const N=[{name:"acciones",label:"acciones",align:"center"},{name:"nombre",align:"center",label:"Cliente",field:"nombres",sortable:!0},{name:"tipo_documento",align:"center",label:"Tipo de Documento",field:"tipo_documento"},{name:"numero_documento",align:"center",label:"Numero de Documento",field:"numero_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Celular",field:"celular",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{actualizarLista:w,modalAgregarCliente:n,modalEditarCliente:u,formCliente:h}=te();const y=v(""),D=v([]),x=v(!1),{mostrarNotify:E,confirmDelete:O,isDeleted:j}=ee();P(w,(i,o)=>{i&&b()});const b=async()=>{x.value=!0;try{const{data:i}=await L.get("/customers");D.value=i,w.value=!1}catch(i){E("warning",i.response.data.message)}x.value=!1},F=async(i,o)=>{try{const{data:{msg:e}}=await L.patch(`/customers/${i}/${o}`);E("positive",e),b()}catch(e){console.log(e)}};P(j,(i,o)=>{i&&b()});const G=async i=>{try{O("Estas seguro de eliminar este cliente?",`/customers/${i}`)}catch(o){console.log(o)}};b();const c=v("list"),H=v({rowsPerPage:10});return(i,o)=>(a(),m(C,null,[g("div",ne,[g("div",se,[g("div",re,[t(S,{flat:"",class:"shadow_custom"},{default:l(()=>[t(J,{"title-class":"text-grey-7 text-h6",title:"Listado de Clientes",rows:D.value,loading:x.value,"hide-header":c.value==="grid",columns:N,"row-key":"name",grid:c.value==="grid",filter:y.value,pagination:H.value},{header:l(e=>[t(M,{props:e,style:{height:"60px"}},{default:l(()=>[(a(!0),m(C,null,X(e.cols,r=>(a(),s(K,{key:r.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:l(()=>[k(q(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":l(e=>[i.$q.screen.xs?f("",!0):(a(),s(d,{key:0,onClick:o[0]||(o[0]=r=>p(n)?n.value=!_(n):n=!_(n)),outline:"",color:"primary",label:"Agregar Cliente",class:"q-mr-xs"})),t(Y,{outlined:"",dense:"",debounce:"300",modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=r=>y.value=r),placeholder:"Buscar..."},{append:l(()=>[t($,{name:"search"})]),_:1},8,["modelValue"]),c.value==="list"?(a(),s(d,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:l(()=>[V((a(),s(A,{disable:i.$q.platform.is.mobile},{default:l(()=>[k(q(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[z]])]),_:2},1032,["icon","onClick"])):f("",!0),e.inFullscreen?f("",!0):(a(),s(d,{key:2,flat:"",round:"",dense:"",icon:c.value==="grid"?"list":"grid_on",onClick:o[2]||(o[2]=r=>{c.value=c.value==="grid"?"list":"grid",i.separator=c.value==="grid"?"none":"horizontal"})},{default:l(()=>[V((a(),s(A,{disable:i.$q.platform.is.mobile},{default:l(()=>[k(q(c.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[z]])]),_:1},8,["icon"]))]),"body-cell-tipo_documento":l(e=>[t(Q,{props:e},{default:l(()=>[g("div",null,[e.row.tipo_documento==4?(a(),m("label",de,"RUC")):e.row.tipo_documento==5?(a(),m("label",ce,"Cedula")):(a(),m("label",ue,"Pasaporte"))])]),_:2},1032,["props"])]),"body-cell-estado":l(e=>[t(Q,{props:e},{default:l(()=>[e.row.isActive?(a(),s(T,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(a(),s(T,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":l(e=>[t(Q,{props:e},{default:l(()=>[t(d,{round:"",color:"blue-grey",onClick:r=>(p(h)?h.value={...e.row}:h={...e.row},p(u)?u.value=!0:u=!0),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"]),e.row.isActive?(a(),m(C,{key:0},[e.row.isActive?(a(),s(d,{key:0,round:"",color:"blue-grey",icon:"close",onClick:r=>F(e.row.id,!1),size:"10px"},null,8,["onClick"])):f("",!0)],64)):(a(),m(C,{key:1},[e.row.isActive?f("",!0):(a(),s(d,{key:0,round:"",color:"blue-grey",icon:"done",onClick:r=>F(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.estado?f("",!0):(a(),s(d,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:r=>G(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":l(({icon:e})=>[g("div",me,[t($,{size:"2em",name:"sentiment_dissatisfied"}),fe,t($,{size:"2em",name:y.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),i.$q.screen.xs?(a(),s(Z,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[t(d,{round:"",color:"secondary",size:"lg",icon:"add",onClick:o[3]||(o[3]=e=>p(n)?n.value=!_(n):n=!_(n))})]),_:1})):f("",!0),t(I,{modelValue:_(n),"onUpdate:modelValue":o[4]||(o[4]=e=>p(n)?n.value=e:n=e)},{default:l(()=>[t(ae)]),_:1},8,["modelValue"]),t(I,{modelValue:_(u),"onUpdate:modelValue":o[5]||(o[5]=e=>p(u)?u.value=e:u=e)},{default:l(()=>[t(ie)]),_:1},8,["modelValue"])],64))}});export{ze as default};
