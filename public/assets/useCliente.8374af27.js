import{u as b}from"./useHelpers.eb8fd38c.js";import{api as n}from"./axios.f92fb9a5.js";import{r as i,v as w,D}from"./index.c45ffa3b.js";const r=i(!1),c=i(1),d=i(!1),E=i(!1),x=i(!1),e=i({nombres:"",tipo_documento:"",numero_documento:"",email:"",celular:"",direccion:""}),y=i({tipo:"",dia_pago:"",crear_factura:"",tipo_impuesto:"",dia_gracia:"",aplicar_corte:""});i({tipo:"",dia_pago:"",crear_factura:"",tipo_impuesto:"",dia_gracia:"",aplicar_corte:""});const C=i({tipo:{message:"",isValid:!0},dia_pago:{message:"",isValid:!0},crear_factura:{message:"",isValid:!0},tipo_impuesto:{message:"",isValid:!0},dia_gracia:{message:"",isValid:!0},aplicar_corte:{message:"",isValid:!0}}),o=i({nombres:{message:"",isValid:!0},tipo_documento:{message:"",isValid:!0},numero_documento:{message:"",isValid:!0},email:{message:"",isValid:!0},celular:{message:"",isValid:!0},direccion:{message:"",isValid:!0},company_id:{message:"",isValid:!0}}),A=()=>{const{router:v,mostrarNotify:u,confirmDelete:p,isDeleted:_,route:g}=b(),m=["nombres","tipo_documento","numero_documento","email","celular","direccion"],f=()=>{e.value.nombres="",e.value.tipo_documento="",e.value.numero_documento="",e.value.email="",e.value.celular="",e.value.direccion=""},V=()=>{m.forEach(a=>{o.value[a].isValid=!0})},h=()=>{let a=!1;var l=/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/;m.forEach(s=>{(e.value[s].length==0||e.value[s]==0)&&(o.value[s].message="Debes completar este campo",o.value[s].isValid=!1,a=!0)}),o.value.email.isValid&&!l.test(e.value.email)&&(o.value.email.message="Ingresa un email valido",o.value.email.isValid=!1,a=!0);let t;e.value.tipo_documento==="04"&&(t=13),e.value.tipo_documento==="05"&&(t=10),e.value.tipo_documento==="06"&&(t=10),o.value.numero_documento.isValid&&e.value.numero_documento.length!=t&&(o.value.numero_documento.message=`Debes completar ${t} digitos`,o.value.numero_documento.isValid=!1,a=!0),a||(d.value=!0,c.value=2)};return w(()=>{D(e.value,(a,l)=>{if(e.value.nombres=a.nombres.toUpperCase(),a.tipo_documento!==""&&a.tipo_documento!=="04"&&e.value.numero_documento.length>10){const t=a.numero_documento.length-10,s=a.numero_documento.substring(0,a.numero_documento.length-t);e.value.numero_documento=s}})}),{api:n,formCliente:e,formFacturacion:y,loading:r,limpiarFormulario:f,validaciones:o,validacionesFacturacion:C,validarDatosPersonales:h,mostrarNotify:u,quitarErrores:V,confirmDelete:p,route:g,step:c,done1:d,done2:E,done3:x,isDeleted:_,onSubmit:async a=>{try{r.value=!0,a?await n.patch("/customers/"+e.value.id,e.value):await n.post("/customers",e.value),u("positive",`Cliente ${a?"editado":"agregado"} exitosamente`),r.value=!1,v.push({name:"cliente.index"})}catch(l){u("warning",l.response.data.message),r.value=!1}}}};export{A as u};
