import{aJ as re,as as N,C as ne,aM as le,ap as E,aN as U,ay as J,am as Q,aq as R,r as X,n as k,v as de,z as ue,p as Y,aC as ce,bl as pe,s as oe,Y as me,bD as ve,o as z,c as L,e as t,ac as d,f as q,i as H,a8 as V,g as h,a9 as w,ab as a,ah as fe,h as K,a7 as ge,ad as qe}from"./index.af8b3988.js";import{g as Z,s as ee}from"./touch.3df10340.js";import{d as he}from"./QItemLabel.4b75afc5.js";import{u as xe}from"./use-cache.b0833c75.js";import{Q as D}from"./QSelect.ffbc2950.js";import{Q as ye}from"./QChip.f2c2a808.js";import{Q as W}from"./QBadge.ddf5e601.js";import{u as be}from"./useCliente.aa15ca83.js";import{d as M}from"./date.8fa43a55.js";function we(i){const c=[.06,6,50];return typeof i=="string"&&i.length&&i.split(":").forEach((f,x)=>{const r=parseFloat(f);r&&(c[x]=r)}),c}var $e=re({name:"touch-swipe",beforeMount(i,{value:c,arg:f,modifiers:x}){if(x.mouse!==!0&&N.has.touch!==!0)return;const r=x.mouseCapture===!0?"Capture":"",e={handler:c,sensitivity:we(f),direction:Z(x),noop:ne,mouseStart(n){ee(n,e)&&le(n)&&(E(e,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),e.start(n,!0))},touchStart(n){if(ee(n,e)){const g=n.target;E(e,"temp",[[g,"touchmove","move","notPassiveCapture"],[g,"touchcancel","end","notPassiveCapture"],[g,"touchend","end","notPassiveCapture"]]),e.start(n)}},start(n,g){N.is.firefox===!0&&U(i,!0);const b=J(n);e.event={x:b.left,y:b.top,time:Date.now(),mouse:g===!0,dir:!1}},move(n){if(e.event===void 0)return;if(e.event.dir!==!1){Q(n);return}const g=Date.now()-e.event.time;if(g===0)return;const b=J(n),$=b.left-e.event.x,v=Math.abs($),C=b.top-e.event.y,m=Math.abs(C);if(e.event.mouse!==!0){if(v<e.sensitivity[1]&&m<e.sensitivity[1]){e.end(n);return}}else if(window.getSelection().toString()!==""){e.end(n);return}else if(v<e.sensitivity[2]&&m<e.sensitivity[2])return;const y=v/g,A=m/g;e.direction.vertical===!0&&v<m&&v<100&&A>e.sensitivity[0]&&(e.event.dir=C<0?"up":"down"),e.direction.horizontal===!0&&v>m&&m<100&&y>e.sensitivity[0]&&(e.event.dir=$<0?"left":"right"),e.direction.up===!0&&v<m&&C<0&&v<100&&A>e.sensitivity[0]&&(e.event.dir="up"),e.direction.down===!0&&v<m&&C>0&&v<100&&A>e.sensitivity[0]&&(e.event.dir="down"),e.direction.left===!0&&v>m&&$<0&&m<100&&y>e.sensitivity[0]&&(e.event.dir="left"),e.direction.right===!0&&v>m&&$>0&&m<100&&y>e.sensitivity[0]&&(e.event.dir="right"),e.event.dir!==!1?(Q(n),e.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),he(),e.styleCleanup=j=>{e.styleCleanup=void 0,document.body.classList.remove("non-selectable");const P=()=>{document.body.classList.remove("no-pointer-events--children")};j===!0?setTimeout(P,50):P()}),e.handler({evt:n,touch:e.event.mouse!==!0,mouse:e.event.mouse,direction:e.event.dir,duration:g,distance:{x:v,y:m}})):e.end(n)},end(n){e.event!==void 0&&(R(e,"temp"),N.is.firefox===!0&&U(i,!1),e.styleCleanup!==void 0&&e.styleCleanup(!0),n!==void 0&&e.event.dir!==!1&&Q(n),e.event=void 0)}};if(i.__qtouchswipe=e,x.mouse===!0){const n=x.mouseCapture===!0||x.mousecapture===!0?"Capture":"";E(e,"main",[[i,"mousedown","mouseStart",`passive${n}`]])}N.has.touch===!0&&E(e,"main",[[i,"touchstart","touchStart",`passive${x.capture===!0?"Capture":""}`],[i,"touchmove","noop","notPassiveCapture"]])},updated(i,c){const f=i.__qtouchswipe;f!==void 0&&(c.oldValue!==c.value&&(typeof c.value!="function"&&f.end(),f.handler=c.value),f.direction=Z(c.modifiers))},beforeUnmount(i){const c=i.__qtouchswipe;c!==void 0&&(R(c,"main"),R(c,"temp"),N.is.firefox===!0&&U(i,!1),c.styleCleanup!==void 0&&c.styleCleanup(),delete i.__qtouchswipe)}});const st={name:{required:!0},disable:Boolean},te={setup(i,{slots:c}){return()=>Y("div",{class:"q-panel scroll",role:"tabpanel"},oe(c.default))}},it={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},at=["update:modelValue","beforeTransition","transition"];function rt(){const{props:i,emit:c,proxy:f}=ue(),{getCacheWithFn:x}=xe();let r,e;const n=X(null),g=X(null);function b(l){const p=i.vertical===!0?"up":"left";T((f.$q.lang.rtl===!0?-1:1)*(l.direction===p?1:-1))}const $=k(()=>[[$e,b,void 0,{horizontal:i.vertical!==!0,vertical:i.vertical,mouse:!0}]]),v=k(()=>i.transitionPrev||`slide-${i.vertical===!0?"down":"right"}`),C=k(()=>i.transitionNext||`slide-${i.vertical===!0?"up":"left"}`),m=k(()=>`--q-transition-duration: ${i.transitionDuration}ms`),y=k(()=>typeof i.modelValue=="string"||typeof i.modelValue=="number"?i.modelValue:String(i.modelValue)),A=k(()=>({include:i.keepAliveInclude,exclude:i.keepAliveExclude,max:i.keepAliveMax})),j=k(()=>i.keepAliveInclude!==void 0||i.keepAliveExclude!==void 0);de(()=>i.modelValue,(l,p)=>{const _=s(l)===!0?o(l):-1;e!==!0&&I(_===-1?0:_<o(p)?-1:1),n.value!==_&&(n.value=_,c("beforeTransition",l,p),me(()=>{c("transition",l,p)}))});function P(){T(1)}function F(){T(-1)}function S(l){c("update:modelValue",l)}function s(l){return l!=null&&l!==""}function o(l){return r.findIndex(p=>p.props.name===l&&p.props.disable!==""&&p.props.disable!==!0)}function u(){return r.filter(l=>l.props.disable!==""&&l.props.disable!==!0)}function I(l){const p=l!==0&&i.animated===!0&&n.value!==-1?"q-transition--"+(l===-1?v.value:C.value):null;g.value!==p&&(g.value=p)}function T(l,p=n.value){let _=p+l;for(;_>-1&&_<r.length;){const B=r[_];if(B!==void 0&&B.props.disable!==""&&B.props.disable!==!0){I(l),e=!0,c("update:modelValue",B.props.name),setTimeout(()=>{e=!1});return}_+=l}i.infinite===!0&&r.length!==0&&p!==-1&&p!==r.length&&T(l,l===-1?r.length:-1)}function G(){const l=o(i.modelValue);return n.value!==l&&(n.value=l),!0}function O(){const l=s(i.modelValue)===!0&&G()&&r[n.value];return i.keepAlive===!0?[Y(ve,A.value,[Y(j.value===!0?x(y.value,()=>({...te,name:y.value})):te,{key:y.value,style:m.value},()=>l)])]:[Y("div",{class:"q-panel scroll",style:m.value,key:y.value,role:"tabpanel"},[l])]}function se(){if(r.length!==0)return i.animated===!0?[Y(ce,{name:g.value},O)]:O()}function ie(l){return r=pe(oe(l.default,[])).filter(p=>p.props!==null&&p.props.slot===void 0&&s(p.props.name)===!0),r.length}function ae(){return r}return Object.assign(f,{next:P,previous:F,goTo:S}),{panelIndex:n,panelDirectives:$,updatePanelsList:ie,updatePanelIndex:G,getPanelContent:se,getEnabledPanels:u,getPanels:ae,isValidPanelName:s,keepAliveProps:A,needsUniqueKeepAliveWrapper:j,goToPanelByOffset:T,goToPanel:S,nextPanel:P,previousPanel:F}}const _e={class:"col-12 flex justify-start items-center q-pt-none"},Ve={class:"row"},Ce={class:"col-xs-12 col-md-7"},Ae={class:"row"},Pe={class:"col-xs-12 col-md-7"},ke={class:"row"},De={class:"col-xs-12 col-md-7"},je={class:"row"},Me={class:"col-xs-12 col-md-7"},Se={class:"row"},Te={class:"col-xs-12 col-md-7"},Ne={class:"row"},Ye={class:"col-xs-12 col-md-7"},Fe={class:"col-12 flex justify-start items-center q-py-md"},Be={class:"row"},Ee={class:"col-xs-12 col-md-7"},ze={class:"col-md-12 q-py-md"},Ie={class:"row q-col-gutter-sm"},Ue={class:"col-xs-12 col-md-4"},Qe={class:"text-weight-bold"},Re={class:"col-xs-12 col-md-4"},Le={class:"text-weight-bold"},Ke={class:"col-xs-12 col-md-4"},We={class:"text-weight-bold"},nt={__name:"FactAndNot",props:["edit"],setup(i){const{api:c,mes_pago:f,mostrarNotify:x,formFacturacion:r,validacionesFacturacion:e,validarFormFact:n,step:g}=be();let b,$,v,C=r.value.dia_gracia.split(" ")[0];f.value.estado=="pagado"?(b=M.addToDate(f.value.dia_pago,{months:1}),$="Desactivado"):(b=M.formatDate(f.value.dia_pago,"DD/MM/YYYY"),$=M.addToDate(f.value.dia_pago,{day:C}));const m=f.value.dia_pago.split("-");v=M.addToDate(`${m[0]}-${m[1]}-02`,{months:1});const y=X(!1),A=async()=>{if(!n())try{y.value=!0;const{data:o}=await c.put(`/customers/actualizarDatosFactura/${r.value.id}`,r.value);r.value={...o.factura[0]},x("positive",o.msg),y.value=!1}catch(o){y.value=!1,x("warning",o.response.data.message)}};let j=new Array(28).fill(0).map((s,o)=>o+1),P=new Array(25).fill(0).map((s,o)=>`${o+1}  ${o==0?"D\xEDa":"D\xEDas"} antes`),F=new Array(25).fill(0).map((s,o)=>`${o+1}  ${o==0?"D\xEDa":"D\xEDas"}`),S=new Array(12).fill(0).map((s,o)=>`${o+1}  ${o==0?"Mes":"Meses"} ${o==0?"Vencido":"Vencidos"}`);return P.unshift("Desactivado"),S.unshift("Desactivado"),(s,o)=>(z(),L("div",{class:d(["row q-col-gutter-md",s.$q.screen.width>1022?"q-col-gutter-y-lg q-pt-md":""])},[t("div",_e,[t("label",{class:d(["text-h6 text-weight-medium",s.$q.screen.width>1022||"q-pt-xs"])},[q(H,{name:"description"}),V(" Facturaci\xF3n: ")],2)]),t("div",{class:d(["col-xs-12 col-md-6",(s.$q.screen.width<1022,"q-pt-xs")])},[t("div",Ve,[t("div",{class:d(["col-xs-12 col-md-4 flex items-center justify-end",[s.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"texto-rigth q-pb-md"]])},[t("label",{class:d(s.$q.screen.width<1022||"q-pr-md")}," Tipo: ",2)],2),t("div",Ce,[q(D,{dense:"",modelValue:a(r).tipo,"onUpdate:modelValue":[o[0]||(o[0]=u=>a(r).tipo=u),o[1]||(o[1]=u=>a(e).tipo.isValid=!0)],modelModifiers:{trim:!0},outlined:"",error:!a(e).tipo.isValid,"emit-value":"","map-options":"",options:[{label:"Prepago (Adelantado)",value:"prepago"},{label:"Postpago (Vencido)",value:"postpago"}]},{error:h(()=>[t("label",{class:d(s.$q.dark.isActive?"text-red-4":"text-negative")},w(a(e).tipo.message),3)]),_:1},8,["modelValue","error","options"])])])],2),t("div",{class:d(["col-xs-12 col-md-6",s.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",Ae,[t("div",{class:d(["col-xs-12 col-md-4 flex items-center justify-end",[s.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:d(s.$q.screen.width<1022||"q-pr-md")}," Dia Pago: ",2)],2),t("div",Pe,[q(D,{dense:"",modelValue:a(r).dia_pago,"onUpdate:modelValue":[o[2]||(o[2]=u=>a(r).dia_pago=u),o[3]||(o[3]=u=>a(e).dia_pago.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:a(j),error:!a(e).dia_pago.isValid},{error:h(()=>[t("label",{class:d(s.$q.dark.isActive?"text-red-4":"text-negative")},w(a(e).dia_pago.message),3)]),_:1},8,["modelValue","options","error"])])])],2),t("div",{class:d(["col-xs-12 col-md-6",s.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",ke,[t("div",{class:d(["col-xs-12 col-md-4 flex items-center justify-end",[s.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:d(s.$q.screen.width<1022||"q-pr-md")}," Tipo Impuesto: ",2)],2),t("div",De,[q(D,{dense:"",modelValue:a(r).tipo_impuesto,"onUpdate:modelValue":[o[4]||(o[4]=u=>a(r).tipo_impuesto=u),o[5]||(o[5]=u=>a(e).tipo_impuesto.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:["Impuestos incluido","Mas impuestos","Ninguno"],error:!a(e).tipo_impuesto.isValid},{error:h(()=>[t("label",{class:d(s.$q.dark.isActive?"text-red-4":"text-negative")},w(a(e).tipo_impuesto.message),3)]),_:1},8,["modelValue","error"])])])],2),t("div",{class:d(["col-xs-12 col-md-6",s.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",je,[t("div",{class:d(["col-xs-12 col-md-4 flex items-center justify-end",[s.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:d(s.$q.screen.width<1022||"q-pr-md")}," D\xEDas de gracia: ",2)],2),t("div",Me,[q(D,{dense:"",modelValue:a(r).dia_gracia,"onUpdate:modelValue":[o[6]||(o[6]=u=>a(r).dia_gracia=u),o[7]||(o[7]=u=>a(e).dia_gracia.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:a(F),hint:"*d\xEDas tolerancia para aplicar corte",error:!a(e).dia_gracia.isValid},{error:h(()=>[t("label",{class:d(s.$q.dark.isActive?"text-red-4":"text-negative")},w(a(e).dia_gracia.message),3)]),_:1},8,["modelValue","options","error"])])])],2),t("div",{class:d(["col-xs-12 col-md-6",s.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",Se,[t("div",{class:d(["col-xs-12 col-md-4 flex items-center justify-end",[s.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:d(s.$q.screen.width<1022||"q-pr-md")}," Aplicar Corte: ",2)],2),t("div",Te,[q(D,{dense:"",modelValue:a(r).aplicar_corte,"onUpdate:modelValue":[o[8]||(o[8]=u=>a(r).aplicar_corte=u),o[9]||(o[9]=u=>a(e).aplicar_corte.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:a(S),error:!a(e).aplicar_corte.isValid},{error:h(()=>[t("label",{class:d(s.$q.dark.isActive?"text-red-4":"text-negative")},w(a(e).aplicar_corte.message),3)]),_:1},8,["modelValue","options","error"])])])],2),t("div",{class:d(["col-xs-12 col-md-6",s.$q.screen.width<1022?"q-pt-none":"q-pt-xs"])},[t("div",Ne,[t("div",{class:d(["col-xs-12 col-md-4 flex items-center justify-end",[s.$q.screen.width<1022?"justify-center q-mt-md q-pb-xs":"justify-end text-right q-pb-md"]])},[t("label",{class:d(s.$q.screen.width<1022||"q-pr-md")}," Tipo Comprobante: ",2)],2),t("div",Ye,[q(D,{dense:"",modelValue:a(r).tipo_comprobante,"onUpdate:modelValue":[o[10]||(o[10]=u=>a(r).tipo_comprobante=u),o[11]||(o[11]=u=>a(e).tipo_comprobante.isValid=!0)],modelModifiers:{trim:!0},outlined:"",options:["Factura","Recibo"],error:!a(e).tipo_comprobante.isValid},{error:h(()=>[t("label",{class:d(s.$q.dark.isActive?"text-red-4":"text-negative")},w(a(e).tipo_comprobante.message),3)]),_:1},8,["modelValue","error"])])])],2),t("div",Fe,[t("label",{class:d(["text-h6 text-weight-medium",s.$q.screen.width>1022||"q-pt-xs"])},[q(H,{name:"notifications"}),V(" Notificaciones: ")],2)]),t("div",{class:d(["col-xs-12 col-md-6",(s.$q.screen.width<1022,"q-pt-xs")])},[t("div",Be,[t("div",{class:d(["col-xs-12 col-md-4 flex items-center justify-end",[s.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"texto-rigth q-pb-md"]])},[t("label",{class:d(s.$q.screen.width<1022||"q-pr-md")}," Recordatorios de pago: ",2)],2),t("div",Ee,[q(D,{dense:"",modelValue:a(r).recordatorio_pago,"onUpdate:modelValue":[o[12]||(o[12]=u=>a(r).recordatorio_pago=u),o[13]||(o[13]=u=>a(e).recordatorio_pago.isValid=!0)],modelModifiers:{trim:!0},outlined:"",error:!a(e).recordatorio_pago.isValid,multiple:"","stack-label":"",options:["Correo","Telegram"]},{error:h(()=>[t("label",{class:d(s.$q.dark.isActive?"text-red-4":"text-negative")},w(a(e).recordatorio_pago.message),3)]),"selected-item":h(u=>[q(ye,{color:"deep-orange-14","text-color":"white",icon:"done",removable:"",dense:"",onRemove:I=>u.removeAtIndex(u.index),tabindex:u.tabindex,class:"q-ma-none q-mr-sm"},{default:h(()=>[V(w(u.opt),1)]),_:2},1032,["onRemove","tabindex"])]),_:1},8,["modelValue","error"])])])],2),i.edit?(z(),L(fe,{key:0},[t("div",ze,[t("div",Ie,[t("div",Ue,[q(W,{class:"text-center flex-center q-py-md",style:{width:"100%","text-align":"center","font-size":"15px"},outline:"",color:"lime-7"},{default:h(()=>[V(" D\xEDa de pago: "),t("span",Qe," \xA0"+w(a(b)),1)]),_:1})]),t("div",Re,[q(W,{class:"text-center flex-center q-py-md",style:{width:"100%","text-align":"center","font-size":"15px"},outline:"",color:"red-4"},{default:h(()=>[V(" D\xEDa de corte: "),t("span",Le," \xA0"+w(a(M).formatDate(a($),"DD/MM/YYYY")),1)]),_:1})]),t("div",Ke,[q(W,{class:"text-center flex-center q-py-md",style:{width:"100%","text-align":"center","font-size":"15px"},outline:"",color:"cyan-4"},{default:h(()=>[V(" Crear factura: "),t("span",We," \xA0"+w(a(M).formatDate(a(v),"DD/MM/YYYY"))+" 12:00 AM ",1)]),_:1})])])]),t("div",{class:d(["col-xs-12 col-md-12 flex q-py-md justify-center",[s.$q.screen.width<600?" q-pt-none q-ml-md":""]]),style:{"padding-bottom":"0px"}},[q(K,{"icon-right":"save",onClick:A,loading:y.value,outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:h(()=>[V(" \xA0 Guardar\xA0 ")]),_:1},8,["loading"])],2)],64)):(z(),L("div",{key:1,class:d(["col-xs-12 col-md-12 flex q-py-md",[s.$q.screen.width<600?"justify-center q-pt-none q-ml-md":"justify-between"]]),style:{"padding-bottom":"0px"}},[s.$q.screen.width>600?(z(),ge(K,{key:0,icon:"arrow_back",onClick:o[14]||(o[14]=u=>g.value=1),outline:"",rounded:"",class:"q-ml-md",color:s.$q.dark.isActive?"blue-grey-2":"blue-grey-10"},{default:h(()=>[V(" \xA0 Anterior ")]),_:1},8,["color"])):qe("",!0),q(K,{onClick:a(n),"icon-right":"arrow_forward",outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:h(()=>[V(" \xA0 Siguiente\xA0 ")]),_:1},8,["onClick"])],2))],2))}};export{nt as _,it as a,at as b,rt as c,st as u};
