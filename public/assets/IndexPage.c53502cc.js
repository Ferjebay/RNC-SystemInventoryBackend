import{Q as R}from"./QInnerLoading.3f629c8e.js";import{Q as U,a as L}from"./QTable.29e94e9e.js";import{Q as O,a as S}from"./QTooltip.29a2159d.js";import{Q as j}from"./QSelect.a2aa878a.js";import{d as M,r as p,v as G,o as l,c as f,e as m,f as i,g as s,aU as H,ad as c,a9 as t,af as n,aj as b,ai as J,ae as K,h as d,Q as W,bc as X,i as Y,O as A,aa as _,ab as x}from"./index.444b4201.js";import{Q as D}from"./QBadge.c4655e6d.js";import{Q as F}from"./QTd.1d9c2ad9.js";import{Q as Z}from"./QPageSticky.f806e642.js";import{C as N}from"./ClosePopup.9c6bd328.js";import{u as ee}from"./useHelpers.a93c9c13.js";import{u as ae}from"./useSucursal.df29f51b.js";import{u as le}from"./useRolPermisos.7797157d.js";import"./QList.6f62353f.js";import"./format.4f078eda.js";import"./use-quasar.41afd37e.js";import"./axios.2393505a.js";const se={class:"q-ma-lg q-pt-md"},oe={class:"row q-col-gutter-lg"},te={class:"col-12"},re={key:0,class:"text-center row justify-center",style:{width:"100%"}},ie=m("label",{class:"q-mb-sm text-grey-7 text-h6"}," Listado de Sucursales ",-1),ne=[ie],ce=m("label",{class:"q-mr-sm row items-center"},[m("span",null,"Empresa: ")],-1),ue=m("div",{class:"full-width row flex-center text-lime-10 q-gutter-sm"},[m("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ")],-1),Se=M({__name:"IndexPage",setup(de){const P=[{name:"acciones",label:"acciones",align:"center"},{align:"center",label:"Sucursal",field:"nombre",name:"nombre"},{align:"center",label:"Direcci\xF3n",field:"direccion",name:"direccion"},{align:"center",label:"N\xB0 de establecimiento",field:"establecimiento",name:"esta"},{label:"Punto de emisi\xF3n",field:"punto_emision",align:"center",name:"p_v"},{label:"N\xB0 de factura",field:"secuencia_factura_produccion",align:"center",name:"sec"},{name:"estado",label:"Estado",align:"center"}];let{api:C,claim:h,cargarCompanies:V,listCompanies:z}=ae();const k=p(""),Q=p([]),w=p(!1),v=p(h.company.id),{mostrarNotify:$,confirmDelete:B,isDeleted:I}=ee(),{validarPermisos:g}=le(),y=async()=>{w.value=!0;try{const a=v.value;v.value="";let o={headers:{"company-id":a}};const{data:e}=await C.get("/sucursal",o);Q.value=e,v.value=a}catch(a){$("warning",a.response.data.message)}w.value=!1},q=async(a,o)=>{try{const{data:{msg:e}}=await C.patch(`/sucursal/${a}/${o}`);$("positive",e),y()}catch(e){console.log(e)}};G(I,(a,o)=>{a&&y()});const T=async a=>{try{B("Estas seguro de eliminar esta sucursal?",`/sucursal/${a}`)}catch(o){console.log(o)}};y(),V();const u=p("list"),E=p({rowsPerPage:10});return(a,o)=>(l(),f(b,null,[m("div",se,[m("div",oe,[m("div",te,[i(H,{flat:"",class:"shadow_custom"},{default:s(()=>[i(U,{"title-class":"text-grey-7 text-h6",rows:Q.value,loading:w.value,"hide-header":u.value==="grid",columns:P,"row-key":"name",grid:u.value==="grid",filter:k.value,pagination:E.value},{loading:s(()=>[i(R,{showing:"",color:"primary"})]),header:s(e=>[i(O,{props:e,style:{height:"60px"}},{default:s(()=>[(l(!0),f(b,null,J(e.cols,r=>(l(),t(L,{key:r.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:s(()=>[_(x(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-left":s(e=>[c(h).roles[0]!=="SUPER-ADMINISTRADOR"?(l(),f("div",re,ne)):n("",!0),c(h).roles[0]=="SUPER-ADMINISTRADOR"?(l(),f("div",{key:1,style:{display:"flex"},class:K([a.$q.screen.xs?"q-mb-md":""])},[ce,i(j,{outlined:"",dense:"",modelValue:v.value,"onUpdate:modelValue":[o[0]||(o[0]=r=>v.value=r),y],"emit-value":"","map-options":"",options:c(z)},null,8,["modelValue","options"])],2)):n("",!0)]),"top-right":s(e=>[!a.$q.screen.xs&&c(g)("crear.sucursal")?(l(),t(d,{key:0,onClick:o[1]||(o[1]=r=>a.$router.push({name:"Agregar Sucursal"})),outline:"",color:"primary",label:"Agregar Sucursal",class:"q-mr-xs"})):n("",!0),i(W,{style:X(a.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:k.value,"onUpdate:modelValue":o[2]||(o[2]=r=>k.value=r),placeholder:"Buscar..."},{append:s(()=>[i(Y,{name:"search"})]),_:1},8,["style","modelValue"]),u.value==="list"?(l(),t(d,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:s(()=>[A((l(),t(S,{disable:a.$q.platform.is.mobile},{default:s(()=>[_(x(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[N]])]),_:2},1032,["icon","onClick"])):n("",!0),e.inFullscreen?n("",!0):(l(),t(d,{key:2,flat:"",round:"",dense:"",icon:u.value==="grid"?"list":"grid_on",onClick:o[3]||(o[3]=r=>{u.value=u.value==="grid"?"list":"grid",a.separator=u.value==="grid"?"none":"horizontal"})},{default:s(()=>[A((l(),t(S,{disable:a.$q.platform.is.mobile},{default:s(()=>[_(x(u.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[N]])]),_:1},8,["icon"]))]),"body-cell-estado":s(e=>[i(F,{props:e},{default:s(()=>[e.row.isActive?(l(),t(D,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(l(),t(D,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":s(e=>[i(F,{props:e},{default:s(()=>[e.row.isActive?(l(),f(b,{key:0},[c(g)("editar.sucursal")?(l(),t(d,{key:0,round:"",color:"blue-grey",onClick:r=>a.$router.push({name:"Editar Sucursal",params:{sucursal_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):n("",!0),c(g)("inactivar.sucursal")?(l(),t(d,{key:1,round:"",color:"blue-grey",icon:"close",onClick:r=>q(e.row.id,!1),size:"10px"},null,8,["onClick"])):n("",!0)],64)):(l(),f(b,{key:1},[c(g)("activar.sucursal")?(l(),t(d,{key:0,round:"",color:"blue-grey",icon:"done",onClick:r=>q(e.row.id,!0),size:"10px"},null,8,["onClick"])):n("",!0),!e.row.estado&&c(g)("eliminar.sucursal")?(l(),t(d,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:r=>T(e.row.id),size:"10px"},null,8,["onClick"])):n("",!0)],64))]),_:2},1032,["props"])]),"no-data":s(({icon:e})=>[ue]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),a.$q.screen.xs&&c(g)("crear.sucursal")?(l(),t(Z,{key:0,position:"bottom-right",offset:[18,18]},{default:s(()=>[i(d,{round:"",color:"secondary",size:"lg",icon:"add",onClick:o[4]||(o[4]=e=>a.$router.push({name:"Agregar Sucursal"}))})]),_:1})):n("",!0)],64))}});export{Se as default};
