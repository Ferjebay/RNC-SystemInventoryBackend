import{r as W,n as y,z as le,aO as ne,am as te,as as re,p as N,m as se,b4 as ue,b8 as de,b5 as ce,b7 as me,b9 as fe,bo as pe,ba as G,b3 as ve,b6 as ge,ao as be,d as ye,v as Ve,o as I,a7 as T,g as h,ab as e,f,aQ as he,e as d,ac as U,Q as w,aU as Ce,bp as Fe,i as A,w as H,ad as L,aR as xe,h as J,a8 as Z,aP as _e}from"./index.349610b2.js";import{Q as qe}from"./QChip.970758e5.js";import{h as Se}from"./format.2bc25e5f.js";import{Q as ze}from"./QForm.e5a57626.js";import{u as je}from"./useEmpresa.6578c8bb.js";function Q(l,g,a,S){const u=[];return l.forEach(p=>{S(p)===!0?u.push(p):g.push({failedPropValidation:a,file:p})}),u}function E(l){l&&l.dataTransfer&&(l.dataTransfer.dropEffect="copy"),te(l)}const ke={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},we=["rejected"];function Ne({editable:l,dnd:g,getFileInput:a,addFilesToQueue:S}){const{props:u,emit:p,proxy:x}=le(),_=W(null),k=y(()=>u.accept!==void 0?u.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),$=y(()=>parseInt(u.maxFiles,10)),q=y(()=>parseInt(u.maxTotalSize,10));function z(t){if(l.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&ne(t);else{const C=a();C&&C!==t.target&&C.click(t)}}function m(t){l.value&&t&&S(null,t)}function i(t,C,R,P){let r=Array.from(C||t.target.files);const V=[],j=()=>{V.length!==0&&p("rejected",V)};if(u.accept!==void 0&&k.value.indexOf("*/")===-1&&(r=Q(r,V,"accept",s=>k.value.some(v=>s.type.toUpperCase().startsWith(v)||s.name.toUpperCase().endsWith(v))),r.length===0))return j();if(u.maxFileSize!==void 0){const s=parseInt(u.maxFileSize,10);if(r=Q(r,V,"max-file-size",v=>v.size<=s),r.length===0)return j()}if(u.multiple!==!0&&r.length!==0&&(r=[r[0]]),r.forEach(s=>{s.__key=s.webkitRelativePath+s.lastModified+s.name+s.size}),P===!0){const s=R.map(v=>v.__key);r=Q(r,V,"duplicate",v=>s.includes(v.__key)===!1)}if(r.length===0)return j();if(u.maxTotalSize!==void 0){let s=P===!0?R.reduce((v,B)=>v+B.size,0):0;if(r=Q(r,V,"max-total-size",v=>(s+=v.size,s<=q.value)),r.length===0)return j()}if(typeof u.filter=="function"){const s=u.filter(r);r=Q(r,V,"filter",v=>s.includes(v))}if(u.maxFiles!==void 0){let s=P===!0?R.length:0;if(r=Q(r,V,"max-files",()=>(s++,s<=$.value)),r.length===0)return j()}if(j(),r.length!==0)return r}function n(t){E(t),g.value!==!0&&(g.value=!0)}function c(t){te(t),(t.relatedTarget!==null||re.is.safari!==!0?t.relatedTarget!==_.value:document.elementsFromPoint(t.clientX,t.clientY).includes(_.value)===!1)===!0&&(g.value=!1)}function D(t){E(t);const C=t.dataTransfer.files;C.length!==0&&S(null,C),g.value=!1}function K(t){if(g.value===!0)return N("div",{ref:_,class:`q-${t}__dnd absolute-full`,onDragenter:E,onDragover:E,onDragleave:c,onDrop:D})}return Object.assign(x,{pickFiles:z,addFiles:m}),{pickFiles:z,addFiles:m,onDragover:n,onDragleave:c,processFiles:i,getDndNode:K,maxFilesNumber:$,maxTotalSizeNumber:q}}var ee=se({name:"QFile",inheritAttrs:!1,props:{...ue,...de,...ke,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...ce,...we],setup(l,{slots:g,emit:a,attrs:S}){const{proxy:u}=le(),p=me(),x=W(null),_=W(!1),k=fe(l),{pickFiles:$,onDragover:q,onDragleave:z,processFiles:m,getDndNode:i}=Ne({editable:p.editable,dnd:_,getFileInput:X,addFilesToQueue:Y}),n=pe(l),c=y(()=>Object(l.modelValue)===l.modelValue?"length"in l.modelValue?Array.from(l.modelValue):[l.modelValue]:[]),D=y(()=>G(c.value)),K=y(()=>c.value.map(o=>o.name).join(", ")),t=y(()=>Se(c.value.reduce((o,b)=>o+b.size,0))),C=y(()=>({totalSize:t.value,filesNumber:c.value.length,maxFiles:l.maxFiles})),R=y(()=>({tabindex:-1,type:"file",title:"",accept:l.accept,capture:l.capture,name:k.value,...S,id:p.targetUid.value,disabled:p.editable.value!==!0})),P=y(()=>"q-file q-field--auto-height"+(_.value===!0?" q-file--dnd":"")),r=y(()=>l.multiple===!0&&l.append===!0);function V(o){const b=c.value.slice();b.splice(o,1),s(b)}function j(o){const b=c.value.indexOf(o);b>-1&&V(b)}function s(o){a("update:modelValue",l.multiple===!0?o:o[0])}function v(o){o.keyCode===13&&be(o)}function B(o){(o.keyCode===13||o.keyCode===32)&&$(o)}function X(){return x.value}function Y(o,b){const F=m(o,b,c.value,r.value),M=X();M!=null&&(M.value=""),F!==void 0&&((l.multiple===!0?l.modelValue&&F.every(oe=>c.value.includes(oe)):l.modelValue===F[0])||s(r.value===!0?c.value.concat(F):F))}function O(){return[N("input",{class:[l.inputClass,"q-file__filler"],style:l.inputStyle})]}function ae(){if(g.file!==void 0)return c.value.length===0?O():c.value.map((b,F)=>g.file({index:F,file:b,ref:this}));if(g.selected!==void 0)return c.value.length===0?O():g.selected({files:c.value,ref:this});if(l.useChips===!0)return c.value.length===0?O():c.value.map((b,F)=>N(qe,{key:"file-"+F,removable:p.editable.value,dense:!0,textColor:l.color,tabindex:l.tabindex,onRemove:()=>{V(F)}},()=>N("span",{class:"ellipsis",textContent:b.name})));const o=l.displayValue!==void 0?l.displayValue:K.value;return o.length!==0?[N("div",{class:l.inputClass,style:l.inputStyle,textContent:o})]:O()}function ie(){const o={ref:x,...R.value,...n.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:Y};return l.multiple===!0&&(o.multiple=!0),N("input",o)}return Object.assign(p,{fieldClass:P,emitValue:s,hasValue:D,inputRef:x,innerValue:c,floatingLabel:y(()=>D.value===!0||G(l.displayValue)),computedCounter:y(()=>{if(l.counterLabel!==void 0)return l.counterLabel(C.value);const o=l.maxFiles;return`${c.value.length}${o!==void 0?" / "+o:""} (${t.value})`}),getControlChild:()=>i("file"),getControl:()=>{const o={ref:p.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:l.tabindex};return p.editable.value===!0&&Object.assign(o,{onDragover:q,onDragleave:z,onKeydown:v,onKeyup:B}),N("div",o,[ie()].concat(ae()))}}),Object.assign(u,{removeAtIndex:V,removeFile:j,getNativeElement:()=>x.value}),ve(u,"nativeEl",()=>x.value),ge(p)}});const $e={class:"row q-pt-sm q-gutter-lg justify-center"},Ue=d("label",null,"R.U.C",-1),Ae=d("label",null,"Raz\xF3n Social",-1),Qe={class:"col-xs-11 col-md-5"},Re=d("label",null,"Nombre Comercial:",-1),Pe={class:"col-xs-11 col-md-5"},De=d("label",null,"Direcci\xF3n:",-1),Oe={class:"col-xs-11 col-md-5"},Ie=d("label",null,"Email:",-1),Te=d("label",null,"Obligado Contabilidad:",-1),Ee={class:"col-xs-11 col-md-5"},Ke=d("label",null,"Celular:",-1),Be=d("label",null,"Clave Certificado:",-1),Me=d("label",null,"Cargar Certificado:",-1),Le=d("label",null,"Logo de la empresa:",-1),Je=ye({__name:"FormEmpresa",props:{edit:{type:Boolean}},setup(l){const g=l,{formEmpresa:a,loading:S,allowOnlyNumber:u,validateNumRuc:p,validateNumCelular:x,transformToUpperCase:_,onRejected:k,onSubmit:$,isPwd:q,isValid:z}=je();return Ve(()=>a.value.clave_certificado,(m,i)=>{z.value&&m!==i&&(z.value=!1)},{deep:!0}),(m,i)=>(I(),T(ze,{onSubmit:i[14]||(i[14]=n=>e($)(g.edit))},{default:h(()=>[f(_e,{class:"my-card"},{default:h(()=>[f(he,{class:"q-pt-lg"},{default:h(()=>[d("div",$e,[d("div",{class:U(["col-xs-11 col-md-5",[m.$q.screen.width>600||"q-mt-md"]])},[Ue,f(w,{type:m.$q.platform.is.mobile?"number":"text",modelValue:e(a).ruc,"onUpdate:modelValue":i[0]||(i[0]=n=>e(a).ruc=n),counter:"",maxlength:"13",rules:e(p),onKeyup:e(u),"lazy-rules":"",dense:"",filled:"",required:""},null,8,["type","modelValue","rules","onKeyup"])],2),d("div",{class:U(["col-xs-11 col-md-5",[m.$q.screen.width>600||"q-mt-xs"]])},[Ae,f(w,{modelValue:e(a).razon_social,"onUpdate:modelValue":i[1]||(i[1]=n=>e(a).razon_social=n),modelModifiers:{trim:!0},onKeyup:e(_),dense:"",filled:"",required:""},null,8,["modelValue","onKeyup"])],2),d("div",Qe,[Re,f(w,{modelValue:e(a).nombre_comercial,"onUpdate:modelValue":i[2]||(i[2]=n=>e(a).nombre_comercial=n),modelModifiers:{trim:!0},onKeyup:e(_),dense:"",filled:"",required:""},null,8,["modelValue","onKeyup"])]),d("div",Pe,[De,f(w,{modelValue:e(a).direccion_matriz,"onUpdate:modelValue":i[3]||(i[3]=n=>e(a).direccion_matriz=n),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),d("div",Oe,[Ie,f(w,{modelValue:e(a).email,"onUpdate:modelValue":i[4]||(i[4]=n=>e(a).email=n),modelModifiers:{trim:!0},type:"email",dense:"",filled:"",required:""},null,8,["modelValue"])]),d("div",{class:"col-xs-11 col-md-5",style:Ce(m.$q.screen.width<600||"position: relative; top: 12px;left: 24px;")},[Te,f(Fe,{color:"green",size:"lg",modelValue:e(a).obligado_contabilidad,"onUpdate:modelValue":i[5]||(i[5]=n=>e(a).obligado_contabilidad=n)},null,8,["modelValue"])],4),d("div",Ee,[Ke,f(w,{type:m.$q.platform.is.mobile?"number":"text",modelValue:e(a).telefono,"onUpdate:modelValue":i[6]||(i[6]=n=>e(a).telefono=n),counter:"",maxlength:"10",rules:e(x),onKeyup:e(u),"lazy-rules":"",dense:"",filled:"",required:""},null,8,["type","modelValue","rules","onKeyup"])]),d("div",{class:U(["col-xs-11 col-md-5",[m.$q.screen.width>600||"q-mt-xs"]])},[Be,f(w,{type:e(q)?"password":"text",filled:"",modelValue:e(a).clave_certificado,"onUpdate:modelValue":i[8]||(i[8]=n=>e(a).clave_certificado=n),modelModifiers:{trim:!0},dense:"",required:"","error-message":"La clave del certificado es incorrecta",error:e(z)},{append:h(()=>[f(A,{name:e(q)?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:i[7]||(i[7]=n=>q.value=!e(q))},null,8,["name"])]),prepend:h(()=>[f(A,{name:"key",color:"blue-grey-3"})]),_:1},8,["type","modelValue","error"])],2),d("div",{class:U(["col-xs-11 col-md-5",[m.$q.screen.width>600||"q-mt-sm"]])},[Me,f(ee,{dense:"",filled:"","bottom-slots":"",accept:".p12",onRejected:e(k),modelValue:e(a).archivo_certificado,"onUpdate:modelValue":i[10]||(i[10]=n=>e(a).archivo_certificado=n),label:e(a).archivo_certificado_old==null?"Cargar Certificado":e(a).archivo_certificado_old},{prepend:h(()=>[f(A,{name:"attach_file"})]),append:h(()=>[typeof e(a).archivo_certificado=="object"&&e(a).archivo_certificado!==null?(I(),T(A,{key:0,name:"close",onClick:i[9]||(i[9]=H(n=>e(a).archivo_certificado=null,["stop","prevent"])),class:"cursor-pointer"})):L("",!0)]),_:1},8,["onRejected","modelValue","label"])],2),d("div",{class:U(["col-xs-11 col-md-5",[m.$q.screen.width>600||"q-mt-sm"]])},[Le,f(ee,{dense:"",filled:"","bottom-slots":"",accept:".jpg, image/*",onRejected:e(k),modelValue:e(a).logo,"onUpdate:modelValue":i[12]||(i[12]=n=>e(a).logo=n),label:e(a).logo_old==null?"Cargar Logo":e(a).logo_old},{prepend:h(()=>[f(A,{name:"fa-solid fa-image"})]),append:h(()=>[typeof e(a).logo=="object"&&e(a).logo!==null?(I(),T(A,{key:0,name:"close",onClick:i[11]||(i[11]=H(n=>e(a).logo=null,["stop","prevent"])),class:"cursor-pointer"})):L("",!0)]),_:1},8,["onRejected","modelValue","label"])],2)])]),_:1}),f(xe,{class:U(["q-pb-md",[m.$q.screen.width<600?"justify-center q-ml-xl q-pt-none q-mb-md":"justify-between"]])},{default:h(()=>[m.$q.screen.width>600?(I(),T(J,{key:0,type:"submit",icon:"arrow_back",onClick:i[13]||(i[13]=n=>m.$router.push("/empresas")),outline:"",rounded:"",class:"q-ml-md",color:m.$q.dark.isActive?"blue-grey-2":"blue-grey-10"},{default:h(()=>[Z(" \xA0 Regresar ")]),_:1},8,["color"])):L("",!0),f(J,{type:"submit",icon:"save",loading:e(S),outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:h(()=>[Z(" \xA0 Guardar Cambios ")]),_:1},8,["loading"])]),_:1},8,["class"])]),_:1})]),_:1}))}});export{Je as _};
