import{Q as L,a as Q,b as U}from"./QTable.93809f26.js";import{Q as H,a as S}from"./QTooltip.4ff25d53.js";import{Q as j}from"./QSelect.2afc433b.js";import{d as G,r as m,v as R,o as l,c as g,e as d,f as r,g as t,aP as J,a7 as i,ad as n,ah as v,ag as K,ab as k,ac as M,h as u,Q as O,aU as W,i as _,N as z,a8 as w,a9 as x}from"./index.eef75245.js";import{Q as A}from"./QBadge.9fdb6a21.js";import{Q as X}from"./QPageSticky.92e7c3a2.js";import{C as F}from"./ClosePopup.2601f36e.js";import{api as N}from"./axios.2f3e7d32.js";import{u as Y}from"./useHelpers.582824f5.js";import{u as Z}from"./useSucursal.6c28516d.js";import"./QList.5c4d6332.js";import"./QItemLabel.8d9dffff.js";import"./QChip.78519a04.js";import"./format.2bc25e5f.js";import"./use-quasar.651ee3ac.js";const ee={class:"q-ma-lg q-pt-md"},ae={class:"row q-col-gutter-lg"},le={class:"col-12"},se={key:0,class:"text-center row justify-center",style:{width:"100%"}},te=d("label",{class:"q-mb-sm text-grey-7 text-h6"}," Listado de Sucursales ",-1),oe=[te],re=d("label",{class:"q-mr-sm row items-center"},[d("span",null,"Empresa: ")],-1),ie={class:"full-width row flex-center text-lime-10 q-gutter-sm"},ne=d("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),$e=G({__name:"IndexPage",setup(ce){const V=[{name:"acciones",label:"acciones",align:"center"},{align:"center",label:"Sucursal",field:"nombre",name:"nombre"},{align:"center",label:"Direcci\xF3n",field:"direccion",name:"direccion"},{align:"center",label:"N\xB0 de establecimiento",field:"establecimiento",name:"esta"},{label:"Punto de emisi\xF3n",field:"punto_emision",align:"center",name:"p_v"},{label:"N\xB0 de factura",field:"secuencia_factura_produccion",align:"center",name:"sec"},{name:"estado",label:"Estado",align:"center"}];let{claim:y,cargarCompanies:B,listCompanies:P}=Z();const p=m(""),C=m([]),b=m(!1),h=m(y.company.id),{mostrarNotify:$,confirmDelete:T,isDeleted:D}=Y(),f=async()=>{b.value=!0;try{let a={headers:{company_id:h.value,NotSetHeaderCompany:!0}};const{data:s}=await N.get("/sucursal",a);C.value=s}catch(a){$("warning",a.response.data.message)}b.value=!1},q=async(a,s)=>{try{const{data:{msg:e}}=await N.patch(`/sucursal/${a}/${s}`);$("positive",e),f()}catch(e){console.log(e)}};R(D,(a,s)=>{a&&f()});const E=async a=>{try{T("Estas seguro de eliminar esta sucursal?",`/sucursal/${a}`)}catch(s){console.log(s)}};f(),B();const c=m("list"),I=m({rowsPerPage:10});return(a,s)=>(l(),g(v,null,[d("div",ee,[d("div",ae,[d("div",le,[r(J,{flat:"",class:"shadow_custom"},{default:t(()=>[r(L,{"title-class":"text-grey-7 text-h6",rows:C.value,loading:b.value,"hide-header":c.value==="grid",columns:V,"row-key":"name",grid:c.value==="grid",filter:p.value,pagination:I.value},{header:t(e=>[r(H,{props:e,style:{height:"60px"}},{default:t(()=>[(l(!0),g(v,null,K(e.cols,o=>(l(),i(U,{key:o.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:t(()=>[w(x(o.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-left":t(e=>[k(y).roles[0]!=="Super-Administrador"?(l(),g("div",se,oe)):n("",!0),k(y).roles[0]=="Super-Administrador"?(l(),g("div",{key:1,style:{display:"flex"},class:M([a.$q.screen.xs?"q-mb-md":""])},[re,r(j,{outlined:"",dense:"",modelValue:h.value,"onUpdate:modelValue":[s[0]||(s[0]=o=>h.value=o),f],"emit-value":"","map-options":"",options:k(P)},null,8,["modelValue","options"])],2)):n("",!0)]),"top-right":t(e=>[a.$q.screen.xs?n("",!0):(l(),i(u,{key:0,onClick:s[1]||(s[1]=o=>a.$router.push({name:"Agregar Sucursal"})),outline:"",color:"primary",label:"Agregar Sucursal",class:"q-mr-xs"})),r(O,{style:W(a.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=o=>p.value=o),placeholder:"Buscar..."},{append:t(()=>[r(_,{name:"search"})]),_:1},8,["style","modelValue"]),c.value==="list"?(l(),i(u,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:t(()=>[z((l(),i(S,{disable:a.$q.platform.is.mobile},{default:t(()=>[w(x(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[F]])]),_:2},1032,["icon","onClick"])):n("",!0),e.inFullscreen?n("",!0):(l(),i(u,{key:2,flat:"",round:"",dense:"",icon:c.value==="grid"?"list":"grid_on",onClick:s[3]||(s[3]=o=>{c.value=c.value==="grid"?"list":"grid",a.separator=c.value==="grid"?"none":"horizontal"})},{default:t(()=>[z((l(),i(S,{disable:a.$q.platform.is.mobile},{default:t(()=>[w(x(c.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[F]])]),_:1},8,["icon"]))]),"body-cell-estado":t(e=>[r(Q,{props:e},{default:t(()=>[e.row.isActive?(l(),i(A,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(l(),i(A,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":t(e=>[r(Q,{props:e},{default:t(()=>[r(u,{round:"",color:"blue-grey",onClick:o=>a.$router.push({name:"Editar Sucursal",params:{sucursal_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"]),e.row.isActive?(l(),g(v,{key:0},[e.row.isActive?(l(),i(u,{key:0,round:"",color:"blue-grey",icon:"close",onClick:o=>q(e.row.id,!1),size:"10px"},null,8,["onClick"])):n("",!0)],64)):(l(),g(v,{key:1},[e.row.isActive?n("",!0):(l(),i(u,{key:0,round:"",color:"blue-grey",icon:"done",onClick:o=>q(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.estado?n("",!0):(l(),i(u,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:o=>E(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":t(({icon:e})=>[d("div",ie,[r(_,{size:"2em",name:"sentiment_dissatisfied"}),ne,r(_,{size:"2em",name:p.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),a.$q.screen.xs?(l(),i(X,{key:0,position:"bottom-right",offset:[18,18]},{default:t(()=>[r(u,{round:"",color:"secondary",size:"lg",icon:"add",onClick:s[4]||(s[4]=e=>a.$router.push({name:"Agregar Sucursal"}))})]),_:1})):n("",!0)],64))}});export{$e as default};
