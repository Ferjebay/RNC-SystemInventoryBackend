import{Q as J,a as Q,b as K}from"./QTable.ec89ebde.js";import{Q as M,a as F}from"./QTooltip.eed8b34b.js";import{d as I,o as l,ad as n,g as t,aP as L,f as a,e as g,ae as k,R as V,h as d,aQ as B,O as W,r as v,D as N,c as f,aj as u,ah as _,aS as p,aT as P,am as C,al as X,Q as Y,aU as Z,i as $,af as q}from"./index.d41bbc77.js";import{Q as S}from"./QBadge.05c368ae.js";import{Q as ee}from"./QPageSticky.b833ab6b.js";import{C as z}from"./ClosePopup.1e4fc19e.js";import{api as U}from"./axios.285a4291.js";import{u as te}from"./useHelpers.26f595d3.js";import{a as le,u as ae,_ as oe}from"./AddCliente.a5f47edb.js";import"./QList.fa60a52c.js";import"./QSelect.e2298bca.js";import"./QChip.3f015bda.js";import"./QItemLabel.3788c9ad.js";import"./format.2bc25e5f.js";import"./use-quasar.312cdeb8.js";import"./QForm.430f58c0.js";const ie={class:"text-h6 text-center"},se=I({__name:"EditCliente",setup(R){return(D,w)=>(l(),n(L,{style:{width:"710px !important","max-width":"fit-content"}},{default:t(()=>[a(B,null,{default:t(()=>[g("div",ie,[k(" Editar Cliente "),V(a(d,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[z]])])]),_:1}),a(W,{inset:""}),a(B,{class:"q-pt-none"},{default:t(()=>[a(le,{edit:!0})]),_:1})]),_:1}))}}),ne={class:"q-ma-lg q-pt-md"},re={class:"row q-col-gutter-lg"},de={class:"col-12"},ce={key:0},ue={key:1},me={key:2},fe={class:"full-width row flex-center text-lime-10 q-gutter-sm"},ge=g("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),Te=I({__name:"IndexPage",setup(R){const D=[{name:"acciones",label:"acciones",align:"center"},{name:"nombre",align:"center",label:"Cliente",field:"nombres",sortable:!0},{name:"tipo_documento",align:"center",label:"Tipo de Documento",field:"tipo_documento"},{name:"numero_documento",align:"center",label:"Numero de Documento",field:"numero_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Celular",field:"celular",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{actualizarLista:w,modalAgregarCliente:s,modalEditarCliente:m,formCliente:h}=ae();const y=v(""),T=v([]),x=v(!1),{mostrarNotify:A,confirmDelete:j,isDeleted:G}=te();N(w,(o,i)=>{o&&b()});const b=async()=>{x.value=!0;try{const{data:o}=await U.get("/customers");T.value=o,w.value=!1}catch(o){A("warning",o.response.data.message)}x.value=!1},E=async(o,i)=>{try{const{data:{msg:e}}=await U.patch(`/customers/${o}/${i}`);A("positive",e),b()}catch(e){console.log(e)}};N(G,(o,i)=>{o&&b()});const H=async o=>{try{j("Estas seguro de eliminar este cliente?",`/customers/${o}`)}catch(i){console.log(i)}};b();const c=v("list"),O=v({rowsPerPage:10});return(o,i)=>(l(),f(C,null,[g("div",ne,[g("div",re,[g("div",de,[a(L,{flat:"",class:"shadow_custom"},{default:t(()=>[a(J,{"title-class":"text-grey-7 text-h6",title:"Listado de Clientes",rows:T.value,loading:x.value,"hide-header":c.value==="grid",columns:D,"row-key":"name",grid:c.value==="grid",filter:y.value,pagination:O.value},{header:t(e=>[a(M,{props:e,style:{height:"60px"}},{default:t(()=>[(l(!0),f(C,null,X(e.cols,r=>(l(),n(K,{key:r.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:t(()=>[k(q(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":t(e=>[o.$q.screen.xs?u("",!0):(l(),n(d,{key:0,onClick:i[0]||(i[0]=r=>p(s)?s.value=!_(s):s=!_(s)),outline:"",color:"primary",label:"Agregar Cliente",class:"q-mr-xs"})),a(Y,{style:Z(o.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:y.value,"onUpdate:modelValue":i[1]||(i[1]=r=>y.value=r),placeholder:"Buscar..."},{append:t(()=>[a($,{name:"search"})]),_:1},8,["style","modelValue"]),c.value==="list"?(l(),n(d,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:t(()=>[V((l(),n(F,{disable:o.$q.platform.is.mobile},{default:t(()=>[k(q(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[z]])]),_:2},1032,["icon","onClick"])):u("",!0),e.inFullscreen?u("",!0):(l(),n(d,{key:2,flat:"",round:"",dense:"",icon:c.value==="grid"?"list":"grid_on",onClick:i[2]||(i[2]=r=>{c.value=c.value==="grid"?"list":"grid",o.separator=c.value==="grid"?"none":"horizontal"})},{default:t(()=>[V((l(),n(F,{disable:o.$q.platform.is.mobile},{default:t(()=>[k(q(c.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[z]])]),_:1},8,["icon"]))]),"body-cell-tipo_documento":t(e=>[a(Q,{props:e},{default:t(()=>[g("div",null,[e.row.tipo_documento==4?(l(),f("label",ce,"RUC")):e.row.tipo_documento==5?(l(),f("label",ue,"Cedula")):(l(),f("label",me,"Pasaporte"))])]),_:2},1032,["props"])]),"body-cell-estado":t(e=>[a(Q,{props:e},{default:t(()=>[e.row.isActive?(l(),n(S,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(l(),n(S,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":t(e=>[a(Q,{props:e},{default:t(()=>[e.row.isActive?(l(),n(d,{key:0,round:"",color:"blue-grey",onClick:r=>(p(h)?h.value={...e.row}:h={...e.row},p(m)?m.value=!0:m=!0),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):u("",!0),e.row.isActive?(l(),f(C,{key:1},[e.row.isActive?(l(),n(d,{key:0,round:"",color:"blue-grey",icon:"close",onClick:r=>E(e.row.id,!1),size:"10px"},null,8,["onClick"])):u("",!0)],64)):(l(),f(C,{key:2},[e.row.isActive?u("",!0):(l(),n(d,{key:0,round:"",color:"blue-grey",icon:"done",onClick:r=>E(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.estado?u("",!0):(l(),n(d,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:r=>H(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":t(({icon:e})=>[g("div",fe,[a($,{size:"2em",name:"sentiment_dissatisfied"}),ge,a($,{size:"2em",name:y.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),o.$q.screen.xs?(l(),n(ee,{key:0,position:"bottom-right",offset:[18,18]},{default:t(()=>[a(d,{round:"",color:"secondary",size:"lg",icon:"add",onClick:i[3]||(i[3]=e=>p(s)?s.value=!_(s):s=!_(s))})]),_:1})):u("",!0),a(P,{modelValue:_(s),"onUpdate:modelValue":i[4]||(i[4]=e=>p(s)?s.value=e:s=e)},{default:t(()=>[a(oe)]),_:1},8,["modelValue"]),a(P,{modelValue:_(m),"onUpdate:modelValue":i[5]||(i[5]=e=>p(m)?m.value=e:m=e)},{default:t(()=>[a(se)]),_:1},8,["modelValue"])],64))}});export{Te as default};
