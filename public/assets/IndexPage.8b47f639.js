import{Q as I}from"./QInnerLoading.b27f3add.js";import{Q as D,a as C,b as S}from"./QTable.5e1b9d2b.js";import{Q as L,a as x}from"./QTooltip.cb8ad5b0.js";import{d as R,r as g,v as O,o,c as f,e as p,f as s,g as a,aU as U,ad as u,a9 as t,af as d,aj as b,ai as j,h as c,Q as G,bc as H,i as J,O as q,aa as v,ab as y}from"./index.7d425779.js";import{Q as E}from"./QBadge.62a39ea3.js";import{Q as K}from"./QPageSticky.153b5d9f.js";import{C as z}from"./ClosePopup.0ab247b9.js";import{u as M}from"./useHelpers.67eef492.js";import{u as W}from"./useEmpresa.d218af86.js";import{u as X}from"./useRolPermisos.863422be.js";import"./QList.e0b3940a.js";import"./QSelect.c5f6f348.js";import"./format.cbd76080.js";import"./use-quasar.0aeb1fcd.js";import"./axios.0b68fbb1.js";import"./date.1f3385bf.js";const Y={class:"q-ma-lg q-pt-md"},Z={class:"row q-col-gutter-lg"},ee={class:"col-12"},ae=p("div",{class:"full-width row flex-center text-lime-10 q-gutter-sm"},[p("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ")],-1),ke=R({__name:"IndexPage",setup(le){const F=[{name:"acciones",label:"Acciones",align:"center"},{label:"R.U.C",field:"ruc",align:"left",name:"b"},{label:"Nombre Comercial",field:"nombre_comercial",align:"left",name:"c"},{label:"Raz\xF3n Social",field:"razon_social",align:"left",name:"d"},{label:"Telefono",field:"telefono",align:"center",name:"e"},{label:"Email",field:"email",name:"email",align:"center"},{label:"Obligado Contabilidad",name:"obligadoContabilidad",align:"center"},{label:"Estado",name:"estado",align:"center"}];let{api:_}=W();const{validarPermisos:m}=X(),k=g(""),Q=g([]),h=g(!1),{claim:N,mostrarNotify:T,confirmDelete:A,isDeleted:B}=M(),w=async()=>{h.value=!0;let l={company_id:N.company.id};const{data:i}=await _.get("/companies",{headers:l});Q.value=i,h.value=!1},$=async(l,i)=>{try{const{data:{msg:e}}=await _.patch(`/companies/${l}/${i}`);T("positive",e),w()}catch(e){console.log(e)}};O(B,(l,i)=>{l&&w()});const P=async l=>{A("Estas seguro de eliminar esta empresa?",`/companies/${l}`)};w();const n=g("list"),V=g({rowsPerPage:10});return(l,i)=>(o(),f(b,null,[p("div",Y,[p("div",Z,[p("div",ee,[s(U,{flat:"",class:"shadow_custom"},{default:a(()=>[s(D,{"title-class":"text-grey-7 text-h6",title:"Listado de Empresas",rows:Q.value,loading:h.value,"hide-header":n.value==="grid",columns:F,"row-key":"name",grid:n.value==="grid",filter:k.value,pagination:V.value},{loading:a(()=>[s(I,{showing:"",color:"primary"})]),header:a(e=>[s(L,{props:e,style:{height:"60px"}},{default:a(()=>[(o(!0),f(b,null,j(e.cols,r=>(o(),t(S,{key:r.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:a(()=>[v(y(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":a(e=>[!l.$q.screen.xs&&u(m)("crear.empresa")?(o(),t(c,{key:0,onClick:i[0]||(i[0]=r=>l.$router.push({name:"Agregar Empresa"})),outline:"",color:"primary",label:"Agregar Empresa",class:"q-mr-xs"})):d("",!0),s(G,{style:H(l.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:k.value,"onUpdate:modelValue":i[1]||(i[1]=r=>k.value=r),placeholder:"Buscar..."},{append:a(()=>[s(J,{name:"search"})]),_:1},8,["style","modelValue"]),n.value==="list"?(o(),t(c,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:a(()=>[q((o(),t(x,{disable:l.$q.platform.is.mobile},{default:a(()=>[v(y(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[z]])]),_:2},1032,["icon","onClick"])):d("",!0),e.inFullscreen?d("",!0):(o(),t(c,{key:2,flat:"",round:"",dense:"",icon:n.value==="grid"?"list":"grid_on",onClick:i[2]||(i[2]=r=>{n.value=n.value==="grid"?"list":"grid",l.separator=n.value==="grid"?"none":"horizontal"})},{default:a(()=>[q((o(),t(x,{disable:l.$q.platform.is.mobile},{default:a(()=>[v(y(n.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[z]])]),_:1},8,["icon"]))]),"body-cell-obligadoContabilidad":a(e=>[s(C,{props:e},{default:a(()=>[v(y(e.row.obligado_contabilidad?"SI":"NO"),1)]),_:2},1032,["props"])]),"body-cell-estado":a(e=>[s(C,{props:e},{default:a(()=>[e.row.isActive?(o(),t(E,{key:0,outline:"",color:"positive",label:"Activo",ss:"q-pa-sm"})):(o(),t(E,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":a(e=>[s(C,{props:e},{default:a(()=>[e.row.isActive?(o(),f(b,{key:0},[u(m)("editar.empresa")?(o(),t(c,{key:0,round:"",color:"blue-grey",onClick:r=>l.$router.push({name:"Editar Empresa",params:{empresa_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):d("",!0),u(m)("inactivar.empresa")?(o(),t(c,{key:1,round:"",color:"blue-grey",icon:"close",onClick:r=>$(e.row.id,!1),size:"10px"},null,8,["onClick"])):d("",!0)],64)):(o(),f(b,{key:1},[u(m)("activar.empresa")?(o(),t(c,{key:0,round:"",color:"blue-grey",icon:"done",onClick:r=>$(e.row.id,!0),size:"10px"},null,8,["onClick"])):d("",!0),!e.row.estado&&u(m)("eliminar.empresa")?(o(),t(c,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:r=>P(e.row.id),size:"10px"},null,8,["onClick"])):d("",!0)],64))]),_:2},1032,["props"])]),"no-data":a(({icon:e})=>[ae]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),l.$q.screen.xs&&u(m)("crear.empresa")?(o(),t(K,{key:0,position:"bottom-right",offset:[18,18]},{default:a(()=>[s(c,{round:"",color:"secondary",size:"lg",icon:"add",onClick:i[3]||(i[3]=e=>l.$router.push({name:"Agregar Empresa"}))})]),_:1})):d("",!0)],64))}});export{ke as default};
