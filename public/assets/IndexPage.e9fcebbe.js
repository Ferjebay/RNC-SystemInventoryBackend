import{Q as M,a as S,b as R}from"./QTable.ec89ebde.js";import{Q as U,a as z}from"./QTooltip.eed8b34b.js";import{Q as j}from"./QSelect.e2298bca.js";import{d as H,r as g,D as L,o as a,c as m,e as u,f as r,g as s,aP as G,ad as i,aj as n,am as y,al as J,ah as b,ai as K,aS as O,h as c,Q as W,aU as X,i as _,R as A,ae as k,af as w}from"./index.d41bbc77.js";import{Q as I}from"./QBadge.05c368ae.js";import{Q as Y}from"./QPageSticky.b833ab6b.js";import{C as V}from"./ClosePopup.1e4fc19e.js";import{api as N}from"./axios.285a4291.js";import{u as Z}from"./useHelpers.26f595d3.js";import{u as ee}from"./useInternet.6c75d83b.js";import"./QList.fa60a52c.js";import"./QItemLabel.3788c9ad.js";import"./QChip.3f015bda.js";import"./format.2bc25e5f.js";import"./use-quasar.312cdeb8.js";const te={class:"q-ma-lg q-pt-md"},ae={class:"row q-col-gutter-lg"},le={class:"col-12"},se={key:0,class:"text-center row justify-center",style:{width:"100%"}},oe=u("label",{class:"q-mb-sm text-grey-7 text-h6"}," Servicios de Internet ",-1),ie=[oe],re=u("label",{class:"q-mr-sm row items-center"},[u("span",null,"Empresa: ")],-1),ne={class:"full-width row flex-center text-lime-10 q-gutter-sm"},de=u("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),xe=H({__name:"IndexPage",setup(ce){const F=[{name:"acciones",label:"acciones",align:"center"},{align:"center",label:"Nombre",field:"nombre_plan",name:"nombre_plan"},{align:"center",label:"Descargar Mbps",field:"descarga_Mbps",name:"descarga_Mbps"},{align:"center",label:"Subida Mbps",field:"subida_Mbps",name:"subida_Mbps"},{align:"center",label:"Precio",field:"precio",name:"precio_plan"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{claim:C,formRouter:ue,cargarCompanies:B,listCompanies:$,selectCompany:p}=ee();const{mostrarNotify:q,confirmDelete:D,isDeleted:P}=Z(),f=g(""),Q=g([]),h=g(!1),v=async()=>{h.value=!0;try{$.value.length==0&&await B();let t={headers:{company_id:p.value,NotSetHeaderCompany:!0}};const{data:l}=await N.get("/internet",t);l.forEach(e=>{e.precio=`$${e.precio_plan}`,e.estado=`${e.isActive?"Activo":"Inactivo"}`}),Q.value=l}catch(t){q("warning",t.response.data.message)}h.value=!1},x=async(t,l)=>{try{const{data:{msg:e}}=await N.patch(`/internet/${t}/${l}`);q("positive",e),v()}catch(e){console.log(e)}};L(P,(t,l)=>{t&&v()});const T=async t=>{try{D("Estas seguro de eliminar este servicio de internet?",`/internet/${t}`)}catch(l){console.log(l)}};v();const d=g("list"),E=g({rowsPerPage:10});return(t,l)=>(a(),m(y,null,[u("div",te,[u("div",ae,[u("div",le,[r(G,{flat:"",class:"shadow_custom"},{default:s(()=>[r(M,{"title-class":"text-grey-7 text-h6",title:"Servicios de Internet",rows:Q.value,loading:h.value,"hide-header":d.value==="grid",columns:F,"row-key":"name",grid:d.value==="grid",filter:f.value,pagination:E.value},{header:s(e=>[r(U,{props:e,style:{height:"60px"}},{default:s(()=>[(a(!0),m(y,null,J(e.cols,o=>(a(),i(R,{key:o.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:s(()=>[k(w(o.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-left":s(e=>[b(C).roles[0]!=="Super-Administrador"?(a(),m("div",se,ie)):n("",!0),b(C).roles[0]=="Super-Administrador"?(a(),m("div",{key:1,style:{display:"flex"},class:K([t.$q.screen.xs?"q-mb-md":""])},[re,r(j,{outlined:"",dense:"",modelValue:b(p),"onUpdate:modelValue":[l[0]||(l[0]=o=>O(p)?p.value=o:p=o),v],"emit-value":"","map-options":"",options:b($)},null,8,["modelValue","options"])],2)):n("",!0)]),"top-right":s(e=>[t.$q.screen.xs?n("",!0):(a(),i(c,{key:0,onClick:l[1]||(l[1]=o=>t.$router.push({name:"internet.add"})),outline:"",color:"primary",label:"Nuevo",class:"q-mr-xs"})),r(W,{style:X(t.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=o=>f.value=o),placeholder:"Buscar..."},{append:s(()=>[r(_,{name:"search"})]),_:1},8,["style","modelValue"]),d.value==="list"?(a(),i(c,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:s(()=>[A((a(),i(z,{disable:t.$q.platform.is.mobile},{default:s(()=>[k(w(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[V]])]),_:2},1032,["icon","onClick"])):n("",!0),e.inFullscreen?n("",!0):(a(),i(c,{key:2,flat:"",round:"",dense:"",icon:d.value==="grid"?"list":"grid_on",onClick:l[3]||(l[3]=o=>{d.value=d.value==="grid"?"list":"grid",t.separator=d.value==="grid"?"none":"horizontal"})},{default:s(()=>[A((a(),i(z,{disable:t.$q.platform.is.mobile},{default:s(()=>[k(w(d.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[V]])]),_:1},8,["icon"]))]),"body-cell-estado":s(e=>[r(S,{props:e},{default:s(()=>[e.row.isActive?(a(),i(I,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(a(),i(I,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":s(e=>[r(S,{props:e},{default:s(()=>[e.row.isActive?(a(),i(c,{key:0,round:"",color:"blue-grey",onClick:o=>t.$router.push({name:"internet.edit",params:{id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):n("",!0),e.row.isActive?(a(),m(y,{key:1},[e.row.isActive?(a(),i(c,{key:0,round:"",color:"blue-grey",icon:"close",onClick:o=>x(e.row.id,!1),size:"10px"},null,8,["onClick"])):n("",!0)],64)):(a(),m(y,{key:2},[e.row.isActive?n("",!0):(a(),i(c,{key:0,round:"",color:"blue-grey",icon:"done",onClick:o=>x(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.isActive?n("",!0):(a(),i(c,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:o=>T(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":s(({icon:e})=>[u("div",ne,[r(_,{size:"2em",name:"sentiment_dissatisfied"}),de,r(_,{size:"2em",name:f.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),t.$q.screen.xs?(a(),i(Y,{key:0,position:"bottom-right",offset:[18,18]},{default:s(()=>[r(c,{round:"",color:"secondary",size:"lg",icon:"add",onClick:l[4]||(l[4]=e=>t.$router.push({name:"internet.add"}))})]),_:1})):n("",!0)],64))}});export{xe as default};
