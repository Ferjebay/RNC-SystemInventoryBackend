import{api as u}from"./axios.f92fb9a5.js";import{u as h}from"./useHelpers.eb8fd38c.js";import{r as i}from"./index.c45ffa3b.js";const t=i(!1),l=i([]),d=i(""),s=i({id:"",nombre:"",coordenadas:"",ubicacion:"",puertos:"",detalles:"",company_id:""}),o=i({nombre:{message:"",isValid:!0},coordenadas:{message:"",isValid:!0},ubicacion:{message:"",isValid:!0},puertos:{message:"",isValid:!0},detalles:{message:"",isValid:!0},company_id:{message:"",isValid:!0}}),_=async()=>{l.value=[];const{data:n}=await u.get("/companies/true");n.forEach(r=>{l.value.push({label:r.nombre_comercial,value:r.id})}),d.value=l.value[0].value},N=n=>{const{mostrarNotify:r,claim:c,router:p,route:v}=h(),m=["nombre","coordenadas","ubicacion","puertos"],f=()=>{s.value={id:"",nombre:"",coordenadas:"",ubicacion:"",puertos:"",detalles:"",company_id:""}},g=()=>{m.push("company_id"),m.forEach(e=>{o.value[e].isValid=!0})},b=()=>{let e=!1;return m.forEach(a=>{(s.value[a].length==0||s.value[a]==0)&&(o.value[a].message="Debes completar este campo",o.value[a].isValid=!1,e=!0)}),!n&&s.value.company_id.length==0&&c.roles[0]=="Super-Administrador"&&(o.value.company_id.message="Debes elegir una empresa",o.value.company_id.isValid=!1,e=!0),e},y=e=>new Promise(a=>setTimeout(a,e));return{api:u,claim:c,formNap:s,loading:t,limpiarFormulario:f,listCompanies:l,selectCompany:d,validaciones:o,cargarCompanies:_,quitarErrores:g,route:v,onSubmit:async e=>{if(!b())try{t.value=!0;let a={headers:{company_id:s.value.company_id,NotSetHeaderCompany:c.roles[0]=="Super-Administrador"}};e?await u.patch(`/caja-nap/${s.value.id}`,s.value):await u.post("/caja-nap",s.value,a),e&&await y(500),r("positive",`Router ${e?"editado":"agregado"} exitosamente`),t.value=!1,p.push({name:"cNap.index"})}catch(a){t.value=!1,r("warning",a.response.data.message)}}}};export{N as u};
