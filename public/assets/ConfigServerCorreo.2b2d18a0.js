import{d as j,r as n,o as k,c as I,e as t,f as s,g as r,aN as y,aR as E,ak as U,aO as v,ag as i,Q as u,i as w,aP as x,h as f,ac as h,O as N}from"./index.f22722bd.js";import{Q as T}from"./QForm.fac76f4a.js";import{C as P}from"./ClosePopup.fd71a8b2.js";import{api as q}from"./axios.08aaed9e.js";import{u as A}from"./useHelpers.338f1731.js";import"./use-quasar.a4e78766.js";const B={class:"q-ma-lg q-pt-md"},D={class:"row q-col-gutter-lg"},F={class:"col-xs-12"},M=t("div",{class:"text-h6"},"Datos del servidor de correo",-1),S={class:"row q-pt-md"},O={class:"col-xs-12 col-md-12"},H={class:"row"},z=t("label",{for:""},"Host/servidor:",-1),G=[z],K=t("label",{for:""},"Puerto:",-1),R=[K],J=t("label",{for:""},"Usuario/Correo:",-1),L=[J],W=t("label",{for:""},"Contrase\xF1a:",-1),X=[W],Y=t("div",{class:"text-h6"},"Correo del cliente",-1),ie=j({__name:"ConfigServerCorreo",setup(Z){const g=n(!1),m=n(!1),c=n(!0),d=n(!1),{mostrarNotify:p}=A(),a=n({host:"",usuario:"",puerto:0,password:"",email_client:""}),C=()=>{a.value.puerto=a.value.puerto.replace(/\D/g,"")},_=async()=>{const{data:e}=await q.get("/email");a.value={...e[0]}},V=async()=>{try{m.value=!0;const{data:e}=await q.post("/email/testing",a.value);p("positive",e),m.value=!1,d.value=!1}catch(e){console.log(e);let l="";m.value=!1,e.response.data.response?l=e.response.data.response:l=`${e.response.data.code} - ${e.response.data.command} `,p("negative",l),d.value=!1}},b=async()=>{try{g.value=!0;const{id:e,puerto:l,created_at:o,updated_at:ee,...$}=a.value,{data:Q}=await q.patch(`/email/${e}`,{...$,puerto:parseInt(l)});p("positive",Q.msg),g.value=!1,_()}catch(e){g.value=!1,p("warning",e.response.data.message)}};return _(),(e,l)=>(k(),I(U,null,[t("div",B,[t("div",D,[t("div",F,[s(y,{class:"my-card"},{default:r(()=>[s(v,{class:i(["text-white q-py-sm text-center",[e.$q.dark.isActive?"":"bg-blue-grey-10"]])},{default:r(()=>[M]),_:1},8,["class"]),s(v,{class:"q-pt-none"},{default:r(()=>[t("div",S,[t("div",O,[t("div",H,[t("div",{class:i(["col-xs-11 col-md-2 flex items-center",[e.$q.screen.width<1022?"justify-center q-mt-lg":"justify-end"]])},G,2),t("div",{class:i(["col-xs-11 col-md-3 q-ml-md",[e.$q.screen.width<1022?"q-mt-sm":"q-mt-lg"]])},[s(u,{modelValue:a.value.host,"onUpdate:modelValue":l[0]||(l[0]=o=>a.value.host=o),modelModifiers:{trim:!0},"input-class":"resaltarTextoInput",dense:"",outlined:"",required:""},null,8,["modelValue"])],2),t("div",{class:i(["col-xs-11 col-md-2 flex items-center q-mt-lg",[e.$q.screen.width<1022?"justify-center":"justify-end"]])},R,2),t("div",{class:i(["col-xs-11 col-md-3 q-ml-md",[e.$q.screen.width<1022?"q-mt-sm":"q-mt-lg"]])},[s(u,{modelValue:a.value.puerto,"onUpdate:modelValue":l[1]||(l[1]=o=>a.value.puerto=o),modelModifiers:{trim:!0},"input-class":"resaltarTextoInput",onKeyup:C,dense:"",outlined:"",required:""},null,8,["modelValue"])],2),t("div",{class:i(["col-xs-11 col-md-2 flex items-center q-mt-lg",[e.$q.screen.width<1022?"justify-center":"justify-end"]])},L,2),t("div",{class:i(["col-xs-11 col-md-3 q-ml-md",[e.$q.screen.width<1022?"q-mt-sm":"q-mt-lg"]])},[s(u,{modelValue:a.value.usuario,"onUpdate:modelValue":l[2]||(l[2]=o=>a.value.usuario=o),modelModifiers:{trim:!0},"input-class":"resaltarTextoInput",dense:"",outlined:"",required:""},null,8,["modelValue"])],2),t("div",{class:i(["col-xs-11 col-md-2 flex items-center q-mt-lg",[e.$q.screen.width<1022?"justify-center":"justify-end"]])},X,2),t("div",{class:i(["col-xs-11 col-md-3 q-ml-md",[e.$q.screen.width<1022?"q-mt-sm":"q-mt-lg"]])},[s(u,{"input-class":"resaltarTextoInput",type:c.value?"password":"text","label-color":"blue-grey-3",outlined:"",dense:"",modelValue:a.value.password,"onUpdate:modelValue":l[4]||(l[4]=o=>a.value.password=o),modelModifiers:{trim:!0},required:""},{append:r(()=>[s(w,{name:c.value?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:l[3]||(l[3]=o=>c.value=!c.value)},null,8,["name"])]),prepend:r(()=>[s(w,{name:"key"})]),_:1},8,["type","modelValue"])],2)])])])]),_:1}),s(x,{class:"justify-center q-pb-lg q-pt-lg"},{default:r(()=>[s(f,{onClick:l[5]||(l[5]=o=>d.value=!d.value),icon:"send",outline:"",rounded:"",class:"q-mr-lg",color:"secondary"},{default:r(()=>[h(" \xA0 Probar Configuraci\xF3n ")]),_:1}),s(f,{onClick:b,icon:"mail",outline:"",rounded:"",class:"q-mr-lg",color:"secondary"},{default:r(()=>[h(" \xA0 Guardar Cambios ")]),_:1})]),_:1})]),_:1})])])]),s(E,{modelValue:d.value,"onUpdate:modelValue":l[7]||(l[7]=o=>d.value=o)},{default:r(()=>[s(y,{style:{"min-width":"350px"}},{default:r(()=>[s(v,null,{default:r(()=>[Y]),_:1}),s(T,{onSubmit:V},{default:r(()=>[s(v,{class:"q-pt-none"},{default:r(()=>[s(u,{type:"email",dense:"",modelValue:a.value.email_client,"onUpdate:modelValue":l[6]||(l[6]=o=>a.value.email_client=o),autofocus:"",required:""},null,8,["modelValue"])]),_:1}),s(x,{align:"right",class:"text-primary"},{default:r(()=>[N(s(f,{flat:"",label:"Cancelar"},null,512),[[P]]),s(f,{type:"submit",loading:m.value,flat:"",label:"Enviar"},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{ie as default};
