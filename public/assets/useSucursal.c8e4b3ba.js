import{u as m}from"./useHelpers.56598498.js";import{r as n}from"./index.88a4758e.js";const c=n(!1),i=n([]),e=n({nombre:"",direccion:"",establecimiento:0,punto_emision:0,secuencia_factura_produccion:0,secuencia_factura_pruebas:0,secuencia_nota_credito_produccion:0,secuencia_nota_credito_pruebas:0,secuencia_retencion_produccion:0,secuencia_retencion_pruebas:0,ambiente:"PRUEBA",company_id:""}),f=()=>{const{api:a,mostrarNotify:r,claim:s,router:t,route:l}=m();return{api:a,claim:s,formSucursal:e,loading:c,route:l,limpiarFormulario:()=>{e.value.nombre="",e.value.direccion="",e.value.establecimiento=1,e.value.punto_emision=1,e.value.secuencia_factura_produccion=1,e.value.secuencia_factura_pruebas=1,e.value.secuencia_nota_credito_produccion=1,e.value.secuencia_nota_credito_pruebas=1},cargarCompanies:async()=>{i.value=[];const{data:o}=await a.get("/companies/true");o.forEach(u=>{i.value.push({label:u.nombre_comercial,value:u.id})}),e.value.company_id=s.company.id},listCompanies:i,onSubmit:async o=>{if(e.value.establecimiento<=0||e.value.punto_emision<=0||e.value.secuencia_factura_produccion<=0)return r("warning","Los valores deben ser mayor o igual a 1");try{c.value=!0,e.value.nombre=e.value.nombre.toUpperCase(),o?await a.patch("/sucursal/"+e.value.id,e.value):await a.post("/sucursal",e.value),r("positive",`Sucursal ${o?"editado":"agregado"} exitosamente`),c.value=!1,t.push({name:"Ver Sucursales"})}catch(u){r("warning",u.response.data.message),c.value=!1}}}};export{f as u};
