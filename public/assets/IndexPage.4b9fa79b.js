import{Q as V,a as q,b as E}from"./QTable.1564a250.js";import{Q as I,a as A}from"./QTooltip.3197add4.js";import{d as D,r as u,v as L,o,c as p,e as m,f as i,g as r,aP as H,ab as v,a7 as l,ad as d,ah as y,ag as U,h as c,Q as G,aU as j,i as k,N as x,a8 as w,a9 as _}from"./index.e2604f41.js";import{Q as z}from"./QBadge.62804750.js";import{Q as J}from"./QPageSticky.57089bda.js";import{C as F}from"./ClosePopup.a0fb7464.js";import{a as N}from"./axios.dafdfce6.js";import{u as K}from"./useHelpers.d8fdd9b9.js";import{u as M}from"./useRouter.f4675551.js";import"./QList.ead62a8b.js";import"./QSelect.2aac5f58.js";import"./QChip.9c1ba2ae.js";import"./QItemLabel.a39057c6.js";import"./format.2bc25e5f.js";import"./use-quasar.4e0c8a9c.js";const O={class:"q-ma-lg q-pt-md"},W={class:"row q-col-gutter-lg"},X={class:"col-12"},Y={class:"full-width row flex-center text-lime-10 q-gutter-sm"},Z=m("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),ye=D({__name:"IndexPage",setup(ee){const R=[{name:"acciones",label:"acciones",align:"center"},{align:"center",label:"Nombre Router",field:"nombre",name:"nombre"},{align:"center",label:"IP/Host",field:"ip_host",name:"ip_host"},{align:"center",label:"Empresa",field:"empresa_name",name:"empresa_name"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{claim:g,formRouter:te}=M();const f=u(""),C=u([]),b=u(!1),{mostrarNotify:$,confirmDelete:S,isDeleted:B}=K(),h=async()=>{b.value=!0;try{const{data:t}=await N.get("/router");t.forEach(a=>{a.empresa_name=a.company_id.nombre_comercial,a.estado=a.isActive?"Activo":"Inactivo"}),C.value=t}catch(t){$("warning",t.response.data.message)}b.value=!1},Q=async(t,a)=>{try{const{data:{msg:e}}=await N.patch(`/router/${t}/${a}`);$("positive",e),h()}catch(e){console.log(e)}};L(B,(t,a)=>{t&&h()});const P=async t=>{try{S("Estas seguro de eliminar este router?",`/router/${t}`)}catch(a){console.log(a)}};h();const n=u("list"),T=u({rowsPerPage:10});return(t,a)=>(o(),p(y,null,[m("div",O,[m("div",W,[m("div",X,[i(H,{flat:"",class:"shadow_custom"},{default:r(()=>[i(V,{"title-class":"text-grey-7 text-h6",title:"Listado de Routers",rows:C.value,loading:b.value,"hide-header":n.value==="grid",columns:R,"row-key":"name",grid:n.value==="grid",filter:f.value,pagination:T.value},{header:r(e=>[i(I,{props:e,style:{height:"60px"}},{default:r(()=>[(o(!0),p(y,null,U(e.cols,s=>(o(),l(E,{key:s.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:r(()=>[w(_(s.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":r(e=>[!t.$q.screen.xs&&v(g).roles[0]=="Super-Administrador"?(o(),l(c,{key:0,onClick:a[0]||(a[0]=s=>t.$router.push({name:"router.add"})),outline:"",color:"primary",label:"Agregar Router",class:"q-mr-xs"})):d("",!0),i(G,{style:j(t.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=s=>f.value=s),placeholder:"Buscar..."},{append:r(()=>[i(k,{name:"search"})]),_:1},8,["style","modelValue"]),n.value==="list"?(o(),l(c,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:r(()=>[x((o(),l(A,{disable:t.$q.platform.is.mobile},{default:r(()=>[w(_(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[F]])]),_:2},1032,["icon","onClick"])):d("",!0),e.inFullscreen?d("",!0):(o(),l(c,{key:2,flat:"",round:"",dense:"",icon:n.value==="grid"?"list":"grid_on",onClick:a[2]||(a[2]=s=>{n.value=n.value==="grid"?"list":"grid",t.separator=n.value==="grid"?"none":"horizontal"})},{default:r(()=>[x((o(),l(A,{disable:t.$q.platform.is.mobile},{default:r(()=>[w(_(n.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[F]])]),_:1},8,["icon"]))]),"body-cell-estado":r(e=>[i(q,{props:e},{default:r(()=>[e.row.isActive?(o(),l(z,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(o(),l(z,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":r(e=>[i(q,{props:e},{default:r(()=>[e.row.isActive?(o(),l(c,{key:0,round:"",color:"blue-grey",onClick:s=>t.$router.push({name:"router.edit",params:{router_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):d("",!0),e.row.isActive?(o(),p(y,{key:1},[e.row.isActive&&v(g).roles[0]=="Super-Administrador"?(o(),l(c,{key:0,round:"",color:"blue-grey",icon:"close",onClick:s=>Q(e.row.id,!1),size:"10px"},null,8,["onClick"])):d("",!0)],64)):(o(),p(y,{key:2},[e.row.isActive?d("",!0):(o(),l(c,{key:0,round:"",color:"blue-grey",icon:"done",onClick:s=>Q(e.row.id,!0),size:"10px"},null,8,["onClick"])),!e.row.isActive&&v(g).roles[0]=="Super-Administrador"?(o(),l(c,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:s=>P(e.row.id),size:"10px"},null,8,["onClick"])):d("",!0)],64))]),_:2},1032,["props"])]),"no-data":r(({icon:e})=>[m("div",Y,[i(k,{size:"2em",name:"sentiment_dissatisfied"}),Z,i(k,{size:"2em",name:f.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),t.$q.screen.xs&&v(g).roles[0]=="Super-Administrador"?(o(),l(J,{key:0,position:"bottom-right",offset:[18,18]},{default:r(()=>[i(c,{round:"",color:"secondary",size:"lg",icon:"add",onClick:a[3]||(a[3]=e=>t.$router.push({name:"router.add"}))})]),_:1})):d("",!0)],64))}});export{ye as default};
