import{api as d}from"./axios.285a4291.js";import{u as f}from"./useHelpers.26f595d3.js";import{r as o}from"./index.d41bbc77.js";const u=o(!1),m=o([]),_=o(""),e=o({id:"",nombre_plan:"",descripcion:"",precio_plan:0,impuesto:0,descarga_Mbps:0,subida_Mbps:0,limit_at:0,burst_limit:0,prioridad:"",address_list:"",company_id:""}),t=o({nombre_plan:{message:"",isValid:!0},descripcion:{message:"",isValid:!0},precio_plan:{message:"",isValid:!0},impuesto:{message:"",isValid:!0},descarga_Mbps:{message:"",isValid:!0},subida_Mbps:{message:"",isValid:!0},limit_at:{message:"",isValid:!0},burst_limit:{message:"",isValid:!0},prioridad:{message:"",isValid:!0},address_list:{message:"",isValid:!0},company_id:{message:"",isValid:!0}}),V=r=>{let a=0;a=e.value[r];const l=/^\d{0,9}(\.\d{1,2})?$/;setTimeout(function(){let n=0;if(n=e.value[r],!l.test(n.toString())){const p=parseFloat(a.toString().substring(0,a.toString().length-1));e.value[r]=p}},0)},y=async()=>{m.value=[];const{data:r}=await d.get("/companies/true");r.forEach(a=>{m.value.push({label:a.nombre_comercial,value:a.id})}),_.value=m.value[0].value},x=r=>{const{mostrarNotify:a,claim:l,router:n,route:p}=f(),c=["nombre_plan","descripcion","precio_plan","descarga_Mbps","subida_Mbps","prioridad","address_list"],g=()=>{e.value={id:"",nombre_plan:"",descripcion:"",precio_plan:0,impuesto:0,descarga_Mbps:0,subida_Mbps:0,limit_at:0,burst_limit:0,prioridad:"",address_list:"",company_id:""}},v=()=>{c.push("company_id"),c.forEach(s=>{t.value[s].isValid=!0})},b=()=>{let s=!1;return c.forEach(i=>{(e.value[i].length==0||e.value[i]==0)&&(t.value[i].message="Debes completar este campo",t.value[i].isValid=!1,s=!0)}),!r&&e.value.company_id.length==0&&l.roles[0]=="Super-Administrador"&&(t.value.company_id.message="Debes elegir una empresa",t.value.company_id.isValid=!1,s=!0),s};return{api:d,claim:l,formInternet:e,loading:u,limpiarFormulario:g,listCompanies:m,selectCompany:_,validaciones:t,cargarCompanies:y,quitarErrores:v,route:p,validDecimal:V,onSubmit:async s=>{if(!b())try{u.value=!0;let i={headers:{company_id:e.value.company_id,NotSetHeaderCompany:l.roles[0]=="Super-Administrador"}};s?await d.patch(`/internet/${e.value.id}`,e.value):await d.post("/internet",e.value,i),a("positive",`Router ${s?"editado":"agregado"} exitosamente`),u.value=!1,n.push({name:"internet.index"})}catch(i){u.value=!1,a("warning",i.response.data.message)}}}};export{x as u};
