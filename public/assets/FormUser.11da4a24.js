import{m as ll,I as al,ba as sl,J as ol,bu as tl,r as q,n as _,v as he,aB as il,s as rl,p as g,z as ul,bv as nl,bj as dl,T as ml,O as we,h as ee,_ as cl,d as vl,C as fl,o as R,a9 as me,g as c,ad as a,f as d,aS as pl,e as t,Q as N,ae as x,ab as I,i as D,aa as ce,c as Z,af as K,bq as H,aU as hl,aT as bl,S as Me,aR as gl}from"./index.d6c4bdc6.js";import{a as De,Q as Ee}from"./QItemLabel.1ee9546f.js";import{Q as ve}from"./QSelect.a8a1d697.js";import{T as yl}from"./TouchPan.9f00b2cf.js";import{u as _l,a as Vl,b as xl,g as wl,Q as Ue}from"./QPopupProxy.59f3ce1c.js";import{_ as fe,f as ql}from"./date.6bb37875.js";import{p as L}from"./format.cbf00d5d.js";import{Q as kl}from"./QTree.5247388b.js";import{Q as Cl}from"./QForm.18dc3b57.js";import{C as Ie}from"./ClosePopup.ce0f6283.js";import{u as Sl}from"./useHelpers.0a8a684c.js";function Pl(r,E){if(r.hour!==null){if(r.minute===null)return"minute";if(E===!0&&r.second===null)return"second"}return"hour"}function Al(){const r=new Date;return{hour:r.getHours(),minute:r.getMinutes(),second:r.getSeconds(),millisecond:r.getMilliseconds()}}var $e=ll({name:"QTime",props:{...al,...sl,..._l,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:r=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(r)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Vl,setup(r,{slots:E,emit:O}){const S=ul(),{$q:P}=S.proxy,j=ol(r,P),{tabindex:A,headerClass:T,getLocale:k,getCurrentDate:s}=xl(r,P),Q=tl(r),v=nl(Q);let V,$;const le=q(null),B=_(()=>Te()),F=_(()=>k()),ae=_(()=>Qe()),Y=fe(r.modelValue,B.value,F.value,r.calendar,ae.value),p=q(Pl(Y)),o=q(Y),l=q(Y.hour===null||Y.hour<12),u=_(()=>`q-time q-time--${r.landscape===!0?"landscape":"portrait"}`+(j.value===!0?" q-time--dark q-dark":"")+(r.disable===!0?" disabled":r.readonly===!0?" q-time--readonly":"")+(r.bordered===!0?" q-time--bordered":"")+(r.square===!0?" q-time--square no-border-radius":"")+(r.flat===!0?" q-time--flat no-shadow":"")),be=_(()=>{const e=o.value;return{hour:e.hour===null?"--":C.value===!0?L(e.hour):String(l.value===!0?e.hour===0?12:e.hour:e.hour>12?e.hour-12:e.hour),minute:e.minute===null?"--":L(e.minute),second:e.second===null?"--":L(e.second)}}),C=_(()=>r.format24h!==null?r.format24h:P.lang.date.format24h),Re=_(()=>{const e=p.value==="hour",i=e===!0?12:60,n=o.value[p.value];let y=`rotate(${Math.round(n*(360/i))-180}deg) translateX(-50%)`;return e===!0&&C.value===!0&&o.value.hour>=12&&(y+=" scale(.7)"),{transform:y}}),qe=_(()=>o.value.hour!==null),Ne=_(()=>qe.value===!0&&o.value.minute!==null),G=_(()=>r.hourOptions!==void 0?e=>r.hourOptions.includes(e):r.options!==void 0?e=>r.options(e,null,null):null),se=_(()=>r.minuteOptions!==void 0?e=>r.minuteOptions.includes(e):r.options!==void 0?e=>r.options(o.value.hour,e,null):null),oe=_(()=>r.secondOptions!==void 0?e=>r.secondOptions.includes(e):r.options!==void 0?e=>r.options(o.value.hour,o.value.minute,e):null),U=_(()=>{if(G.value===null)return null;const e=ie(0,11,G.value),i=ie(12,11,G.value);return{am:e,pm:i,values:e.values.concat(i.values)}}),J=_(()=>se.value!==null?ie(0,59,se.value):null),W=_(()=>oe.value!==null?ie(0,59,oe.value):null),te=_(()=>{switch(p.value){case"hour":return U.value;case"minute":return J.value;case"second":return W.value}}),Oe=_(()=>{let e,i,n=0,h=1;const y=te.value!==null?te.value.values:void 0;p.value==="hour"?C.value===!0?(e=0,i=23):(e=0,i=11,l.value===!1&&(n=12)):(e=0,i=55,h=5);const M=[];for(let f=e,w=e;f<=i;f+=h,w++){const z=f+n,Ze=y!==void 0&&y.includes(z)===!1,el=p.value==="hour"&&f===0?C.value===!0?"00":"12":f;M.push({val:z,index:w,disable:Ze,label:el})}return M}),je=_(()=>[[yl,ze,void 0,{stop:!0,prevent:!0,mouse:!0}]]);he(()=>r.modelValue,e=>{const i=fe(e,B.value,F.value,r.calendar,ae.value);(i.dateHash!==o.value.dateHash||i.timeHash!==o.value.timeHash)&&(o.value=i,i.hour===null?p.value="hour":l.value=i.hour<12)}),he([B,F],()=>{cl(()=>{xe()})});function ke(){const e={...s(),...Al()};xe(e),Object.assign(o.value,e),p.value="hour"}function ie(e,i,n){const h=Array.apply(null,{length:i+1}).map((y,M)=>{const f=M+e;return{index:f,val:n(f)===!0}}).filter(y=>y.val===!0).map(y=>y.index);return{min:h[0],max:h[h.length-1],values:h,threshold:i+1}}function Ce(e,i,n){const h=Math.abs(e-i);return Math.min(h,n-h)}function ge(e,{min:i,max:n,values:h,threshold:y}){if(e===i)return i;if(e<i||e>n)return Ce(e,i,y)<=Ce(e,n,y)?i:n;const M=h.findIndex(z=>e<=z),f=h[M-1],w=h[M];return e-f<=w-e?f:w}function Te(){return r.calendar!=="persian"&&r.mask!==null?r.mask:`HH:mm${r.withSeconds===!0?":ss":""}`}function Qe(){if(typeof r.defaultDate!="string"){const e=s(!0);return e.dateHash=wl(e),e}return fe(r.defaultDate,"YYYY/MM/DD",void 0,r.calendar)}function ye(){return dl(S)===!0||te.value!==null&&(te.value.values.length===0||p.value==="hour"&&C.value!==!0&&U.value[l.value===!0?"am":"pm"].values.length===0)}function _e(){const e=le.value,{top:i,left:n,width:h}=e.getBoundingClientRect(),y=h/2;return{top:i+y,left:n+y,dist:y*.7}}function ze(e){if(ye()!==!0){if(e.isFirst===!0){V=_e(),$=re(e.evt,V);return}$=re(e.evt,V,$),e.isFinal===!0&&(V=!1,$=null,Se())}}function Se(){p.value==="hour"?p.value="minute":r.withSeconds&&p.value==="minute"&&(p.value="second")}function re(e,i,n){const h=il(e),y=Math.abs(h.top-i.top),M=Math.sqrt(Math.pow(Math.abs(h.top-i.top),2)+Math.pow(Math.abs(h.left-i.left),2));let f,w=Math.asin(y/M)*(180/Math.PI);if(h.top<i.top?w=i.left<h.left?90-w:270+w:w=i.left<h.left?w+90:270-w,p.value==="hour"){if(f=w/30,U.value!==null){const z=C.value!==!0?l.value===!0:U.value.am.values.length!==0&&U.value.pm.values.length!==0?M>=i.dist:U.value.am.values.length!==0;f=ge(f+(z===!0?0:12),U.value[z===!0?"am":"pm"])}else f=Math.round(f),C.value===!0?M<i.dist?f<12&&(f+=12):f===12&&(f=0):l.value===!0&&f===12?f=0:l.value===!1&&f!==12&&(f+=12);C.value===!0&&(l.value=f<12)}else f=Math.round(w/6)%60,p.value==="minute"&&J.value!==null?f=ge(f,J.value):p.value==="second"&&W.value!==null&&(f=ge(f,W.value));return n!==f&&Je[p.value](f),f}const Ve={hour(){p.value="hour"},minute(){p.value="minute"},second(){p.value="second"}};function He(e){e.keyCode===13&&Pe()}function Be(e){e.keyCode===13&&Ae()}function Fe(e){ye()!==!0&&(P.platform.is.desktop!==!0&&re(e,_e()),Se())}function Ye(e){ye()!==!0&&re(e,_e())}function Ke(e){if(e.keyCode===13)p.value="hour";else if([37,39].includes(e.keyCode)){const i=e.keyCode===37?-1:1;if(U.value!==null){const n=C.value===!0?U.value.values:U.value[l.value===!0?"am":"pm"].values;if(n.length===0)return;if(o.value.hour===null)ue(n[0]);else{const h=(n.length+n.indexOf(o.value.hour)+i)%n.length;ue(n[h])}}else{const n=C.value===!0?24:12,h=C.value!==!0&&l.value===!1?12:0,y=o.value.hour===null?-i:o.value.hour;ue(h+(24+y+i)%n)}}}function Le(e){if(e.keyCode===13)p.value="minute";else if([37,39].includes(e.keyCode)){const i=e.keyCode===37?-1:1;if(J.value!==null){const n=J.value.values;if(n.length===0)return;if(o.value.minute===null)ne(n[0]);else{const h=(n.length+n.indexOf(o.value.minute)+i)%n.length;ne(n[h])}}else{const n=o.value.minute===null?-i:o.value.minute;ne((60+n+i)%60)}}}function Ge(e){if(e.keyCode===13)p.value="second";else if([37,39].includes(e.keyCode)){const i=e.keyCode===37?-1:1;if(W.value!==null){const n=W.value.values;if(n.length===0)return;if(o.value.seconds===null)de(n[0]);else{const h=(n.length+n.indexOf(o.value.second)+i)%n.length;de(n[h])}}else{const n=o.value.second===null?-i:o.value.second;de((60+n+i)%60)}}}function ue(e){o.value.hour!==e&&(o.value.hour=e,X())}function ne(e){o.value.minute!==e&&(o.value.minute=e,X())}function de(e){o.value.second!==e&&(o.value.second=e,X())}const Je={hour:ue,minute:ne,second:de};function Pe(){l.value===!1&&(l.value=!0,o.value.hour!==null&&(o.value.hour-=12,X()))}function Ae(){l.value===!0&&(l.value=!1,o.value.hour!==null&&(o.value.hour+=12,X()))}function X(){if(G.value!==null&&G.value(o.value.hour)!==!0){o.value=fe(),p.value="hour";return}if(se.value!==null&&se.value(o.value.minute)!==!0){o.value.minute=null,o.value.second=null,p.value="minute";return}if(r.withSeconds===!0&&oe.value!==null&&oe.value(o.value.second)!==!0){o.value.second=null,p.value="second";return}o.value.hour===null||o.value.minute===null||r.withSeconds===!0&&o.value.second===null||xe()}function xe(e){const i=Object.assign({...o.value},e),n=r.calendar==="persian"?L(i.hour)+":"+L(i.minute)+(r.withSeconds===!0?":"+L(i.second):""):ql(new Date(i.year,i.month===null?null:i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond),B.value,F.value,i.year,i.timezoneOffset);i.changed=n!==r.modelValue,O("update:modelValue",n,i)}function We(){const e=[g("div",{class:"q-time__link "+(p.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:A.value,onClick:Ve.hour,onKeyup:Ke},be.value.hour),g("div",":"),g("div",qe.value===!0?{class:"q-time__link "+(p.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:A.value,onKeyup:Le,onClick:Ve.minute}:{class:"q-time__link"},be.value.minute)];r.withSeconds===!0&&e.push(g("div",":"),g("div",Ne.value===!0?{class:"q-time__link "+(p.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:A.value,onKeyup:Ge,onClick:Ve.second}:{class:"q-time__link"},be.value.second));const i=[g("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},e)];return C.value===!1&&i.push(g("div",{class:"q-time__header-ampm column items-between no-wrap"},[g("div",{class:"q-time__link "+(l.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:A.value,onClick:Pe,onKeyup:He},"AM"),g("div",{class:"q-time__link "+(l.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:A.value,onClick:Ae,onKeyup:Be},"PM")])),g("div",{class:"q-time__header flex flex-center no-wrap "+T.value},i)}function Xe(){const e=o.value[p.value];return g("div",{class:"q-time__content col relative-position"},[g(ml,{name:"q-transition--scale"},()=>g("div",{key:"clock"+p.value,class:"q-time__container-parent absolute-full"},[g("div",{ref:le,class:"q-time__container-child fit overflow-hidden"},[we(g("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Fe,onMousedown:Ye},[g("div",{class:"q-time__clock-circle fit"},[g("div",{class:"q-time__clock-pointer"+(o.value[p.value]===null?" hidden":r.color!==void 0?` text-${r.color}`:""),style:Re.value}),Oe.value.map(i=>g("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${i.index}`+(i.val===e?" q-time__clock-position--active "+T.value:i.disable===!0?" q-time__clock-position--disable":"")},[g("span",i.label)]))])]),je.value)])])),r.nowBtn===!0?g(ee,{class:"q-time__now-button absolute",icon:P.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:r.color,textColor:r.textColor,tabindex:A.value,onClick:ke}):null])}return S.proxy.setNow=ke,()=>{const e=[Xe()],i=rl(E.default);return i!==void 0&&e.push(g("div",{class:"q-time__actions"},i)),r.name!==void 0&&r.disable!==!0&&v(e,"push"),g("div",{class:u.value,tabindex:-1},[We(),g("div",{class:"q-time__main col overflow-auto"},e)])}}}),Ml=[{label:"Seleccionar todos los permisos",value:"Seleccionar todos los permisos",children:[{label:"Proveedores",value:"Proveedores",children:[{label:"Ver Proveedores",value:"index.proveedores"},{label:"Crear Proveedor",value:"crear.proveedor"},{label:"Editar Proveedor",value:"editar.proveedor"},{label:"Activar Proveedor",value:"activar.proveedor"},{label:"Inactivar Proveedor",value:"inactivar.proveedor"},{label:"Eliminar Proveedor",value:"eliminar.proveedor"}]},{label:"Clientes",value:"Clientes",children:[{label:"Ver Clientes",value:"index.clientes"},{label:"Crear Cliente",value:"crear.cliente"},{label:"Editar Cliente",value:"editar.cliente"},{label:"Activar Cliente",value:"activar.cliente"},{label:"Inactivar Cliente",value:"inactivar.cliente"},{label:"Eliminar Cliente",value:"eliminar.cliente"}]},{label:"Productos Y Servicios",value:"Productos Y Servicios",children:[{label:"Ver Prod. Y Serv.",value:"index.productos"},{label:"Crear Prod. Y Serv.",value:"crear.productos"},{label:"Editar Prod. Y Serv.",value:"editar.productos"},{label:"Activar Prod. Y Serv.",value:"activar.productos"},{label:"Inactivar Prod. Y Serv.",value:"inactivar.productos"},{label:"Eliminar Prod. Y Serv.",value:"eliminar.productos"}]},{label:"Compras",value:"Compras",children:[{label:"Ver Compras",value:"index.compras"},{label:"Crear Compra",value:"crear.compra"},{label:"Anular Compra",value:"anular.compra"}]},{label:"Ventas",value:"Ventas",children:[{label:"Ver Ventas",value:"index.ventas"},{label:"Crear Venta",value:"crear.venta"},{label:"Anular Venta",value:"anular.venta"}]},{label:"Gesti\xF3n Personal",value:"Gesti\xF3n Personal",children:[{label:"Ver Usuarios",value:"index.usuario"},{label:"Crear Usuario",value:"crear.usuario"},{label:"Editar Usuario",value:"editar.usuario"},{label:"Activar Usuario",value:"activar.usuario"},{label:"Inactivar Usuario",value:"inactivar.usuario"},{label:"Eliminar Usuario",value:"eliminar.usuario"}]},{label:"Roles Y Permisos",value:"Roles Y Permisos",children:[{label:"Ver Roles",value:"index.rol"},{label:"Crear Rol",value:"crear.rol"},{label:"Editar Rol",value:"editar.rol"},{label:"Eliminar Rol",value:"eliminar.rol"}]},{label:"Correo",value:"Correo",children:[{label:"Ver Correos",value:"index.correo"},{label:"Editar Correo",value:"editar.correo"}]},{label:"Empresas",value:"Empresas",children:[{label:"Ver Empresas",value:"index.empresa"},{label:"Crear Empresa",value:"crear.empresa"},{label:"Editar Empresa",value:"editar.empresa"},{label:"Activar Empresa",value:"activar.empresa"},{label:"Inactivar Empresa",value:"inactivar.empresa"},{label:"Eliminar Empresa",value:"eliminar.empresa"}]},{label:"Sucursales",value:"Sucursales",children:[{label:"Ver Sucursales",value:"index.sucursal"},{label:"Crear Sucursal",value:"crear.sucursal"},{label:"Editar Sucursal",value:"editar.sucursal"},{label:"Activar Sucursal",value:"activar.sucursal"},{label:"Inactivar Sucursal",value:"inactivar.sucursal"},{label:"Eliminar Sucursal",value:"eliminar.sucursal"}]}]}];const pe=q(!1),m=q({usuario:"",email:"",cedula:"",celular:"",fullName:"",roles:[""],permisos:[""],horarios_dias:[],horarios_time:["",""],receiveSupportEmail:!1,company:"",sucursales:[""],password:"",confirmPassword:"",isActive:!0}),b=q({usuario:{message:"",isValid:!0},email:{message:"",isValid:!0},cedula:{message:"",isValid:!0},celular:{message:"",isValid:!0},fullName:{message:"",isValid:!0},roles:{message:"",isValid:!0},permisos:{message:"",isValid:!0},horarios_dias:{message:"",isValid:!0},horarios_time:{message:"",isValid:!0},company:{message:"",isValid:!0},sucursales:{message:"",isValid:!0},password:{message:"",isValid:!0},confirmPassword:{message:"",isValid:!0}}),Dl=()=>{const{api:r,mostrarNotify:E,router:O,route:S}=Sl(),P=async()=>{const{data:k}=await r.get("/companies");return k},j=()=>{m.value.email="",m.value.password="",m.value.cedula="",m.value.celular="",m.value.fullName="",m.value.usuario="",m.value.company="",m.value.roles=[""],m.value.permisos=[],m.value.horarios_dias=[],m.value.horarios_time=[],m.value.receiveSupportEmail=!1},A=k=>{let s=!1;var Q=/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/;return["fullName","usuario","celular","company","confirmPassword","password","email"].forEach(V=>{!k&&(V!="password"||V!="confirmPassword")&&m.value[V].length==0&&(b.value[V].message="Debes completar este campo",b.value[V].isValid=!1,s=!0)}),m.value.company.length!=0&&m.value.roles[0].length==0&&(b.value.roles.message="Debes elegir un Rol",b.value.roles.isValid=!1,s=!0),m.value.company.length!==0&&m.value.roles[0]!=="SUPER-ADMINISTRADOR"&&m.value.roles[0]!=="ADMINISTRADOR"&&m.value.sucursales[0].length===0&&(b.value.sucursales.message="Debes elegir una sucursal",b.value.sucursales.isValid=!1,s=!0),(m.value.roles[0]=="SUPER-ADMINISTRADOR"||m.value.roles[0]=="ADMINISTRADOR")&&(m.value.sucursales=[]),k?m.value.password!=null&&(m.value.password.length>0&&m.value.password.length<8&&(b.value.password.message="La contrase\xF1a debe tener minimo 8 caracter",b.value.password.isValid=!1,s=!0),m.value.confirmPassword.length>0&&m.value.confirmPassword.length<8?(b.value.confirmPassword.message="La contrase\xF1a debe tener minimo 8 caracter",b.value.confirmPassword.isValid=!1,s=!0):m.value.confirmPassword!=m.value.password&&(b.value.confirmPassword.message="Las contrase\xF1as no coinciden, verificar",b.value.confirmPassword.isValid=!1,s=!0)):(b.value.password.isValid&&m.value.password.length<8&&(b.value.password.message="La contrase\xF1a debe tener minimo 8 caracter",b.value.password.isValid=!1,s=!0),b.value.password.isValid&&m.value.confirmPassword.length<8?(b.value.confirmPassword.message="La contrase\xF1a debe tener minimo 8 caracter",b.value.confirmPassword.isValid=!1,s=!0):m.value.password.length!==0&&m.value.confirmPassword!=m.value.password&&(b.value.confirmPassword.message="Las contrase\xF1as no coinciden, verificar",b.value.confirmPassword.isValid=!1,s=!0)),b.value.email.isValid&&!Q.test(m.value.email)&&(b.value.email.message="Ingresa un email valido",b.value.email.isValid=!1,s=!0),m.value.permisos.length==0&&(b.value.permisos.message="*Debes elegir al menos un permiso",b.value.permisos.isValid=!1,s=!0),s},T=async k=>{if(!A(k))try{pe.value=!0,k?await r.patch("/auth/edit/"+m.value.id,m.value):await r.post("/auth/register",{...m.value,fullName:m.value.fullName.toUpperCase()}),E("positive",`Usuario ${k?"editado":"creado"} exitosamente.`),pe.value=!1,O.push({name:"Ver Usuarios"})}catch(s){console.log(s),pe.value=!1,E("warning",s.response.data.message)}};return{api:r,getCompanies:P,formUser:m,loading:pe,limpiarFormulario:j,expanded:q(["Seleccionar todos los permisos"]),onSubmit:T,validaciones:b,route:S,showPass:q(!0),showConfirmPass:q(!0)}},El={class:"row q-pt-sm"},Ul={class:"col-xs-12 col-md-8"},Il={class:"row"},$l=t("div",{class:"col-11 flex justify-start items-center"},[t("label",{class:"text-h6 text-weight-medium"},"Datos:")],-1),Rl=t("div",{class:"col-4 flex justify-end items-center"},[t("label",null,"Nombre:")],-1),Nl={class:"col-xs-7 col-sm-6 q-ml-md"},Ol=t("div",{class:"col-4 flex justify-end items-center q-my-sm"},[t("label",null,"Usuario:")],-1),jl={class:"col-xs-7 col-sm-6 q-ml-md q-my-sm"},Tl=t("div",{class:"col-4 flex justify-end items-center"},[t("label",null,"Email:")],-1),Ql={class:"col-xs-7 col-sm-6 q-ml-md"},zl=t("div",{class:"col-4 flex justify-end items-center q-my-sm"},[t("label",null,"T\xE9lefono Movil:")],-1),Hl={class:"col-xs-7 col-sm-6 q-ml-md q-my-sm"},Bl=t("label",{class:"text-h6 text-weight-medium"},"Configuraci\xF3n:",-1),Fl=[Bl],Yl=t("div",{class:"col-4 flex justify-end items-center"},[t("label",{for:""},"Empresa:")],-1),Kl={class:"col-xs-7 col-sm-6 q-ml-md"},Ll={key:0,class:"col-4 flex justify-end items-center q-mt-sm"},Gl=t("label",null,"Rol:",-1),Jl=[Gl],Wl={key:1,class:"col-xs-7 col-sm-6 q-ml-md q-mt-sm"},Xl={key:2,class:"col-4 flex justify-end items-center q-mt-sm"},Zl=t("label",null,"Sucursal:",-1),ea=[Zl],la={key:3,class:"col-xs-7 col-sm-6 q-ml-md q-mt-sm"},aa=t("div",{class:"col-4 flex justify-end items-center q-mt-sm"},[t("label",{for:""},"Estado:")],-1),sa={class:"col-xs-7 col-sm-6 q-ml-md q-mt-sm"},oa=t("div",{class:"col-4 flex justify-end items-center"},[t("label",{for:""},"Recibir correo soporte:")],-1),ta={class:"col-xs-7 col-sm-6 q-ml-md"},ia=t("div",{class:"col-4 flex justify-end items-center q-my-sm"},null,-1),ra=t("div",{class:"col-6 q-ml-md q-my-sm"},null,-1),ua=t("div",{class:"col-4 flex justify-end items-center q-my-sm"},[t("label",{for:""},"Horario Acceso:")],-1),na={class:"col-xs-7 col-sm-6 q-ml-md q-my-sm flex"},da={style:{display:"flex","flex-direction":"column"}},ma=t("label",{class:"q-ml-md"}," Lunes ",-1),ca={style:{display:"flex","flex-direction":"column"}},va=t("label",{class:"q-ml-md"}," Martes ",-1),fa={style:{display:"flex","flex-direction":"column"}},pa=t("label",{class:"q-ml-md"}," Miercoles ",-1),ha={style:{display:"flex","flex-direction":"column"}},ba=t("label",{class:"q-ml-md"},"Jueves",-1),ga={style:{display:"flex","flex-direction":"column"}},ya=t("label",{class:"q-ml-md"}," Viernes ",-1),_a={style:{display:"flex","flex-direction":"column"}},Va=t("label",{class:"q-ml-md"}," Sabado ",-1),xa=t("div",{class:"col-4 flex justify-end items-center q-my-sm"},[t("label",{class:"q-mb-md"},"Horario:")],-1),wa={class:"col-xs-7 col-sm-6 q-ml-md q-my-sm"},qa={class:"row"},ka={class:"col-xs-12 col-sm-5"},Ca={class:"row items-center justify-end"},Sa={class:"col-xs-12 col-sm-5 offset-sm-1"},Pa={class:"row items-center justify-end"},Aa={class:"col-11 flex justify-start items-center"},Ma=t("div",{class:"col-4 flex justify-end items-center"},[t("label",null,"Contrase\xF1a:")],-1),Da={class:"col-xs-7 col-sm-6 q-ml-md"},Ea=t("div",{class:"col-4 flex justify-end items-center q-my-sm"},[t("label",{for:""},"Repite Contrase\xF1a:")],-1),Ua={class:"col-xs-7 col-sm-6 q-ml-md q-my-sm"},Ia={class:"col-xs-11 col-md-4"},$a={class:"row"},Ra=t("label",{class:"text-h6 text-weight-medium"},"Permisos:",-1),Na=[Ra],Ga=vl({__name:"FormUser",props:{edit:{type:Boolean}},setup(r){const E=r,O=q([]),S=q(Ml),P=q([]),j=q([]);let A=!1;const{api:T,getCompanies:k,formUser:s,expanded:Q,validaciones:v,showConfirmPass:V,showPass:$,loading:le,onSubmit:B}=Dl();fl(async()=>{await Promise.all([F(),ae()]),E.edit&&s.value.roles[0]=="SUPER-ADMINISTRADOR"?(await Promise.resolve(),S.value[0].disabled=!0):S.value[0].disabled=!1});const F=async()=>{O.value=[],(await k()).forEach(l=>{O.value.push({label:l.nombre_comercial,value:l.id})})},ae=async()=>{const{data:o}=await T.get("/roles-and-permisos");o.forEach(l=>{j.value.unshift({label:l.nombre,value:l.nombre,permisos:l.permisos})})},Y=()=>{const o=j.value.find(l=>l.value==s.value.roles[0]);(o==null?void 0:o.label)=="SUPER-ADMINISTRADOR"?S.value[0].disabled=!0:S.value[0].disabled=!1,s.value.permisos=o.permisos};he(()=>s.value.permisos,o=>{o.length>0?v.value.permisos.isValid=!0:v.value.permisos.isValid=!1}),he(()=>s.value.company,o=>{p(s.value.company)});const p=async o=>{P.value=[],(!E.edit||A)&&(s.value.sucursales=[""]),A=!0;const{data:l}=await T.get(`/sucursal/find/${o}/company`);l.forEach(u=>{P.value.push({label:u.nombre,value:u.id})})};return(o,l)=>(R(),me(Cl,{onSubmit:l[36]||(l[36]=u=>a(B)(E.edit))},{default:c(()=>[d(gl,{class:"my-card"},{default:c(()=>[d(pl,{class:"q-pt-none"},{default:c(()=>[t("div",El,[t("div",Ul,[t("div",Il,[$l,Rl,t("div",Nl,[d(N,{modelValue:a(s).fullName,"onUpdate:modelValue":[l[0]||(l[0]=u=>a(s).fullName=u),l[1]||(l[1]=u=>a(v).fullName.isValid=!0)],modelModifiers:{trim:!0},error:!a(v).fullName.isValid,"input-style":"text-transform: uppercase;",dense:"",outlined:""},{error:c(()=>[t("label",{class:x(o.$q.dark.isActive?"text-red-4":"text-negative")},I(a(v).fullName.message),3)]),_:1},8,["modelValue","error"])]),Ol,t("div",jl,[d(N,{modelValue:a(s).usuario,"onUpdate:modelValue":[l[2]||(l[2]=u=>a(s).usuario=u),l[3]||(l[3]=u=>a(v).usuario.isValid=!0)],modelModifiers:{trim:!0},error:!a(v).usuario.isValid,dense:"",outlined:""},{error:c(()=>[t("label",{class:x(o.$q.dark.isActive?"text-red-4":"text-negative")},I(a(v).usuario.message),3)]),append:c(()=>[d(D,{name:"person",size:"1.3rem"})]),_:1},8,["modelValue","error"])]),Tl,t("div",Ql,[d(N,{modelValue:a(s).email,"onUpdate:modelValue":[l[4]||(l[4]=u=>a(s).email=u),l[5]||(l[5]=u=>a(v).email.isValid=!0)],modelModifiers:{trim:!0},error:!a(v).email.isValid,type:"text",dense:"",outlined:""},{error:c(()=>[t("label",{class:x(o.$q.dark.isActive?"text-red-4":"text-negative")},I(a(v).email.message),3)]),append:c(()=>[d(D,{name:"mail",size:"1.2rem"})]),_:1},8,["modelValue","error"])]),zl,t("div",Hl,[d(N,{modelValue:a(s).celular,"onUpdate:modelValue":[l[6]||(l[6]=u=>a(s).celular=u),l[8]||(l[8]=u=>a(v).celular.isValid=!0)],counter:"",maxlength:"10",onKeyup:l[7]||(l[7]=u=>a(s).celular=a(s).celular.replace(/\D/g,"")),"lazy-rules":"",error:!a(v).celular.isValid,dense:"",outlined:""},{error:c(()=>[t("label",{class:x(o.$q.dark.isActive?"text-red-4":"text-negative")},I(a(v).celular.message),3)]),append:c(()=>[d(D,{name:"call",size:"1.2rem"})]),_:1},8,["modelValue","error"])]),t("div",{class:x(["col-11 flex justify-start items-center",[o.$q.screen.xs?"q-my-md":""]])},Fl,2),Yl,t("div",Kl,[d(ve,{color:"orange","transition-show":"scale","transition-hide":"scale",outlined:"",modelValue:a(s).company,"onUpdate:modelValue":[l[9]||(l[9]=u=>a(s).company=u),l[10]||(l[10]=u=>a(v).company.isValid=!0)],dense:"",error:!a(v).company.isValid,options:O.value,"emit-value":"","map-options":""},{error:c(()=>[t("label",{class:x(o.$q.dark.isActive?"text-red-4":"text-negative")},I(a(v).company.message),3)]),"no-option":c(()=>[d(De,null,{default:c(()=>[d(Ee,{class:"text-grey"},{default:c(()=>[ce(" No hay resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","error","options"])]),a(s).company.length!==0?(R(),Z("div",Ll,Jl)):K("",!0),a(s).company.length!==0?(R(),Z("div",Wl,[d(ve,{modelValue:a(s).roles[0],"onUpdate:modelValue":[l[11]||(l[11]=u=>a(s).roles[0]=u),l[12]||(l[12]=u=>(a(v).roles.isValid=!0,Y()))],outlined:"",dense:"","transition-show":"scale","transition-hide":"scale",error:!a(v).roles.isValid,options:j.value,"emit-value":"","map-options":""},{error:c(()=>[t("label",{class:x(o.$q.dark.isActive?"text-red-4":"text-negative")},I(a(v).roles.message),3)]),_:1},8,["modelValue","error","options"])])):K("",!0),a(s).roles[0]!==""&&a(s).company.length!==0&&a(s).roles[0]!=="ADMINISTRADOR"&&a(s).roles[0]!=="SUPER-ADMINISTRADOR"?(R(),Z("div",Xl,ea)):K("",!0),a(s).roles[0]!==""&&a(s).company.length!==0&&a(s).roles[0]!=="ADMINISTRADOR"&&a(s).roles[0]!=="SUPER-ADMINISTRADOR"?(R(),Z("div",la,[d(ve,{modelValue:a(s).sucursales[0],"onUpdate:modelValue":[l[13]||(l[13]=u=>a(s).sucursales[0]=u),l[14]||(l[14]=u=>a(v).sucursales.isValid=!0)],outlined:"",dense:"",required:"","emit-value":"","map-options":"","transition-show":"scale","transition-hide":"scale",error:!a(v).sucursales.isValid,options:P.value},{error:c(()=>[t("label",{class:x(o.$q.dark.isActive?"text-red-4":"text-negative")},I(a(v).sucursales.message),3)]),"no-option":c(()=>[d(De,null,{default:c(()=>[d(Ee,{class:"text-grey"},{default:c(()=>[ce(" No se encontro resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","error","options"])])):K("",!0),aa,t("div",sa,[d(ve,{modelValue:a(s).isActive,"onUpdate:modelValue":l[15]||(l[15]=u=>a(s).isActive=u),outlined:"",dense:"","emit-value":"","map-options":"",options:[{label:"Activo",value:!0},{label:"Inactivo",value:!1}]},{append:c(()=>[a(s).isActive?(R(),me(D,{key:0,size:"1.2rem",name:"fa-solid fa-user-check"})):(R(),me(D,{key:1,name:"fa-solid fa-user-xmark",size:"1.2rem"}))]),_:1},8,["modelValue"])]),oa,t("div",ta,[d(H,{color:"green",size:"lg",modelValue:a(s).receiveSupportEmail,"onUpdate:modelValue":l[16]||(l[16]=u=>a(s).receiveSupportEmail=u)},null,8,["modelValue"])]),ia,ra,ua,t("div",na,[t("div",da,[d(H,{class:"q-ml-sm",size:"lg",val:"Lunes",modelValue:a(s).horarios_dias,"onUpdate:modelValue":l[17]||(l[17]=u=>a(s).horarios_dias=u)},null,8,["modelValue"]),ma]),t("div",ca,[d(H,{class:"q-ml-sm",size:"lg",val:"Martes",modelValue:a(s).horarios_dias,"onUpdate:modelValue":l[18]||(l[18]=u=>a(s).horarios_dias=u)},null,8,["modelValue"]),va]),t("div",fa,[d(H,{class:"q-ml-sm",size:"lg",val:"Miercoles",modelValue:a(s).horarios_dias,"onUpdate:modelValue":l[19]||(l[19]=u=>a(s).horarios_dias=u)},null,8,["modelValue"]),pa]),t("div",ha,[d(H,{class:"q-ml-sm",size:"lg",val:"Jueves",modelValue:a(s).horarios_dias,"onUpdate:modelValue":l[20]||(l[20]=u=>a(s).horarios_dias=u)},null,8,["modelValue"]),ba]),t("div",ga,[d(H,{class:"q-ml-sm",size:"lg",val:"Viernes",modelValue:a(s).horarios_dias,"onUpdate:modelValue":l[21]||(l[21]=u=>a(s).horarios_dias=u)},null,8,["modelValue"]),ya]),t("div",_a,[d(H,{class:"q-ml-sm",size:"lg",val:"Sabado",modelValue:a(s).horarios_dias,"onUpdate:modelValue":l[22]||(l[22]=u=>a(s).horarios_dias=u)},null,8,["modelValue"]),Va])]),xa,t("div",wa,[t("div",qa,[t("div",ka,[d(N,{outlined:"",modelValue:a(s).horarios_time[0],"onUpdate:modelValue":l[24]||(l[24]=u=>a(s).horarios_time[0]=u),mask:"time",dense:""},{append:c(()=>[d(D,{name:"access_time",class:"cursor-pointer"},{default:c(()=>[d(Ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:c(()=>[d($e,{modelValue:a(s).horarios_time[0],"onUpdate:modelValue":l[23]||(l[23]=u=>a(s).horarios_time[0]=u)},{default:c(()=>[t("div",Ca,[we(d(ee,{label:"Close",color:"primary",flat:""},null,512),[[Ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",Sa,[d(N,{outlined:"",modelValue:a(s).horarios_time[1],"onUpdate:modelValue":l[26]||(l[26]=u=>a(s).horarios_time[1]=u),mask:"time",dense:""},{append:c(()=>[d(D,{name:"access_time",class:"cursor-pointer"},{default:c(()=>[d(Ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:c(()=>[d($e,{modelValue:a(s).horarios_time[1],"onUpdate:modelValue":l[25]||(l[25]=u=>a(s).horarios_time[1]=u)},{default:c(()=>[t("div",Pa,[we(d(ee,{label:"Close",color:"primary",flat:""},null,512),[[Ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),t("div",Aa,[t("label",{class:x(["text-h6 text-weight-medium",[o.$q.screen.xs?"q-my-md":""]])}," Nueva Contrase\xF1a: ",2)]),Ma,t("div",Da,[d(N,{type:a($)?"password":"text",outlined:"",dense:"","onUpdate:modelValue":[l[28]||(l[28]=u=>a(v).password.isValid=!0),l[29]||(l[29]=u=>a(s).password=u)],error:!a(v).password.isValid,modelValue:a(s).password,modelModifiers:{trim:!0}},{error:c(()=>[t("label",{class:x(o.$q.dark.isActive?"text-red-4":"text-negative")},I(a(v).password.message),3)]),append:c(()=>[d(D,{name:a($)?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:l[27]||(l[27]=u=>$.value=!a($))},null,8,["name"])]),prepend:c(()=>[d(D,{name:"key",color:"blue-grey-3"})]),_:1},8,["type","error","modelValue"])]),Ea,t("div",Ua,[d(N,{type:a(V)?"password":"text",outlined:"",dense:"","onUpdate:modelValue":[l[31]||(l[31]=u=>a(v).confirmPassword.isValid=!0),l[32]||(l[32]=u=>a(s).confirmPassword=u)],error:!a(v).confirmPassword.isValid,modelValue:a(s).confirmPassword,modelModifiers:{trim:!0}},{error:c(()=>[t("label",{class:x(o.$q.dark.isActive?"text-red-4":"text-negative")},I(a(v).confirmPassword.message),3)]),append:c(()=>[d(D,{name:a(V)?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:l[30]||(l[30]=u=>V.value=!a(V))},null,8,["name"])]),prepend:c(()=>[d(D,{name:"key",color:"blue-grey-3"})]),_:1},8,["type","error","modelValue"])])])]),t("div",Ia,[t("div",$a,[t("div",{class:x(["col-11 flex justify-start items-center",[o.$q.screen.xs?"q-my-md":""]])},Na,2),d(kl,{class:x(["col-xs-11 col-sm-11 col-sm-11",[o.$q.screen.xs?"offset-1":""]]),"default-expand-all":!1,nodes:S.value,"label-key":"label","node-key":"value","control-color":"deep-orange-14","tick-strategy":"leaf",expanded:a(Q),"onUpdate:expanded":l[33]||(l[33]=u=>hl(Q)?Q.value=u:null),ticked:a(s).permisos,"onUpdate:ticked":l[34]||(l[34]=u=>a(s).permisos=u)},null,8,["class","nodes","expanded","ticked"]),a(v).permisos.isValid?K("",!0):(R(),Z("div",{key:0,class:x(["col-11 text-center",o.$q.dark.isActive?"text-red-4":"text-negative"])},[t("label",null,I(a(v).permisos.message),1)],2))])])])]),_:1}),d(bl,{class:x(["q-pb-md",[a(Me).width<600?"justify-center q-ml-xl":"justify-between"]])},{default:c(()=>[a(Me).width>600?(R(),me(ee,{key:0,type:"submit",icon:"arrow_back",onClick:l[35]||(l[35]=u=>o.$router.push("/usuarios")),outline:"",rounded:"",class:"q-mr-lg",color:o.$q.dark.isActive?"blue-grey-2":"blue-grey-10"},{default:c(()=>[ce(" \xA0 Regresar ")]),_:1},8,["color"])):K("",!0),d(ee,{type:"submit",icon:"save",loading:a(le),outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:c(()=>[ce(" \xA0 Guardar Cambios ")]),_:1},8,["loading"])]),_:1},8,["class"])]),_:1})]),_:1}))}});export{Ga as _,Dl as u};
