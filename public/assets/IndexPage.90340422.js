import{Q as V,a as q,b as D}from"./QTable.d2338979.js";import{Q as E,a as A}from"./QTooltip.af196135.js";import{d as I,r as u,D as L,o as a,c as p,e as m,f as i,g as r,aP as H,ab as v,a7 as l,ad as d,ah as y,ag as U,h as c,Q as G,aU as j,i as k,R as x,a8 as w,a9 as _}from"./index.0d55ca8e.js";import{Q as z}from"./QBadge.9538e355.js";import{Q as J}from"./QPageSticky.a0467408.js";import{C as R}from"./ClosePopup.eed3576d.js";import{api as F}from"./axios.c95232b4.js";import{u as K}from"./useHelpers.40c7f7f5.js";import{u as M}from"./useRouter.675e3c02.js";import"./QList.773fb7d8.js";import"./QSelect.598c9ca3.js";import"./QChip.b0f7efb8.js";import"./QItemLabel.18d31e41.js";import"./format.2bc25e5f.js";import"./use-quasar.d0cdced1.js";const O={class:"q-ma-lg q-pt-md"},W={class:"row q-col-gutter-lg"},X={class:"col-12"},Y={class:"full-width row flex-center text-lime-10 q-gutter-sm"},Z=m("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),ye=I({__name:"IndexPage",setup(ee){const S=[{name:"acciones",label:"acciones",align:"center"},{align:"center",label:"Nombre Router",field:"nombre",name:"nombre"},{align:"center",label:"IP/Host",field:"ip_host",name:"ip_host"},{align:"center",label:"Empresa",field:"empresa_name",name:"empresa_name"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{claim:g,formRouter:te}=M();const f=u(""),C=u([]),b=u(!1),{mostrarNotify:$,confirmDelete:B,isDeleted:N}=K(),h=async()=>{b.value=!0;try{const{data:t}=await F.get("/router");t.forEach(o=>{o.empresa_name=o.company_id.nombre_comercial,o.estado=o.isActive?"Activo":"Inactivo"}),C.value=t}catch(t){$("warning",t.response.data.message)}b.value=!1},Q=async(t,o)=>{try{const{data:{msg:e}}=await F.patch(`/router/${t}/${o}`);$("positive",e),h()}catch(e){console.log(e)}};L(N,(t,o)=>{t&&h()});const P=async t=>{try{B("Estas seguro de eliminar este router?",`/router/${t}`)}catch(o){console.log(o)}};h();const n=u("list"),T=u({rowsPerPage:10});return(t,o)=>(a(),p(y,null,[m("div",O,[m("div",W,[m("div",X,[i(H,{flat:"",class:"shadow_custom"},{default:r(()=>[i(V,{"title-class":"text-grey-7 text-h6",title:"Listado de Routers",rows:C.value,loading:b.value,"hide-header":n.value==="grid",columns:S,"row-key":"name",grid:n.value==="grid",filter:f.value,pagination:T.value},{header:r(e=>[i(E,{props:e,style:{height:"60px"}},{default:r(()=>[(a(!0),p(y,null,U(e.cols,s=>(a(),l(D,{key:s.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:r(()=>[w(_(s.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":r(e=>[!t.$q.screen.xs&&v(g).roles[0]=="Super-Administrador"?(a(),l(c,{key:0,onClick:o[0]||(o[0]=s=>t.$router.push({name:"router.add"})),outline:"",color:"primary",label:"Agregar Router",class:"q-mr-xs"})):d("",!0),i(G,{style:j(t.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=s=>f.value=s),placeholder:"Buscar..."},{append:r(()=>[i(k,{name:"search"})]),_:1},8,["style","modelValue"]),n.value==="list"?(a(),l(c,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:r(()=>[x((a(),l(A,{disable:t.$q.platform.is.mobile},{default:r(()=>[w(_(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[R]])]),_:2},1032,["icon","onClick"])):d("",!0),e.inFullscreen?d("",!0):(a(),l(c,{key:2,flat:"",round:"",dense:"",icon:n.value==="grid"?"list":"grid_on",onClick:o[2]||(o[2]=s=>{n.value=n.value==="grid"?"list":"grid",t.separator=n.value==="grid"?"none":"horizontal"})},{default:r(()=>[x((a(),l(A,{disable:t.$q.platform.is.mobile},{default:r(()=>[w(_(n.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[R]])]),_:1},8,["icon"]))]),"body-cell-estado":r(e=>[i(q,{props:e},{default:r(()=>[e.row.isActive?(a(),l(z,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(a(),l(z,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":r(e=>[i(q,{props:e},{default:r(()=>[e.row.isActive?(a(),l(c,{key:0,round:"",color:"blue-grey",onClick:s=>t.$router.push({name:"router.edit",params:{router_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):d("",!0),e.row.isActive?(a(),p(y,{key:1},[e.row.isActive&&v(g).roles[0]=="Super-Administrador"?(a(),l(c,{key:0,round:"",color:"blue-grey",icon:"close",onClick:s=>Q(e.row.id,!1),size:"10px"},null,8,["onClick"])):d("",!0)],64)):(a(),p(y,{key:2},[e.row.isActive?d("",!0):(a(),l(c,{key:0,round:"",color:"blue-grey",icon:"done",onClick:s=>Q(e.row.id,!0),size:"10px"},null,8,["onClick"])),!e.row.isActive&&v(g).roles[0]=="Super-Administrador"?(a(),l(c,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:s=>P(e.row.id),size:"10px"},null,8,["onClick"])):d("",!0)],64))]),_:2},1032,["props"])]),"no-data":r(({icon:e})=>[m("div",Y,[i(k,{size:"2em",name:"sentiment_dissatisfied"}),Z,i(k,{size:"2em",name:f.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),t.$q.screen.xs&&v(g).roles[0]=="Super-Administrador"?(a(),l(J,{key:0,position:"bottom-right",offset:[18,18]},{default:r(()=>[i(c,{round:"",color:"secondary",size:"lg",icon:"add",onClick:o[3]||(o[3]=e=>t.$router.push({name:"router.add"}))})]),_:1})):d("",!0)],64))}});export{ye as default};
