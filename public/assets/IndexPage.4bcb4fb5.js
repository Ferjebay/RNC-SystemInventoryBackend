import{Q as U,a as k,c as j,b as G}from"./QTable.7431d55d.js";import{Q as H,a as R}from"./QTooltip.0940f4ab.js";import{Q as M}from"./QSelect.d6ab8ec0.js";import{r as m,n as J,D as K,v as O,o as t,c as p,e as n,f as s,g as o,aP as W,a7 as r,ad as c,ah as b,ag as X,ab as z,ac as Y,h as u,Q as Z,aU as P,i as _,R as V,a8 as x,a9 as $}from"./index.34de80b5.js";import{Q as h}from"./QBadge.b4ba67fc.js";import{Q as ee}from"./QPageSticky.d0f5f161.js";import{C as A}from"./ClosePopup.37ecc5f4.js";import{api as N}from"./axios.aaa8af3b.js";import{u as le}from"./useHelpers.aa70fe88.js";import{u as te}from"./useRedIpv4.4a03f67a.js";import"./QList.3560f8ad.js";import"./QItemLabel.0f909c06.js";import"./QChip.f5fd7e9d.js";import"./format.2bc25e5f.js";import"./use-quasar.11100f5b.js";const oe={class:"q-ma-lg q-pt-md"},ae={class:"row q-col-gutter-lg"},se={class:"col-12"},re=n("label",{class:"q-mr-sm row items-center"},[n("span",null,"Router: ")],-1),ie={key:1,class:"text-center row justify-center",style:{width:"100%"}},ne=n("label",{class:"q-mb-sm text-grey-7 text-h6"}," Redes IPv4 ",-1),de=[ne],ce={class:"absolute-full flex justify-around"},ue={class:"full-width row flex-center text-lime-10 q-gutter-sm"},me=n("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),Re={__name:"IndexPage",setup(pe){const F=[{name:"acciones",label:"acciones",align:"center"},{align:"center",label:"Nombre",field:"nombre",name:"nombre"},{align:"center",label:"Red",field:"red",name:"red"},{align:"center",label:"Uso IPS",field:"uso_ips",name:"uso_ips"},{align:"center",label:"CIDR",name:"cidr",field:"cidr"},{align:"center",label:"Router",field:"router_name",name:"router_name"},{name:"estado",label:"Estado",align:"center",field:"estado"}],v=m("");let{listRouter:g,cargarRouter:B}=te();const{mostrarNotify:q,confirmDelete:D,isDeleted:T}=le(),f=m(""),C=m([]),w=m(!1),Q=m(.3),E=J(()=>(Q.value*100).toFixed(2)+"%"),y=async()=>{w.value=!0;try{let l={headers:{router_id:v.value}};const{data:a}=await N.get("/red-ipv4",l);a.forEach(e=>{console.log(e.cidr.split(" ")[0]),e.router_name=e.router_id.nombre,e.cidr=e.cidr.split(" ")[0]}),C.value=a}catch(l){q("warning",l.response.data.message)}w.value=!1},I=async(l,a)=>{try{const{data:{msg:e}}=await N.patch(`/red-ipv4/${l}/${a}`);q("positive",e),y()}catch(e){console.log(e)}};K(T,(l,a)=>{l&&y()});const S=async l=>{try{D("Estas seguro de eliminar esta red IPv4?",`/red-ipv4/${l}`)}catch(a){console.log(a)}};O(async()=>{await B(),g.value.length>0&&(v.value=g.value[0].value),y()});const d=m("list"),L=m({rowsPerPage:10});return(l,a)=>(t(),p(b,null,[n("div",oe,[n("div",ae,[n("div",se,[s(W,{flat:"",class:"shadow_custom"},{default:o(()=>[s(U,{"title-class":"text-grey-7 text-h6",title:"Redes IPv4",rows:C.value,loading:w.value,"hide-header":d.value==="grid",columns:F,"row-key":"name",grid:d.value==="grid",filter:f.value,pagination:L.value},{header:o(e=>[s(H,{props:e,style:{height:"60px"}},{default:o(()=>[(t(!0),p(b,null,X(e.cols,i=>(t(),r(G,{key:i.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:o(()=>[x($(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-left":o(e=>[z(g).length>1?(t(),p("div",{key:0,style:{display:"flex"},class:Y([l.$q.screen.xs?"q-mb-md":""])},[re,s(M,{outlined:"",dense:"",modelValue:v.value,"onUpdate:modelValue":[a[0]||(a[0]=i=>v.value=i),y],"emit-value":"","map-options":"",options:z(g)},null,8,["modelValue","options"])],2)):(t(),p("div",ie,de))]),"top-right":o(e=>[l.$q.screen.xs?c("",!0):(t(),r(u,{key:0,onClick:a[1]||(a[1]=i=>l.$router.push({name:"redesIpv4.add"})),outline:"",color:"primary",label:"Nuevo",class:"q-mr-xs"})),s(Z,{style:P(l.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=i=>f.value=i),placeholder:"Buscar..."},{append:o(()=>[s(_,{name:"search"})]),_:1},8,["style","modelValue"]),d.value==="list"?(t(),r(u,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:o(()=>[V((t(),r(R,{disable:l.$q.platform.is.mobile},{default:o(()=>[x($(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[A]])]),_:2},1032,["icon","onClick"])):c("",!0),e.inFullscreen?c("",!0):(t(),r(u,{key:2,flat:"",round:"",dense:"",icon:d.value==="grid"?"list":"grid_on",onClick:a[3]||(a[3]=i=>{d.value=d.value==="grid"?"list":"grid",l.separator=d.value==="grid"?"none":"horizontal"})},{default:o(()=>[V((t(),r(R,{disable:l.$q.platform.is.mobile},{default:o(()=>[x($(d.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[A]])]),_:1},8,["icon"]))]),"body-cell-uso_ips":o(e=>[s(k,{props:e},{default:o(()=>[(t(),p("div",{key:0,style:P(l.$q.screen.xs?"min-width: 180px;":"min-width: 140px;")},[s(j,{stripe:"",rounded:"",size:"25px",value:Q.value,color:"cyan-9"},{default:o(()=>[n("div",ce,[s(h,{color:"transparent",class:"text-weight-bold","text-color":l.$q.dark.isActive?"grey-3":"grey-9",label:E.value},null,8,["text-color","label"]),s(h,{color:"transparent",class:"text-weight-bolder","text-color":l.$q.dark.isActive?"grey-3":"grey-9",label:"(2 de 254)"},null,8,["text-color"])])]),_:1},8,["value"])],4))]),_:2},1032,["props"])]),"body-cell-estado":o(e=>[s(k,{props:e},{default:o(()=>[e.row.isActive?(t(),r(h,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(t(),r(h,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":o(e=>[s(k,{props:e},{default:o(()=>[e.row.isActive?(t(),r(u,{key:0,round:"",color:"blue-grey",onClick:i=>l.$router.push({name:"redesIpv4.edit",params:{id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):c("",!0),e.row.isActive?(t(),p(b,{key:1},[e.row.isActive?(t(),r(u,{key:0,round:"",color:"blue-grey",icon:"close",onClick:i=>I(e.row.id,!1),size:"10px"},null,8,["onClick"])):c("",!0)],64)):(t(),p(b,{key:2},[e.row.isActive?c("",!0):(t(),r(u,{key:0,round:"",color:"blue-grey",icon:"done",onClick:i=>I(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.isActive?c("",!0):(t(),r(u,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:i=>S(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":o(({icon:e})=>[n("div",ue,[s(_,{size:"2em",name:"sentiment_dissatisfied"}),me,s(_,{size:"2em",name:f.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),l.$q.screen.xs?(t(),r(ee,{key:0,position:"bottom-right",offset:[18,18]},{default:o(()=>[s(u,{round:"",color:"secondary",size:"lg",icon:"add",onClick:a[4]||(a[4]=e=>l.$router.push({name:"redesIpv4.add"}))})]),_:1})):c("",!0)],64))}};export{Re as default};
