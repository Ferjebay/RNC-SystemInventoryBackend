import{Q as ae,a as S,b as se}from"./QTable.fc3e737e.js";import{Q as ne,a as j}from"./QTooltip.5a826ced.js";import{r as v,B as ie,v as L,d as M,o as s,a7 as p,g as o,ab as t,e as n,ac as G,f as l,Q,h as _,aP as I,a8 as D,N as U,aQ as E,af as Y,c as k,ad as $,aS as V,aT as O,ah as z,ag as re,i as B,a9 as P}from"./index.63602cd2.js";import{Q as H}from"./QBadge.3ad7d9bf.js";import{Q as ue}from"./QPageSticky.8172df02.js";import{C as T}from"./ClosePopup.4ff1d69f.js";import{a as A}from"./axios.22257619.js";import{u as Z}from"./useHelpers.d026a779.js";import{Q as de}from"./QSelect.eb6986f4.js";import{Q as ce}from"./QForm.3f67d641.js";import"./QList.ad591dc3.js";import"./QItemLabel.b338ce31.js";import"./use-quasar.37c9aa3a.js";import"./QChip.8319138a.js";import"./format.2bc25e5f.js";const F=v(!1),r=v({nombres:"",tipo_documento:"",numero_documento:"",email:"",celular:"",direccion:""}),J=v(!1),W=v(!1),X=v(!1),K=()=>{const{mostrarNotify:x}=Z(),b=()=>{r.value.nombres="",r.value.tipo_documento="",r.value.numero_documento="",r.value.email="",r.value.celular="",r.value.direccion=""},i=()=>{r.value.numero_documento=r.value.numero_documento.replace(/\D/g,""),r.value.celular=r.value.celular.replace(/\D/g,"")};return ie(()=>{L(r.value,(a,y)=>{if(r.value.nombres=a.nombres.toUpperCase(),a.tipo_documento!==""&&a.tipo_documento!=="04"&&r.value.numero_documento.length>10){const C=a.numero_documento.length-10,q=a.numero_documento.substring(0,a.numero_documento.length-C);r.value.numero_documento=q}})}),{actualizarLista:X,formCliente:r,loading:F,limpiarFormulario:b,allowOnlyNumber:i,modalAgregarCliente:J,modalEditarCliente:W,validateNumDocument:[a=>a.length>=(r.value.tipo_documento==="04"?13:10)||`Debes completar ${r.value.tipo_documento==="04"?13:10} digitos`],validateNumCelular:[a=>a.length>=10||"Debes completar 10 digitos"],onSubmit:async a=>{try{F.value=!0,a?await A.patch("/customers/"+r.value.id,r.value):await A.post("/customers/create",r.value),x("positive",`Cliente ${a?"editado":"agregado"} exitosamente`),J.value=!1,W.value=!1,X.value=!0,F.value=!1}catch(y){x("warning",y.response.data.message),F.value=!1}}}},me={class:"row q-pt-lg q-gutter-lg justify-center"},pe=n("label",null,"Nombres:",-1),fe={class:"col-xs-12 col-sm-5"},_e=n("label",null,"Tipo de Documento:",-1),ge={class:"col-xs-12 col-sm-5"},ve=n("label",null,"Numero de Documento:",-1),be={class:"col-xs-12 col-sm-5"},ye=n("label",null,"Email:",-1),Ce={class:"col-xs-12 col-sm-5"},he=n("label",null,"Celular:",-1),xe=n("label",null,"Direcci\xF3n:",-1),we={class:"col-xs-9 col-sm-12 flex justify-center"},ee=M({__name:"FormCliente",props:{edit:{type:Boolean}},setup(x){const b=x,{formCliente:i,loading:u,allowOnlyNumber:a,validateNumDocument:y,validateNumCelular:C,onSubmit:q}=K();return(w,c)=>(s(),p(ce,{onSubmit:c[6]||(c[6]=f=>t(q)(b.edit))},{default:o(()=>[n("div",me,[n("div",{class:G(["col-xs-12 col-sm-11",[w.$q.screen.xs?"":"q-px-md"]])},[pe,l(Q,{modelValue:t(i).nombres,"onUpdate:modelValue":c[0]||(c[0]=f=>t(i).nombres=f),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])],2),n("div",fe,[_e,l(de,{dense:"",modelValue:t(i).tipo_documento,"onUpdate:modelValue":c[1]||(c[1]=f=>t(i).tipo_documento=f),modelModifiers:{trim:!0},filled:"","emit-value":"","map-options":"",options:[{label:"RUC",value:"04"},{label:"Cedula",value:"05"},{label:"Pasaporte",value:"06"}]},null,8,["modelValue"])]),n("div",ge,[ve,l(Q,{modelValue:t(i).numero_documento,"onUpdate:modelValue":c[2]||(c[2]=f=>t(i).numero_documento=f),disable:t(i).tipo_documento==="",counter:"",maxlength:t(i).tipo_documento==="04"?13:10,rules:t(y),"lazy-rules":"",dense:"",filled:"",required:"",onKeyup:t(a)},null,8,["modelValue","disable","maxlength","rules","onKeyup"])]),n("div",be,[ye,l(Q,{modelValue:t(i).email,"onUpdate:modelValue":c[3]||(c[3]=f=>t(i).email=f),modelModifiers:{trim:!0},type:"email",dense:"",filled:"",required:""},null,8,["modelValue"])]),n("div",Ce,[he,l(Q,{modelValue:t(i).celular,"onUpdate:modelValue":c[4]||(c[4]=f=>t(i).celular=f),modelModifiers:{trim:!0},counter:"",maxlength:"10",rules:t(C),"lazy-rules":"",onKeyup:t(a),dense:"",filled:"",required:""},null,8,["modelValue","rules","onKeyup"])]),n("div",{class:G(["col-xs-12 col-sm-11",[w.$q.screen.xs?"":"q-px-md"]])},[xe,l(Q,{modelValue:t(i).direccion,"onUpdate:modelValue":c[5]||(c[5]=f=>t(i).direccion=f),dense:"",filled:"",required:""},null,8,["modelValue"])],2),n("div",we,[l(_,{label:w.edit?"Editar":"Guardar",loading:t(u),class:"q-px-xl",type:"submit",color:"green-9"},null,8,["label","loading"])])])]),_:1}))}}),ke={class:"text-h6"},$e=M({__name:"AddCliente",setup(x){const{limpiarFormulario:b}=K();return b(),(i,u)=>(s(),p(I,{style:{width:"843px !important","max-width":"fit-content"}},{default:o(()=>[l(E,null,{default:o(()=>[n("div",ke,[D(" Agregar Cliente "),U(l(_,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[T]])])]),_:1}),l(Y,{inset:""}),l(E,{class:"q-pt-none"},{default:o(()=>[l(ee,{edit:!1})]),_:1})]),_:1}))}}),qe={class:"text-h6"},Ve=M({__name:"EditCliente",setup(x){return(b,i)=>(s(),p(I,{style:{width:"843px !important","max-width":"fit-content"}},{default:o(()=>[l(E,null,{default:o(()=>[n("div",qe,[D(" Editar Cliente "),U(l(_,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[T]])])]),_:1}),l(Y,{inset:""}),l(E,{class:"q-pt-none"},{default:o(()=>[l(ee,{edit:!0})]),_:1})]),_:1}))}}),Qe={class:"q-ma-lg q-pt-md"},De={class:"row q-col-gutter-lg"},Ne={class:"col-12"},ze={key:0},Fe={key:1},Ue={key:2},Ee={class:"full-width row flex-center text-lime-10 q-gutter-sm"},Te=n("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),Xe={__name:"IndexPage",setup(x){const b=[{name:"acciones",label:"acciones",align:"center"},{name:"nombre",align:"center",label:"Cliente",field:"nombres",sortable:!0},{name:"tipo_documento",align:"center",label:"Tipo de Documento",field:"tipo_documento"},{name:"numero_documento",align:"center",label:"Numero de Documento",field:"numero_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Celular",field:"celular",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{actualizarLista:i,modalAgregarCliente:u,modalEditarCliente:a,formCliente:y}=K();const C=v(""),q=v([]),w=v(!1),{mostrarNotify:c,confirmDelete:f,isDeleted:le}=Z();L(i,(m,d)=>{m&&N()});const N=async()=>{w.value=!0;try{const{data:m}=await A.get("/customers");q.value=m,i.value=!1}catch(m){c("warning",m.response.data.message)}w.value=!1},R=async(m,d)=>{try{const{data:{msg:e}}=await A.patch(`/customers/${m}/${d}`);c("positive",e),N()}catch(e){console.log(e)}};L(le,(m,d)=>{m&&N()});const oe=async m=>{try{f("Estas seguro de eliminar este cliente?",`/customers/${m}`)}catch(d){console.log(d)}};N();const h=v("list"),te=v({rowsPerPage:10});return(m,d)=>(s(),k(z,null,[n("div",Qe,[n("div",De,[n("div",Ne,[l(I,{flat:"",class:"shadow_custom"},{default:o(()=>[l(ae,{"title-class":"text-grey-7 text-h6",title:"Listado de Clientes",rows:q.value,loading:w.value,"hide-header":h.value==="grid",columns:b,"row-key":"name",grid:h.value==="grid",filter:C.value,pagination:te.value},{header:o(e=>[l(ne,{props:e,style:{height:"60px"}},{default:o(()=>[(s(!0),k(z,null,re(e.cols,g=>(s(),p(se,{key:g.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:o(()=>[D(P(g.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":o(e=>[m.$q.screen.xs?$("",!0):(s(),p(_,{key:0,onClick:d[0]||(d[0]=g=>V(u)?u.value=!t(u):u=!t(u)),outline:"",color:"primary",label:"Agregar Cliente",class:"q-mr-xs"})),l(Q,{outlined:"",dense:"",debounce:"300",modelValue:C.value,"onUpdate:modelValue":d[1]||(d[1]=g=>C.value=g),placeholder:"Buscar..."},{append:o(()=>[l(B,{name:"search"})]),_:1},8,["modelValue"]),h.value==="list"?(s(),p(_,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:o(()=>[U((s(),p(j,{disable:m.$q.platform.is.mobile},{default:o(()=>[D(P(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[T]])]),_:2},1032,["icon","onClick"])):$("",!0),e.inFullscreen?$("",!0):(s(),p(_,{key:2,flat:"",round:"",dense:"",icon:h.value==="grid"?"list":"grid_on",onClick:d[2]||(d[2]=g=>{h.value=h.value==="grid"?"list":"grid",m.separator=h.value==="grid"?"none":"horizontal"})},{default:o(()=>[U((s(),p(j,{disable:m.$q.platform.is.mobile},{default:o(()=>[D(P(h.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[T]])]),_:1},8,["icon"]))]),"body-cell-tipo_documento":o(e=>[l(S,{props:e},{default:o(()=>[n("div",null,[e.row.tipo_documento==4?(s(),k("label",ze,"RUC")):e.row.tipo_documento==5?(s(),k("label",Fe,"Cedula")):(s(),k("label",Ue,"Pasaporte"))])]),_:2},1032,["props"])]),"body-cell-estado":o(e=>[l(S,{props:e},{default:o(()=>[e.row.isActive?(s(),p(H,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(s(),p(H,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":o(e=>[l(S,{props:e},{default:o(()=>[l(_,{round:"",color:"blue-grey",onClick:g=>(V(y)?y.value={...e.row}:y={...e.row},V(a)?a.value=!0:a=!0),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"]),e.row.isActive?(s(),k(z,{key:0},[e.row.isActive?(s(),p(_,{key:0,round:"",color:"blue-grey",icon:"close",onClick:g=>R(e.row.id,!1),size:"10px"},null,8,["onClick"])):$("",!0)],64)):(s(),k(z,{key:1},[e.row.isActive?$("",!0):(s(),p(_,{key:0,round:"",color:"blue-grey",icon:"done",onClick:g=>R(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.estado?$("",!0):(s(),p(_,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:g=>oe(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":o(({icon:e})=>[n("div",Ee,[l(B,{size:"2em",name:"sentiment_dissatisfied"}),Te,l(B,{size:"2em",name:C.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),m.$q.screen.xs?(s(),p(ue,{key:0,position:"bottom-right",offset:[18,18]},{default:o(()=>[l(_,{round:"",color:"secondary",size:"lg",icon:"add",onClick:d[3]||(d[3]=e=>V(u)?u.value=!t(u):u=!t(u))})]),_:1})):$("",!0),l(O,{modelValue:t(u),"onUpdate:modelValue":d[4]||(d[4]=e=>V(u)?u.value=e:u=e)},{default:o(()=>[l($e)]),_:1},8,["modelValue"]),l(O,{modelValue:t(a),"onUpdate:modelValue":d[5]||(d[5]=e=>V(a)?a.value=e:a=e)},{default:o(()=>[l(Ve)]),_:1},8,["modelValue"])],64))}};export{Xe as default};
