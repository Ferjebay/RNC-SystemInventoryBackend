import{u as E}from"./useHelpers.e76a1553.js";import{api as m}from"./axios.17c54324.js";import{d as S}from"./date.71d9da42.js";import{r as o,v as y,D as C}from"./index.5dd10283.js";const l=o(!1),d=o(1),v=o(!1),F=o(!1),Y=o(!1),e=o({nombres:"",tipo_documento:"",numero_documento:"",email:"",celular:"",direccion:""}),$=o({tipo:"",dia_pago:"",crear_factura:"",tipo_impuesto:"",dia_gracia:"",aplicar_corte:""}),u=o({router_id:"",direccion:"",coordenadas:"",perfil_internet:"",precio:0,fecha_instalacion:S.formatDate(Date.now(),"YYYY/MM/DD")}),I=o({router_id:{message:"",isValid:!0},direccion:{message:"",isValid:!0},coordenadas:{message:"",isValid:!0},perfil_internet:{message:"",isValid:!0},precio:{message:"",isValid:!0},fecha_instalacion:{message:"",isValid:!0}}),M=o({tipo:{message:"",isValid:!0},dia_pago:{message:"",isValid:!0},crear_factura:{message:"",isValid:!0},tipo_impuesto:{message:"",isValid:!0},dia_gracia:{message:"",isValid:!0},aplicar_corte:{message:"",isValid:!0}}),t=o({nombres:{message:"",isValid:!0},tipo_documento:{message:"",isValid:!0},numero_documento:{message:"",isValid:!0},email:{message:"",isValid:!0},celular:{message:"",isValid:!0},direccion:{message:"",isValid:!0},company_id:{message:"",isValid:!0}}),P=()=>{const{claim:g,router:f,mostrarNotify:n,confirmDelete:p,isDeleted:_,route:V}=E(),c=["nombres","tipo_documento","numero_documento","email","celular","direccion"],h=()=>{e.value.nombres="",e.value.tipo_documento="",e.value.numero_documento="",e.value.email="",e.value.celular="",e.value.direccion=""},b=()=>{c.forEach(a=>{t.value[a].isValid=!0})},w=a=>{let r=0;r=u.value[a];const i=/^\d{0,9}(\.\d{1,2})?$/;setTimeout(function(){let s=0;if(s=u.value[a],!i.test(s.toString())){const x=parseFloat(r.toString().substring(0,r.toString().length-1));u.value[a]=x}},0)},D=()=>{let a=!1;var r=/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/;c.forEach(s=>{(e.value[s].length==0||e.value[s]==0)&&(t.value[s].message="Debes completar este campo",t.value[s].isValid=!1,a=!0)}),t.value.email.isValid&&!r.test(e.value.email)&&(t.value.email.message="Ingresa un email valido",t.value.email.isValid=!1,a=!0);let i;e.value.tipo_documento==="04"&&(i=13),e.value.tipo_documento==="05"&&(i=10),e.value.tipo_documento==="06"&&(i=10),t.value.numero_documento.isValid&&e.value.numero_documento.length!=i&&(t.value.numero_documento.message=`Debes completar ${i} digitos`,t.value.numero_documento.isValid=!1,a=!0),a||(v.value=!0,d.value=2)};return y(()=>{C(e.value,(a,r)=>{if(e.value.nombres=a.nombres.toUpperCase(),a.tipo_documento!==""&&a.tipo_documento!=="04"&&e.value.numero_documento.length>10){const i=a.numero_documento.length-10,s=a.numero_documento.substring(0,a.numero_documento.length-i);e.value.numero_documento=s}})}),{api:m,claim:g,formCliente:e,formFacturacion:$,loading:l,limpiarFormulario:h,validaciones:t,validacionesFacturacion:M,validarDatosPersonales:D,validacionesInternet:I,validDecimal:w,mostrarNotify:n,quitarErrores:b,confirmDelete:p,route:V,step:d,done1:v,done2:F,done3:Y,formInternet:u,isDeleted:_,onSubmit:async a=>{try{l.value=!0,a?await m.patch("/customers/"+e.value.id,e.value):await m.post("/customers",e.value),n("positive",`Cliente ${a?"editado":"agregado"} exitosamente`),l.value=!1,f.push({name:"cliente.index"})}catch(r){n("warning",r.response.data.message),l.value=!1}}}};export{P as u};
