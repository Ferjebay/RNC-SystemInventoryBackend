import{l as kt,b5 as St,I as Ht,K as Yt,bn as At,r as S,m as f,aZ as $t,C as ee,n as d,aD as se,p as Tt,z as Ot,bo as Ft,y as et,h as Y,d as Pt,a as It,u as jt,v as Ut,o as ue,c as $e,e as v,f as m,g as _,Q as E,af as p,ah as we,aQ as Te,bp as tt,ag as Oe,aR as at,ak as Bt,bq as Qt,P as Fe,w as Et,ac as Pe,i as Z,O as Nt,ab as lt,a$ as Rt,ad as xe}from"./index.88cb05d7.js";import{Q as ot,b as nt}from"./QItemLabel.232581a5.js";import{Q as rt}from"./QSelect.26491acf.js";import{u as zt,a as Lt,b as Wt,g as U,Q as Kt}from"./QPopupProxy.f29ce8df.js";import{t as st,f as Jt,g as Gt,j as Ie,_ as Zt,d as ut}from"./date.00124b6e.js";import{p as de}from"./format.2bc25e5f.js";import{Q as Xt,a as ie,b as ea}from"./QTable.ec8d9dd8.js";import{Q as ta}from"./QForm.41bfd5ab.js";import{C as aa}from"./ClosePopup.1fc8882d.js";import{api as je}from"./axios.db577692.js";import{u as la}from"./useHelpers.db8e640f.js";import{u as oa,a as na}from"./AddProveedor.01cad837.js";import{u as ra,_ as sa}from"./useProduct.c81f09fe.js";import{u as ua}from"./auth-user.13acf199.js";import"./QChip.b161a9cf.js";import"./QList.d95bd207.js";import"./use-quasar.7ae79f7d.js";import"./QInnerLoading.7cfc5fc8.js";function ia(){const l=new Map;return{getCache:function(T,x){return l[T]===void 0?l[T]=x:l[T]},getCacheWithFn:function(T,x){return l[T]===void 0?l[T]=x():l[T]}}}const N=20,da=["Calendar","Years","Months"],it=l=>da.includes(l),Ue=l=>/^-?[\d]+\/[0-1]\d$/.test(l),X=" \u2014 ";function B(l){return l.year+"/"+de(l.month)}var ca=kt({name:"QDate",props:{...zt,...St,...Ht,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Ue},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Ue},navigationMaxYearMonth:{type:String,validator:Ue},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:it}},emits:[...Lt,"rangeStart","rangeEnd","navigation"],setup(l,{slots:T,emit:x}){const{proxy:te}=Ot(),{$q:H}=te,ce=Yt(l,H),{getCache:q}=ia(),{tabindex:V,headerClass:ve,getLocale:me,getCurrentDate:fe}=Wt(l,H);let I;const Ce=At(l),he=Ft(Ce),O=S(null),A=S(Le()),y=S(me()),ae=f(()=>Le()),R=f(()=>me()),F=f(()=>fe()),u=S(We(A.value,y.value)),h=S(l.defaultView),ge=H.lang.rtl===!0?"right":"left",z=S(ge.value),le=S(ge.value),L=u.value.year,W=S(L-L%N-(L<0?N:0)),C=S(null),w=f(()=>{const e=l.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${l.minimal===!0?"minimal":"standard"}`+(ce.value===!0?" q-date--dark q-dark":"")+(l.bordered===!0?" q-date--bordered":"")+(l.square===!0?" q-date--square no-border-radius":"")+(l.flat===!0?" q-date--flat no-shadow":"")+(l.disable===!0?" disabled":l.readonly===!0?" q-date--readonly":"")}),i=f(()=>l.color||"primary"),s=f(()=>l.textColor||"white"),D=f(()=>l.emitImmediately===!0&&l.multiple!==!0&&l.range!==!0),De=f(()=>Array.isArray(l.modelValue)===!0?l.modelValue:l.modelValue!==null&&l.modelValue!==void 0?[l.modelValue]:[]),P=f(()=>De.value.filter(e=>typeof e=="string").map(e=>ke(e,A.value,y.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),K=f(()=>{const e=t=>ke(t,A.value,y.value);return De.value.filter(t=>$t(t)===!0&&t.from!==void 0&&t.to!==void 0).map(t=>({from:e(t.from),to:e(t.to)})).filter(t=>t.from.dateHash!==null&&t.to.dateHash!==null&&t.from.dateHash<t.to.dateHash)}),ye=f(()=>l.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const t=st(e.year,e.month,e.day);return new Date(t.gy,t.gm-1,t.gd)}),qe=f(()=>l.calendar==="persian"?U:(e,t,a)=>Jt(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),t===void 0?A.value:t,a===void 0?y.value:a,e.year,e.timezoneOffset)),oe=f(()=>P.value.length+K.value.reduce((e,t)=>e+1+Gt(ye.value(t.to),ye.value(t.from)),0)),Be=f(()=>{if(l.title!==void 0&&l.title!==null&&l.title.length!==0)return l.title;if(C.value!==null){const a=C.value.init,n=ye.value(a);return y.value.daysShort[n.getDay()]+", "+y.value.monthsShort[a.month-1]+" "+a.day+X+"?"}if(oe.value===0)return X;if(oe.value>1)return`${oe.value} ${y.value.pluralDay}`;const e=P.value[0],t=ye.value(e);return isNaN(t.valueOf())===!0?X:y.value.headerTitle!==void 0?y.value.headerTitle(t,e):y.value.daysShort[t.getDay()]+", "+y.value.monthsShort[e.month-1]+" "+e.day}),dt=f(()=>P.value.concat(K.value.map(t=>t.from)).sort((t,a)=>t.year-a.year||t.month-a.month)[0]),ct=f(()=>P.value.concat(K.value.map(t=>t.to)).sort((t,a)=>a.year-t.year||a.month-t.month)[0]),Qe=f(()=>{if(l.subtitle!==void 0&&l.subtitle!==null&&l.subtitle.length!==0)return l.subtitle;if(oe.value===0)return X;if(oe.value>1){const e=dt.value,t=ct.value,a=y.value.monthsShort;return a[e.month-1]+(e.year!==t.year?" "+e.year+X+a[t.month-1]+" ":e.month!==t.month?X+a[t.month-1]:"")+" "+t.year}return P.value[0].year}),_e=f(()=>{const e=[H.iconSet.datetime.arrowLeft,H.iconSet.datetime.arrowRight];return H.lang.rtl===!0?e.reverse():e}),Ee=f(()=>l.firstDayOfWeek!==void 0?Number(l.firstDayOfWeek):y.value.firstDayOfWeek),vt=f(()=>{const e=y.value.daysShort,t=Ee.value;return t>0?e.slice(t,7).concat(e.slice(0,t)):e}),j=f(()=>{const e=u.value;return l.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Ie(e.year,e.month)}),mt=f(()=>typeof l.eventColor=="function"?l.eventColor:()=>l.eventColor),M=f(()=>{if(l.navigationMinYearMonth===void 0)return null;const e=l.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),k=f(()=>{if(l.navigationMaxYearMonth===void 0)return null;const e=l.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),Ve=f(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return M.value!==null&&M.value.year>=u.value.year&&(e.year.prev=!1,M.value.year===u.value.year&&M.value.month>=u.value.month&&(e.month.prev=!1)),k.value!==null&&k.value.year<=u.value.year&&(e.year.next=!1,k.value.year===u.value.year&&k.value.month<=u.value.month&&(e.month.next=!1)),e}),be=f(()=>{const e={};return P.value.forEach(t=>{const a=B(t);e[a]===void 0&&(e[a]=[]),e[a].push(t.day)}),e}),Ne=f(()=>{const e={};return K.value.forEach(t=>{const a=B(t.from),n=B(t.to);if(e[a]===void 0&&(e[a]=[]),e[a].push({from:t.from.day,to:a===n?t.to.day:void 0,range:t}),a<n){let o;const{year:g,month:r}=t.from,c=r<12?{year:g,month:r+1}:{year:g+1,month:1};for(;(o=B(c))<=n;)e[o]===void 0&&(e[o]=[]),e[o].push({from:void 0,to:o===n?t.to.day:void 0,range:t}),c.month++,c.month>12&&(c.year++,c.month=1)}}),e}),ne=f(()=>{if(C.value===null)return;const{init:e,initHash:t,final:a,finalHash:n}=C.value,[o,g]=t<=n?[e,a]:[a,e],r=B(o),c=B(g);if(r!==$.value&&c!==$.value)return;const b={};return r===$.value?(b.from=o.day,b.includeFrom=!0):b.from=1,c===$.value?(b.to=g.day,b.includeTo=!0):b.to=j.value,b}),$=f(()=>B(u.value)),ft=f(()=>{const e={};if(l.options===void 0){for(let a=1;a<=j.value;a++)e[a]=!0;return e}const t=typeof l.options=="function"?l.options:a=>l.options.includes(a);for(let a=1;a<=j.value;a++){const n=$.value+"/"+de(a);e[a]=t(n)}return e}),ht=f(()=>{const e={};if(l.events===void 0)for(let t=1;t<=j.value;t++)e[t]=!1;else{const t=typeof l.events=="function"?l.events:a=>l.events.includes(a);for(let a=1;a<=j.value;a++){const n=$.value+"/"+de(a);e[a]=t(n)===!0&&mt.value(n)}}return e}),gt=f(()=>{let e,t;const{year:a,month:n}=u.value;if(l.calendar!=="persian")e=new Date(a,n-1,1),t=new Date(a,n-1,0).getDate();else{const o=st(a,n,1);e=new Date(o.gy,o.gm-1,o.gd);let g=n-1,r=a;g===0&&(g=12,r--),t=Ie(r,g)}return{days:e.getDay()-Ee.value-1,endDay:t}}),Re=f(()=>{const e=[],{days:t,endDay:a}=gt.value,n=t<0?t+7:t;if(n<6)for(let r=a-n;r<=a;r++)e.push({i:r,fill:!0});const o=e.length;for(let r=1;r<=j.value;r++){const c={i:r,event:ht.value[r],classes:[]};ft.value[r]===!0&&(c.in=!0,c.flat=!0),e.push(c)}if(be.value[$.value]!==void 0&&be.value[$.value].forEach(r=>{const c=o+r-1;Object.assign(e[c],{selected:!0,unelevated:!0,flat:!1,color:i.value,textColor:s.value})}),Ne.value[$.value]!==void 0&&Ne.value[$.value].forEach(r=>{if(r.from!==void 0){const c=o+r.from-1,b=o+(r.to||j.value)-1;for(let re=c;re<=b;re++)Object.assign(e[re],{range:r.range,unelevated:!0,color:i.value,textColor:s.value});Object.assign(e[c],{rangeFrom:!0,flat:!1}),r.to!==void 0&&Object.assign(e[b],{rangeTo:!0,flat:!1})}else if(r.to!==void 0){const c=o+r.to-1;for(let b=o;b<=c;b++)Object.assign(e[b],{range:r.range,unelevated:!0,color:i.value,textColor:s.value});Object.assign(e[c],{flat:!1,rangeTo:!0})}else{const c=o+j.value-1;for(let b=o;b<=c;b++)Object.assign(e[b],{range:r.range,unelevated:!0,color:i.value,textColor:s.value})}}),ne.value!==void 0){const r=o+ne.value.from-1,c=o+ne.value.to-1;for(let b=r;b<=c;b++)e[b].color=i.value,e[b].editRange=!0;ne.value.includeFrom===!0&&(e[r].editRangeFrom=!0),ne.value.includeTo===!0&&(e[c].editRangeTo=!0)}u.value.year===F.value.year&&u.value.month===F.value.month&&(e[o+F.value.day-1].today=!0);const g=e.length%7;if(g>0){const r=7-g;for(let c=1;c<=r;c++)e.push({i:c,fill:!0})}return e.forEach(r=>{let c="q-date__calendar-item ";r.fill===!0?c+="q-date__calendar-item--fill":(c+=`q-date__calendar-item--${r.in===!0?"in":"out"}`,r.range!==void 0&&(c+=` q-date__range${r.rangeTo===!0?"-to":r.rangeFrom===!0?"-from":""}`),r.editRange===!0&&(c+=` q-date__edit-range${r.editRangeFrom===!0?"-from":""}${r.editRangeTo===!0?"-to":""}`),(r.range!==void 0||r.editRange===!0)&&(c+=` text-${r.color}`)),r.classes=c}),e}),yt=f(()=>l.disable===!0?{"aria-disabled":"true"}:l.readonly===!0?{"aria-readonly":"true"}:{});ee(()=>l.modelValue,e=>{if(I===e)I=0;else{const t=We(A.value,y.value);J(t.year,t.month,t)}}),ee(h,()=>{O.value!==null&&te.$el.contains(document.activeElement)===!0&&O.value.focus()}),ee(()=>u.value.year+"|"+u.value.month,()=>{x("navigation",{year:u.value.year,month:u.value.month})}),ee(ae,e=>{Xe(e,y.value,"mask"),A.value=e}),ee(R,e=>{Xe(A.value,e,"locale"),y.value=e});function ze(){const e=F.value,t=be.value[B(e)];(t===void 0||t.includes(e.day)===!1)&&He(e),Me(e.year,e.month)}function _t(e){it(e)===!0&&(h.value=e)}function bt(e,t){["month","year"].includes(e)&&(e==="month"?Je:Se)(t===!0?-1:1)}function Me(e,t){h.value="Calendar",J(e,t)}function pt(e,t){if(l.range===!1||!e){C.value=null;return}const a=Object.assign({...u.value},e),n=t!==void 0?Object.assign({...u.value},t):a;C.value={init:a,initHash:U(a),final:n,finalHash:U(n)},Me(a.year,a.month)}function Le(){return l.calendar==="persian"?"YYYY/MM/DD":l.mask}function ke(e,t,a){return Zt(e,t,a,l.calendar,{hour:0,minute:0,second:0,millisecond:0})}function We(e,t){const a=Array.isArray(l.modelValue)===!0?l.modelValue:l.modelValue?[l.modelValue]:[];if(a.length===0)return Ke();const n=a[a.length-1],o=ke(n.from!==void 0?n.from:n,e,t);return o.dateHash===null?Ke():o}function Ke(){let e,t;if(l.defaultYearMonth!==void 0){const a=l.defaultYearMonth.split("/");e=parseInt(a[0],10),t=parseInt(a[1],10)}else{const a=F.value!==void 0?F.value:fe();e=a.year,t=a.month}return{year:e,month:t,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+de(t)+"/01"}}function Je(e){let t=u.value.year,a=Number(u.value.month)+e;a===13?(a=1,t++):a===0&&(a=12,t--),J(t,a),D.value===!0&&pe("month")}function Se(e){const t=Number(u.value.year)+e;J(t,u.value.month),D.value===!0&&pe("year")}function wt(e){J(e,u.value.month),h.value=l.defaultView==="Years"?"Months":"Calendar",D.value===!0&&pe("year")}function xt(e){J(u.value.year,e),h.value="Calendar",D.value===!0&&pe("month")}function Ct(e,t){const a=be.value[t];(a!==void 0&&a.includes(e.day)===!0?Ye:He)(e)}function Q(e){return{year:e.year,month:e.month,day:e.day}}function J(e,t,a){if(M.value!==null&&e<=M.value.year&&(e=M.value.year,t<M.value.month&&(t=M.value.month)),k.value!==null&&e>=k.value.year&&(e=k.value.year,t>k.value.month&&(t=k.value.month)),a!==void 0){const{hour:o,minute:g,second:r,millisecond:c,timezoneOffset:b,timeHash:re}=a;Object.assign(u.value,{hour:o,minute:g,second:r,millisecond:c,timezoneOffset:b,timeHash:re})}const n=e+"/"+de(t)+"/01";n!==u.value.dateHash&&(z.value=u.value.dateHash<n==(H.lang.rtl!==!0)?"left":"right",e!==u.value.year&&(le.value=z.value),et(()=>{W.value=e-e%N-(e<0?N:0),Object.assign(u.value,{year:e,month:t,day:1,dateHash:n})}))}function Ge(e,t,a){const n=e!==null&&e.length===1&&l.multiple===!1?e[0]:e;I=n;const{reason:o,details:g}=Ze(t,a);x("update:modelValue",n,o,g)}function pe(e){const t=P.value[0]!==void 0&&P.value[0].dateHash!==null?{...P.value[0]}:{...u.value};et(()=>{t.year=u.value.year,t.month=u.value.month;const a=l.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Ie(t.year,t.month);t.day=Math.min(Math.max(1,t.day),a);const n=G(t);I=n;const{details:o}=Ze("",t);x("update:modelValue",n,e,o)})}function Ze(e,t){return t.from!==void 0?{reason:`${e}-range`,details:{...Q(t.target),from:Q(t.from),to:Q(t.to)}}:{reason:`${e}-day`,details:Q(t)}}function G(e,t,a){return e.from!==void 0?{from:qe.value(e.from,t,a),to:qe.value(e.to,t,a)}:qe.value(e,t,a)}function He(e){let t;if(l.multiple===!0)if(e.from!==void 0){const a=U(e.from),n=U(e.to),o=P.value.filter(r=>r.dateHash<a||r.dateHash>n),g=K.value.filter(({from:r,to:c})=>c.dateHash<a||r.dateHash>n);t=o.concat(g).concat(e).map(r=>G(r))}else{const a=De.value.slice();a.push(G(e)),t=a}else t=G(e);Ge(t,"add",e)}function Ye(e){if(l.noUnset===!0)return;let t=null;if(l.multiple===!0&&Array.isArray(l.modelValue)===!0){const a=G(e);e.from!==void 0?t=l.modelValue.filter(n=>n.from!==void 0?n.from!==a.from&&n.to!==a.to:!0):t=l.modelValue.filter(n=>n!==a),t.length===0&&(t=null)}Ge(t,"remove",e)}function Xe(e,t,a){const n=P.value.concat(K.value).map(o=>G(o,e,t)).filter(o=>o.from!==void 0?o.from.dateHash!==null&&o.to.dateHash!==null:o.dateHash!==null);x("update:modelValue",(l.multiple===!0?n:n[0])||null,a)}function Dt(){if(l.minimal!==!0)return d("div",{class:"q-date__header "+ve.value},[d("div",{class:"relative-position"},[d(se,{name:"q-transition--fade"},()=>d("div",{key:"h-yr-"+Qe.value,class:"q-date__header-subtitle q-date__header-link "+(h.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:V.value,...q("vY",{onClick(){h.value="Years"},onKeyup(e){e.keyCode===13&&(h.value="Years")}})},[Qe.value]))]),d("div",{class:"q-date__header-title relative-position flex no-wrap"},[d("div",{class:"relative-position col"},[d(se,{name:"q-transition--fade"},()=>d("div",{key:"h-sub"+Be.value,class:"q-date__header-title-label q-date__header-link "+(h.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:V.value,...q("vC",{onClick(){h.value="Calendar"},onKeyup(e){e.keyCode===13&&(h.value="Calendar")}})},[Be.value]))]),l.todayBtn===!0?d(Y,{class:"q-date__header-today self-start",icon:H.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:V.value,onClick:ze}):null])])}function Ae({label:e,type:t,key:a,dir:n,goTo:o,boundaries:g,cls:r}){return[d("div",{class:"row items-center q-date__arrow"},[d(Y,{round:!0,dense:!0,size:"sm",flat:!0,icon:_e.value[0],tabindex:V.value,disable:g.prev===!1,...q("go-#"+t,{onClick(){o(-1)}})})]),d("div",{class:"relative-position overflow-hidden flex flex-center"+r},[d(se,{name:"q-transition--jump-"+n},()=>d("div",{key:a},[d(Y,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:V.value,...q("view#"+t,{onClick:()=>{h.value=t}})})]))]),d("div",{class:"row items-center q-date__arrow"},[d(Y,{round:!0,dense:!0,size:"sm",flat:!0,icon:_e.value[1],tabindex:V.value,disable:g.next===!1,...q("go+#"+t,{onClick(){o(1)}})})])]}const qt={Calendar:()=>[d("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[d("div",{class:"q-date__navigation row items-center no-wrap"},Ae({label:y.value.months[u.value.month-1],type:"Months",key:u.value.month,dir:z.value,goTo:Je,boundaries:Ve.value.month,cls:" col"}).concat(Ae({label:u.value.year,type:"Years",key:u.value.year,dir:le.value,goTo:Se,boundaries:Ve.value.year,cls:""}))),d("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},vt.value.map(e=>d("div",{class:"q-date__calendar-item"},[d("div",e)]))),d("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[d(se,{name:"q-transition--slide-"+z.value},()=>d("div",{key:$.value,class:"q-date__calendar-days fit"},Re.value.map(e=>d("div",{class:e.classes},[e.in===!0?d(Y,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:V.value,...q("day#"+e.i,{onClick:()=>{Vt(e.i)},onMouseover:()=>{Mt(e.i)}})},e.event!==!1?()=>d("div",{class:"q-date__event bg-"+e.event}):null):d("div",""+e.i)]))))])])],Months(){const e=u.value.year===F.value.year,t=n=>M.value!==null&&u.value.year===M.value.year&&M.value.month>n||k.value!==null&&u.value.year===k.value.year&&k.value.month<n,a=y.value.monthsShort.map((n,o)=>{const g=u.value.month===o+1;return d("div",{class:"q-date__months-item flex flex-center"},[d(Y,{class:e===!0&&F.value.month===o+1?"q-date__today":null,flat:g!==!0,label:n,unelevated:g,color:g===!0?i.value:null,textColor:g===!0?s.value:null,tabindex:V.value,disable:t(o+1),...q("month#"+o,{onClick:()=>{xt(o+1)}})})])});return l.yearsInMonthView===!0&&a.unshift(d("div",{class:"row no-wrap full-width"},[Ae({label:u.value.year,type:"Years",key:u.value.year,dir:le.value,goTo:Se,boundaries:Ve.value.year,cls:" col"})])),d("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},a)},Years(){const e=W.value,t=e+N,a=[],n=o=>M.value!==null&&M.value.year>o||k.value!==null&&k.value.year<o;for(let o=e;o<=t;o++){const g=u.value.year===o;a.push(d("div",{class:"q-date__years-item flex flex-center"},[d(Y,{key:"yr"+o,class:F.value.year===o?"q-date__today":null,flat:!g,label:o,dense:!0,unelevated:g,color:g===!0?i.value:null,textColor:g===!0?s.value:null,tabindex:V.value,disable:n(o),...q("yr#"+o,{onClick:()=>{wt(o)}})})]))}return d("div",{class:"q-date__view q-date__years flex flex-center"},[d("div",{class:"col-auto"},[d(Y,{round:!0,dense:!0,flat:!0,icon:_e.value[0],tabindex:V.value,disable:n(e),...q("y-",{onClick:()=>{W.value-=N}})})]),d("div",{class:"q-date__years-content col self-stretch row items-center"},a),d("div",{class:"col-auto"},[d(Y,{round:!0,dense:!0,flat:!0,icon:_e.value[1],tabindex:V.value,disable:n(t),...q("y+",{onClick:()=>{W.value+=N}})})])])}};function Vt(e){const t={...u.value,day:e};if(l.range===!1){Ct(t,$.value);return}if(C.value===null){const a=Re.value.find(o=>o.fill!==!0&&o.i===e);if(l.noUnset!==!0&&a.range!==void 0){Ye({target:t,from:a.range.from,to:a.range.to});return}if(a.selected===!0){Ye(t);return}const n=U(t);C.value={init:t,initHash:n,final:t,finalHash:n},x("rangeStart",Q(t))}else{const a=C.value.initHash,n=U(t),o=a<=n?{from:C.value.init,to:t}:{from:t,to:C.value.init};C.value=null,He(a===n?t:{target:t,...o}),x("rangeEnd",{from:Q(o.from),to:Q(o.to)})}}function Mt(e){if(C.value!==null){const t={...u.value,day:e};Object.assign(C.value,{final:t,finalHash:U(t)})}}return Object.assign(te,{setToday:ze,setView:_t,offsetCalendar:bt,setCalendarTo:Me,setEditingRange:pt}),()=>{const e=[d("div",{class:"q-date__content col relative-position"},[d(se,{name:"q-transition--fade"},qt[h.value])])],t=Tt(T.default);return t!==void 0&&e.push(d("div",{class:"q-date__actions"},t)),l.name!==void 0&&l.disable!==!0&&he(e,"push"),d("div",{class:w.value,...yt.value},[Dt(),d("div",{ref:O,class:"q-date__main col column",tabindex:-1},e)])}}});const va={class:"row q-pt-lg q-gutter-md justify-center"},ma={class:"col-xs-10 col-md-5 q-mt-lg"},fa=v("label",null,"Seleccionar Proveedor: ",-1),ha={class:"col-xs-10 col-md-3 q-mt-lg"},ga=v("label",null,"Numero de Comprobante: ",-1),ya={class:"col-xs-10 col-md-3 q-mt-lg q-ml-md"},_a=v("label",null,"Fecha de compra: ",-1),ba={class:"row items-center justify-end"},pa={key:0,class:"col-xs-10 col-md-5 q-ml-none"},wa=v("label",null,"Seleccionar Sucursal: ",-1),xa={key:1,class:"col-xs-10 col-md-5"},Ca=v("label",null,"Filtrar por codigo de barra o nombre del producto:",-1),Da={class:"col-xs-10 col-md-6"},qa=v("label",null,"Descripci\xF3n: ",-1),Va={class:"col-xs-10 col-sm-10 col-md-5"},Ma=v("label",null,"Filtrar por codigo de barra o nombre del producto: ",-1),ka={class:"row q-ma-lg q-pt-md justify-center"},Sa={class:"col-xs-11 col-md-12"},Ha={class:"full-width row flex-center text-lime-10 q-gutter-sm"},Ya=v("span",{class:"text-subtitle1"}," Agrega alg\xFAn Producto ",-1),Aa={class:"col-xs-11 col-md-12",style:{display:"flex","justify-content":"end"}},$a={class:"text-right"},Ta=v("td",null,[v("b",null,"SUBTOTAL:")],-1),Oa={style:{width:"90px"},class:"text-subtitle1 text-weight-regular"},Fa={class:"text-right"},Pa=v("td",{class:"q-py-sm"},[v("b",null,"IVA(12%):")],-1),Ia={style:{width:"90px"},class:"q-py-sm text-subtitle1 text-weight-regular"},ja={class:"text-right"},Ua=v("td",{class:"q-py-sm"},[v("b",null,"TOTAL DESCUENTO:")],-1),Ba={style:{width:"90px"},class:"q-py-sm text-subtitle1 text-weight-regular"},Qa={class:"text-right"},Ea=v("td",null,[v("b",null,"TOTAL DE COMPRA:")],-1),Na={style:{width:"90px"}},Ra={class:"col-md-4 q-mt-md"},dl=Pt({__name:"AddCompra",setup(l){const{agregarAndValidarStock:T,filterByCodBarra:x,columns:te,rows:H,filterArticulo:ce,modalSelectProducto:q,getSubtotalByProduct:V,loadingState:ve,listProductos:me,quitarArticulo:fe,valorFactura:I}=ra();let{actualizarLista:Ce}=oa(),he=[];const O=S([]),A=S(!1),{mostrarNotify:y}=la(),ae=S([]),R=S(""),F=ua(),{claim:u}=It.read(F.token),h=S({proveedor_id:"",numero_comprobante:"",descripcion:"",inputDate:ut.formatDate(Date.now(),"YYYY/MM/DD")}),ge=jt(),z=w=>{T(w,"compras"),q.value=!1},le=async w=>{ae.value=[];const{data:i}=await je.get(`/sucursal/find/${w}/company`);i.forEach(s=>{ae.value.push({label:s.nombre,value:s.id})})};ee(Ce,(w,i)=>{w&&L()});const L=async()=>{A.value=!1;try{const{data:w}=await je.get("/providers/true");O.value=[],w.forEach(i=>{O.value.push({label:i.razon_social,value:i.id,num_doc:i.numero_documento})}),he=O.value}catch(w){console.log(w)}},W=async()=>{if(h.value.proveedor_id=="")return y("warning","Debes elegir algun proveedor");if(h.value.numero_comprobante=="")return y("warning","Por favor ingresa el numero de comprobante");if(h.value.descripcion=="")return y("warning","Por favor ingresa una descripci\xF3n");if((u.roles[0]=="Super-Administrador"||u.roles[0]=="Administrador")&&R.value=="")return y("warning","Debes seleccionar una sucursal");if(H.value.length==0)return y("warning","Debes agregar algun producto..");h.value.products=H.value,h.value={...h.value,...I.value,fecha_compra:ut.formatDate(h.value.inputDate,"YYYY-MM-DD"),user_id:u.id},Qt.create({title:"\xBFDeseas Agregar esta Compra?",ok:{push:!0,label:"Agregar"},cancel:{push:!0,color:"blue-grey-6",label:"Cancelar"}}).onOk(async()=>{try{Fe.show({message:"Cargando..."});let w={headers:{sucursal_id:R.value}};await je.post("/buys",h.value,w),Fe.hide(),y("positive","Compra realizada exitosamente"),ge.push("/compras")}catch(w){y("warning",w.response.data.message[0]),Fe.hide()}})};(u.roles[0]=="Super-Administrador"||u.roles[0]=="Administrador")&&le(u.company.id),L();const C=(w="",i)=>{if(w==="")return i(()=>{O.value=he});i(()=>{const s=w.toLowerCase();O.value=O.value.filter(D=>D.num_doc.indexOf(s)>-1||D.label.toLowerCase().indexOf(s)>-1)})};return Ut(()=>{H.value=[]}),(w,i)=>(ue(),$e(Bt,null,[v("div",va,[v("div",ma,[fa,m(rt,{color:"orange",filled:"",modelValue:h.value.proveedor_id,"onUpdate:modelValue":i[1]||(i[1]=s=>h.value.proveedor_id=s),dense:"",options:O.value,"emit-value":"","map-options":"",onFilter:C,"use-input":"","input-debounce":"0"},{append:_(()=>[m(Y,{round:"",dense:"",flat:"",icon:"person_add",onClick:i[0]||(i[0]=Et(s=>A.value=!0,["stop","prevent"]))})]),"no-option":_(()=>[m(ot,null,{default:_(()=>[m(nt,{class:"text-grey"},{default:_(()=>[Pe(" No hay resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),v("div",ha,[ga,m(E,{modelValue:h.value.numero_comprobante,"onUpdate:modelValue":i[2]||(i[2]=s=>h.value.numero_comprobante=s),filled:"",mask:"###-###-#########","fill-mask":"",dense:"",required:""},null,8,["modelValue"])]),v("div",ya,[_a,m(E,{filled:"",dense:"",modelValue:h.value.inputDate,"onUpdate:modelValue":i[4]||(i[4]=s=>h.value.inputDate=s),mask:"date",rules:["date"]},{append:_(()=>[m(Z,{name:"event",class:"cursor-pointer"},{default:_(()=>[m(Kt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:_(()=>[m(ca,{modelValue:h.value.inputDate,"onUpdate:modelValue":i[3]||(i[3]=s=>h.value.inputDate=s)},{default:_(()=>[v("div",ba,[Nt(m(Y,{label:"Close",color:"primary",flat:""},null,512),[[aa]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),p(u).roles[0]=="Super-Administrador"||p(u).roles[0]=="Administrador"?(ue(),$e("div",pa,[wa,m(rt,{filled:"",modelValue:R.value,"onUpdate:modelValue":i[5]||(i[5]=s=>R.value=s),options:ae.value,"emit-value":"","map-options":"",dense:""},{"no-option":_(()=>[m(ot,null,{default:_(()=>[m(nt,{class:"text-grey"},{default:_(()=>[Pe(" No se encontro sucursal ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])])):we("",!0),p(u).roles[0]!=="Super-Administrador"&&p(u).roles[0]!=="Administrador"?(ue(),$e("div",xa,[Ca,m(E,{outlined:"","bottom-slots":"",loading:p(ve),dense:"",modelValue:p(x),"onUpdate:modelValue":i[7]||(i[7]=s=>Te(x)?x.value=s:null),modelModifiers:{trim:!0},onKeyup:i[8]||(i[8]=tt(s=>p(ce)("compras"),["enter"]))},{append:_(()=>[p(x)!==""?(ue(),lt(Z,{key:0,name:"close",onClick:i[6]||(i[6]=s=>x.value=""),class:"cursor-pointer"})):we("",!0),m(Z,{name:"search"})]),_:1},8,["loading","modelValue"])])):we("",!0),v("div",Da,[qa,m(E,{modelValue:h.value.descripcion,"onUpdate:modelValue":i[9]||(i[9]=s=>h.value.descripcion=s),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])])]),v("div",{class:Oe(["row q-pt-lg q-gutter-md",[w.$q.screen.width<=1023?"justify-center":"justify-left q-ml-md"]])},[v("div",Va,[Ma,m(E,{outlined:"","bottom-slots":"",loading:p(ve),dense:"",modelValue:p(x),"onUpdate:modelValue":i[11]||(i[11]=s=>Te(x)?x.value=s:null),modelModifiers:{trim:!0},onKeyup:i[12]||(i[12]=tt(s=>p(ce)("compras"),["enter"]))},{append:_(()=>[p(x)!==""?(ue(),lt(Z,{key:0,name:"close",onClick:i[10]||(i[10]=s=>x.value=""),class:"cursor-pointer"})):we("",!0),m(Z,{name:"search"})]),_:1},8,["loading","modelValue"])])],2),m(ta,{onSubmit:W},{default:_(()=>[v("div",ka,[v("div",Sa,[m(Xt,{rows:p(H),columns:p(te),"row-key":"name","hide-pagination":!0,"rows-per-page-options":[50],class:Oe([w.$q.dark.isActive?"":"my-sticky-header-table3"])},{"no-data":_(({})=>[v("div",Ha,[Ya,m(Z,{size:"2em",name:"playlist_add"})])]),"body-cell-cantidad":_(s=>[m(ie,{props:s},{default:_(()=>[m(E,{"input-class":"resaltarTextoInput",dense:"",required:"",onChange:D=>p(V)(s.row),min:"0",type:"number",style:{width:"100px"},modelValue:s.row.cantidad,"onUpdate:modelValue":D=>s.row.cantidad=D,modelModifiers:{trim:!0}},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-iva":_(s=>[m(ie,{props:s},{default:_(()=>[m(Rt,{modelValue:s.row.aplicaIva,"onUpdate:modelValue":D=>s.row.aplicaIva=D},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-descuento":_(s=>[m(ie,{props:s},{default:_(()=>[m(E,{"input-class":"resaltarTextoInput",dense:"",required:"",min:"0",onChange:D=>p(V)(s.row),type:"number",style:{width:"100px"},modelValue:s.row.descuento,"onUpdate:modelValue":D=>s.row.descuento=D,modelModifiers:{trim:!0}},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-pvm":_(s=>[m(ie,{props:s},{default:_(()=>[Pe(" $"+xe(s.row.precio_compra),1)]),_:2},1032,["props"])]),"body-cell-acciones":_(s=>[m(ie,{props:s},{default:_(()=>[m(Y,{round:"",color:"deep-orange",onClick:D=>p(fe)(s.row.id),icon:"close",size:"8px"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","class"])]),v("div",Aa,[v("table",{class:Oe([w.$q.screen.xs?"":"linearTablaDetalle"])},[v("tr",$a,[Ta,v("td",Oa," $"+xe(p(I).subtotal),1)]),v("tr",Fa,[Pa,v("td",Ia," $"+xe(p(I).iva),1)]),v("tr",ja,[Ua,v("td",Ba," $"+xe(p(I).descuento),1)]),v("tr",Qa,[Ea,v("td",Na,[m(ea,{outline:"",class:"text-subtitle1 text-weight-bold",color:"secondary",label:`$${p(I).total}`},null,8,["label"])])])],2)]),v("div",Ra,[m(Y,{square:"",color:"green-10",type:"submit",label:"Agregar Compra",class:"full-width",icon:"shopping_cart"})])])]),_:1}),m(at,{modelValue:A.value,"onUpdate:modelValue":i[13]||(i[13]=s=>A.value=s)},{default:_(()=>[m(na)]),_:1},8,["modelValue"]),m(at,{modelValue:p(q),"onUpdate:modelValue":i[14]||(i[14]=s=>Te(q)?q.value=s:null)},{default:_(()=>[m(sa,{listProductos:p(me),onAgregarProduct:z},null,8,["listProductos"])]),_:1},8,["modelValue"])],64))}});export{dl as default};
