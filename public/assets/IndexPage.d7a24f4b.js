import{Q as R,a as Q,b as U}from"./QTable.a6eed54e.js";import{Q as L,a as N}from"./QTooltip.607ea652.js";import{Q as O}from"./QSelect.57fbc56d.js";import{d as j,r as p,v as H,o as l,c as f,e as m,f as n,g as t,aU as M,ad as c,a9 as o,af as i,aj as v,ai as G,ae as J,h as d,Q as K,bc as W,i as X,O as A,aa as _,ab as x}from"./index.e3eab811.js";import{Q as D}from"./QBadge.2f39c146.js";import{Q as Y}from"./QPageSticky.fbad4b5f.js";import{C as F}from"./ClosePopup.f52126f3.js";import{u as Z}from"./useHelpers.ba7357b2.js";import{u as ee}from"./useSucursal.02de2188.js";import{u as ae}from"./useRolPermisos.ba10dfd6.js";import"./QList.876a2ede.js";import"./format.cdb105f3.js";import"./use-quasar.b74492d8.js";import"./axios.f0c5ece9.js";const le={class:"q-ma-lg q-pt-md"},se={class:"row q-col-gutter-lg"},te={class:"col-12"},oe={key:0,class:"text-center row justify-center",style:{width:"100%"}},re=m("label",{class:"q-mb-sm text-grey-7 text-h6"}," Listado de Sucursales ",-1),ie=[re],ne=m("label",{class:"q-mr-sm row items-center"},[m("span",null,"Empresa: ")],-1),ce=m("div",{class:"full-width row flex-center text-lime-10 q-gutter-sm"},[m("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ")],-1),Se=j({__name:"IndexPage",setup(ue){const P=[{name:"acciones",label:"acciones",align:"center"},{align:"center",label:"Sucursal",field:"nombre",name:"nombre"},{align:"center",label:"Direcci\xF3n",field:"direccion",name:"direccion"},{align:"center",label:"N\xB0 de establecimiento",field:"establecimiento",name:"esta"},{label:"Punto de emisi\xF3n",field:"punto_emision",align:"center",name:"p_v"},{label:"N\xB0 de factura",field:"secuencia_factura_produccion",align:"center",name:"sec"},{name:"estado",label:"Estado",align:"center"}];let{api:C,claim:b,cargarCompanies:V,listCompanies:z}=ee();const h=p(""),S=p([]),k=p(!1),w=p(b.company.id),{mostrarNotify:$,confirmDelete:B,isDeleted:T}=Z(),{validarPermisos:g}=ae(),y=async()=>{k.value=!0;try{let a={headers:{company_id:w.value,NotSetHeaderCompany:!0}};const{data:s}=await C.get("/sucursal",a);S.value=s}catch(a){$("warning",a.response.data.message)}k.value=!1},q=async(a,s)=>{try{const{data:{msg:e}}=await C.patch(`/sucursal/${a}/${s}`);$("positive",e),y()}catch(e){console.log(e)}};H(T,(a,s)=>{a&&y()});const E=async a=>{try{B("Estas seguro de eliminar esta sucursal?",`/sucursal/${a}`)}catch(s){console.log(s)}};y(),V();const u=p("list"),I=p({rowsPerPage:10});return(a,s)=>(l(),f(v,null,[m("div",le,[m("div",se,[m("div",te,[n(M,{flat:"",class:"shadow_custom"},{default:t(()=>[n(R,{"title-class":"text-grey-7 text-h6",rows:S.value,loading:k.value,"hide-header":u.value==="grid",columns:P,"row-key":"name",grid:u.value==="grid",filter:h.value,pagination:I.value},{header:t(e=>[n(L,{props:e,style:{height:"60px"}},{default:t(()=>[(l(!0),f(v,null,G(e.cols,r=>(l(),o(U,{key:r.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:t(()=>[_(x(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-left":t(e=>[c(b).roles[0]!=="SUPER-ADMINISTRADOR"?(l(),f("div",oe,ie)):i("",!0),c(b).roles[0]=="SUPER-ADMINISTRADOR"?(l(),f("div",{key:1,style:{display:"flex"},class:J([a.$q.screen.xs?"q-mb-md":""])},[ne,n(O,{outlined:"",dense:"",modelValue:w.value,"onUpdate:modelValue":[s[0]||(s[0]=r=>w.value=r),y],"emit-value":"","map-options":"",options:c(z)},null,8,["modelValue","options"])],2)):i("",!0)]),"top-right":t(e=>[!a.$q.screen.xs&&c(g)("crear.sucursal")?(l(),o(d,{key:0,onClick:s[1]||(s[1]=r=>a.$router.push({name:"Agregar Sucursal"})),outline:"",color:"primary",label:"Agregar Sucursal",class:"q-mr-xs"})):i("",!0),n(K,{style:W(a.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:h.value,"onUpdate:modelValue":s[2]||(s[2]=r=>h.value=r),placeholder:"Buscar..."},{append:t(()=>[n(X,{name:"search"})]),_:1},8,["style","modelValue"]),u.value==="list"?(l(),o(d,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:t(()=>[A((l(),o(N,{disable:a.$q.platform.is.mobile},{default:t(()=>[_(x(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[F]])]),_:2},1032,["icon","onClick"])):i("",!0),e.inFullscreen?i("",!0):(l(),o(d,{key:2,flat:"",round:"",dense:"",icon:u.value==="grid"?"list":"grid_on",onClick:s[3]||(s[3]=r=>{u.value=u.value==="grid"?"list":"grid",a.separator=u.value==="grid"?"none":"horizontal"})},{default:t(()=>[A((l(),o(N,{disable:a.$q.platform.is.mobile},{default:t(()=>[_(x(u.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[F]])]),_:1},8,["icon"]))]),"body-cell-estado":t(e=>[n(Q,{props:e},{default:t(()=>[e.row.isActive?(l(),o(D,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(l(),o(D,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":t(e=>[n(Q,{props:e},{default:t(()=>[e.row.isActive?(l(),f(v,{key:0},[c(g)("editar.sucursal")?(l(),o(d,{key:0,round:"",color:"blue-grey",onClick:r=>a.$router.push({name:"Editar Sucursal",params:{sucursal_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):i("",!0),c(g)("inactivar.sucursal")?(l(),o(d,{key:1,round:"",color:"blue-grey",icon:"close",onClick:r=>q(e.row.id,!1),size:"10px"},null,8,["onClick"])):i("",!0)],64)):(l(),f(v,{key:1},[c(g)("activar.sucursal")?(l(),o(d,{key:0,round:"",color:"blue-grey",icon:"done",onClick:r=>q(e.row.id,!0),size:"10px"},null,8,["onClick"])):i("",!0),!e.row.estado&&c(g)("eliminar.sucursal")?(l(),o(d,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:r=>E(e.row.id),size:"10px"},null,8,["onClick"])):i("",!0)],64))]),_:2},1032,["props"])]),"no-data":t(({icon:e})=>[ce]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),a.$q.screen.xs&&c(g)("crear.sucursal")?(l(),o(Y,{key:0,position:"bottom-right",offset:[18,18]},{default:t(()=>[n(d,{round:"",color:"secondary",size:"lg",icon:"add",onClick:s[4]||(s[4]=e=>a.$router.push({name:"Agregar Sucursal"}))})]),_:1})):i("",!0)],64))}});export{Se as default};
