import{Q as _t,a as Ae}from"./QBreadcrumbs.12b09a34.js";import{r as V,k as pt,t as Se,n as L,x as Ze,B as gt,bE as Xe,N as le,a6 as ce,p as U,am as Ye,al as bt,bf as ht,i as ee,M as yt,z as Fe,bb as wt,aH as qt,m as we,au as Re,V as We,v as he,a0 as $t,K as xt,L as Ct,s as Je,H as kt,I as Pt,Z as Tt,o as h,a7 as S,g as o,e as t,ac as x,f as a,Q as J,ab as p,a9 as P,h as K,a8 as $,a5 as It,aQ as Ge,af as Me,c as te,bp as Vt,ad as Y,aP as qe,bF as At,bG as St,ah as Ee,ag as Rt,aI as Et,aS as Dt,aT as Ft,bs as Mt}from"./index.af8b3988.js";import{u as $e}from"./useCliente.aa15ca83.js";import{a as Nt,b as Qt}from"./axios.d45fc5d6.js";import"./use-quasar.af321354.js";import{Q as Lt}from"./QResizeObserver.93348191.js";import{r as Ot,Q as De}from"./QSelect.ffbc2950.js";import{u as Bt,a as jt,b as Ut,c as zt,_ as Kt}from"./FactAndNot.5b1b9b2d.js";import{Q as se}from"./QBadge.ddf5e601.js";import{Q as xe}from"./QForm.f32b6387.js";import{Q as et,a as j}from"./QTable.ad1e511b.js";import{Q as He,a as ye}from"./QTooltip.52734735.js";import{a as ue,Q as Z,c as H}from"./QItemLabel.4b75afc5.js";import{Q as Yt}from"./QList.98420712.js";import{C as Wt}from"./ClosePopup.7344a6c9.js";import{d as me}from"./date.8fa43a55.js";import{M as Gt}from"./index.2065a85c.js";import"./useHelpers.0233898e.js";import"./QChip.f2c2a808.js";import"./format.2bc25e5f.js";import"./touch.3df10340.js";import"./use-cache.b0833c75.js";const Ht=V([]),Zt=V(),Xt=V(!1),Jt=V([]),Ce=()=>({api:Nt,servicios:Ht,showModalPago:Xt,factura:Zt,pagos:Jt});let ea=0;const ta=["click","keydown"],aa={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${ea++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function oa(l,b,c,u){const i=pt(Xe,Se);if(i===Se)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Se;const{proxy:R}=Fe(),y=V(null),N=V(null),_=V(null),d=L(()=>l.disable===!0||l.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},l.ripple===!0?{}:l.ripple)),w=L(()=>i.currentModel.value===l.name),m=L(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(w.value===!0?" q-tab--active"+(i.tabProps.value.activeClass?" "+i.tabProps.value.activeClass:"")+(i.tabProps.value.activeColor?` text-${i.tabProps.value.activeColor}`:"")+(i.tabProps.value.activeBgColor?` bg-${i.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(l.icon&&l.label&&i.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(l.noCaps===!0||i.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(l.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(u!==void 0?u.linkClass.value:"")),C=L(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(i.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(l.contentClass!==void 0?` ${l.contentClass}`:"")),M=L(()=>l.disable===!0||i.hasFocus.value===!0||w.value===!1&&i.hasActiveTab.value===!0?-1:l.tabindex||0);function Q(e,n){if(n!==!0&&y.value!==null&&y.value.focus(),l.disable===!0){u!==void 0&&u.hasRouterLink.value===!0&&Ye(e);return}if(u===void 0){i.updateModel({name:l.name}),c("click",e);return}if(u.hasRouterLink.value===!0){const s=(v={})=>{let k;const E=v.to===void 0||wt(v.to,l.to)===!0?i.avoidRouteWatcher=qt():null;return u.navigateToRouterLink(e,{...v,returnRouterError:!0}).catch(A=>{k=A}).then(A=>{if(E===i.avoidRouteWatcher&&(i.avoidRouteWatcher=!1,k===void 0&&(A===void 0||A.message.startsWith("Avoided redundant navigation")===!0)&&i.updateModel({name:l.name})),v.returnRouterError===!0)return k!==void 0?Promise.reject(k):A})};c("click",e,s),e.defaultPrevented!==!0&&s();return}c("click",e)}function z(e){bt(e,[13,32])?Q(e,!0):ht(e)!==!0&&e.keyCode>=35&&e.keyCode<=40&&e.altKey!==!0&&e.metaKey!==!0&&i.onKbdNavigate(e.keyCode,R.$el)===!0&&Ye(e),c("keydown",e)}function W(){const e=i.tabProps.value.narrowIndicator,n=[],s=U("div",{ref:_,class:["q-tab__indicator",i.tabProps.value.indicatorClass]});l.icon!==void 0&&n.push(U(ee,{class:"q-tab__icon",name:l.icon})),l.label!==void 0&&n.push(U("div",{class:"q-tab__label"},l.label)),l.alert!==!1&&n.push(l.alertIcon!==void 0?U(ee,{class:"q-tab__alert-icon",color:l.alert!==!0?l.alert:void 0,name:l.alertIcon}):U("div",{class:"q-tab__alert"+(l.alert!==!0?` text-${l.alert}`:"")})),e===!0&&n.push(s);const v=[U("div",{class:"q-focus-helper",tabindex:-1,ref:y}),U("div",{class:C.value},yt(b.default,n))];return e===!1&&v.push(s),v}const G={name:L(()=>l.name),rootRef:N,tabIndicatorRef:_,routeData:u};Ze(()=>{i.unregisterTab(G)}),gt(()=>{i.registerTab(G)});function T(e,n){const s={ref:N,class:m.value,tabindex:M.value,role:"tab","aria-selected":w.value===!0?"true":"false","aria-disabled":l.disable===!0?"true":void 0,onClick:Q,onKeydown:z,...n};return le(U(e,s,W()),[[ce,d.value]])}return{renderTab:T,$tabs:i}}var ve=we({name:"QTab",props:aa,emits:ta,setup(l,{slots:b,emit:c}){const{renderTab:u}=oa(l,b,c);return()=>u("div")}});function la(l,b,c){const u=c===!0?["left","right"]:["top","bottom"];return`absolute-${b===!0?u[0]:u[1]}${l?` text-${l}`:""}`}const sa=["left","center","right","justify"];var tt=we({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:l=>sa.includes(l)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(l,{slots:b,emit:c}){const{proxy:u}=Fe(),{$q:i}=u,{registerTick:R}=Re(),{registerTick:y}=Re(),{registerTick:N}=Re(),{registerTimeout:_,removeTimeout:d}=We(),{registerTimeout:w,removeTimeout:m}=We(),C=V(null),M=V(null),Q=V(l.modelValue),z=V(!1),W=V(!0),G=V(!1),T=V(!1),e=[],n=V(0),s=V(!1);let v=null,k=null,E;const A=L(()=>({activeClass:l.activeClass,activeColor:l.activeColor,activeBgColor:l.activeBgColor,indicatorClass:la(l.indicatorColor,l.switchIndicator,l.vertical),narrowIndicator:l.narrowIndicator,inlineLabel:l.inlineLabel,noCaps:l.noCaps})),O=L(()=>{const r=n.value,f=Q.value;for(let g=0;g<r;g++)if(e[g].name.value===f)return!0;return!1}),ne=L(()=>`q-tabs__content--align-${z.value===!0?"left":T.value===!0?"justify":l.align}`),ke=L(()=>`q-tabs row no-wrap items-center q-tabs--${z.value===!0?"":"not-"}scrollable q-tabs--${l.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${l.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${l.mobileArrows===!0?"":"out"}-arrows`+(l.dense===!0?" q-tabs--dense":"")+(l.shrink===!0?" col-shrink":"")+(l.stretch===!0?" self-stretch":"")),ot=L(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+ne.value+(l.contentClass!==void 0?` ${l.contentClass}`:"")),_e=L(()=>l.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),pe=L(()=>l.vertical!==!0&&i.lang.rtl===!0),Pe=L(()=>Ot===!1&&pe.value===!0);he(pe,re),he(()=>l.modelValue,r=>{Te({name:r,setCurrent:!0,skipEmit:!0})}),he(()=>l.outsideArrows,ge);function Te({name:r,setCurrent:f,skipEmit:g}){Q.value!==r&&(g!==!0&&l["onUpdate:modelValue"]!==void 0&&c("update:modelValue",r),(f===!0||l["onUpdate:modelValue"]===void 0)&&(lt(Q.value,r),Q.value=r))}function ge(){R(()=>{Ne({width:C.value.offsetWidth,height:C.value.offsetHeight})})}function Ne(r){if(_e.value===void 0||M.value===null)return;const f=r[_e.value.container],g=Math.min(M.value[_e.value.scroll],Array.prototype.reduce.call(M.value.children,(F,I)=>F+(I[_e.value.content]||0),0)),D=f>0&&g>f;z.value=D,D===!0&&y(re),T.value=f<parseInt(l.breakpoint,10)}function lt(r,f){const g=r!=null&&r!==""?e.find(F=>F.name.value===r):null,D=f!=null&&f!==""?e.find(F=>F.name.value===f):null;if(g&&D){const F=g.tabIndicatorRef.value,I=D.tabIndicatorRef.value;v!==null&&(clearTimeout(v),v=null),F.style.transition="none",F.style.transform="none",I.style.transition="none",I.style.transform="none";const q=F.getBoundingClientRect(),B=I.getBoundingClientRect();I.style.transform=l.vertical===!0?`translate3d(0,${q.top-B.top}px,0) scale3d(1,${B.height?q.height/B.height:1},1)`:`translate3d(${q.left-B.left}px,0,0) scale3d(${B.width?q.width/B.width:1},1,1)`,N(()=>{v=setTimeout(()=>{v=null,I.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",I.style.transform="none"},70)})}D&&z.value===!0&&ie(D.rootRef.value)}function ie(r){const{left:f,width:g,top:D,height:F}=M.value.getBoundingClientRect(),I=r.getBoundingClientRect();let q=l.vertical===!0?I.top-D:I.left-f;if(q<0){M.value[l.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(q),re();return}q+=l.vertical===!0?I.height-F:I.width-g,q>0&&(M.value[l.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(q),re())}function re(){const r=M.value;if(r===null)return;const f=r.getBoundingClientRect(),g=l.vertical===!0?r.scrollTop:Math.abs(r.scrollLeft);pe.value===!0?(W.value=Math.ceil(g+f.width)<r.scrollWidth-1,G.value=g>0):(W.value=g>0,G.value=l.vertical===!0?Math.ceil(g+f.height)<r.scrollHeight:Math.ceil(g+f.width)<r.scrollWidth)}function Qe(r){k!==null&&clearInterval(k),k=setInterval(()=>{it(r)===!0&&ae()},5)}function Le(){Qe(Pe.value===!0?Number.MAX_SAFE_INTEGER:0)}function Oe(){Qe(Pe.value===!0?0:Number.MAX_SAFE_INTEGER)}function ae(){k!==null&&(clearInterval(k),k=null)}function st(r,f){const g=Array.prototype.filter.call(M.value.children,B=>B===f||B.matches&&B.matches(".q-tab.q-focusable")===!0),D=g.length;if(D===0)return;if(r===36)return ie(g[0]),g[0].focus(),!0;if(r===35)return ie(g[D-1]),g[D-1].focus(),!0;const F=r===(l.vertical===!0?38:37),I=r===(l.vertical===!0?40:39),q=F===!0?-1:I===!0?1:void 0;if(q!==void 0){const B=pe.value===!0?-1:1,X=g.indexOf(f)+q*B;return X>=0&&X<D&&(ie(g[X]),g[X].focus({preventScroll:!0})),!0}}const nt=L(()=>Pe.value===!0?{get:r=>Math.abs(r.scrollLeft),set:(r,f)=>{r.scrollLeft=-f}}:l.vertical===!0?{get:r=>r.scrollTop,set:(r,f)=>{r.scrollTop=f}}:{get:r=>r.scrollLeft,set:(r,f)=>{r.scrollLeft=f}});function it(r){const f=M.value,{get:g,set:D}=nt.value;let F=!1,I=g(f);const q=r<I?-1:1;return I+=q*5,I<0?(F=!0,I=0):(q===-1&&I<=r||q===1&&I>=r)&&(F=!0,I=r),D(f,I),re(),F}function Be(r,f){for(const g in r)if(r[g]!==f[g])return!1;return!0}function rt(){let r=null,f={matchedLen:0,queryDiff:9999,hrefLen:0};const g=e.filter(q=>q.routeData!==void 0&&q.routeData.hasRouterLink.value===!0),{hash:D,query:F}=u.$route,I=Object.keys(F).length;for(const q of g){const B=q.routeData.exact.value===!0;if(q.routeData[B===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:X,query:Ie,matched:vt,href:ft}=q.routeData.resolvedLink.value,Ve=Object.keys(Ie).length;if(B===!0){if(X!==D||Ve!==I||Be(F,Ie)===!1)continue;r=q.name.value;break}if(X!==""&&X!==D||Ve!==0&&Be(Ie,F)===!1)continue;const oe={matchedLen:vt.length,queryDiff:I-Ve,hrefLen:ft.length-X.length};if(oe.matchedLen>f.matchedLen){r=q.name.value,f=oe;continue}else if(oe.matchedLen!==f.matchedLen)continue;if(oe.queryDiff<f.queryDiff)r=q.name.value,f=oe;else if(oe.queryDiff!==f.queryDiff)continue;oe.hrefLen>f.hrefLen&&(r=q.name.value,f=oe)}r===null&&e.some(q=>q.routeData===void 0&&q.name.value===Q.value)===!0||Te({name:r,setCurrent:!0})}function ct(r){if(d(),s.value!==!0&&C.value!==null&&r.target&&typeof r.target.closest=="function"){const f=r.target.closest(".q-tab");f&&C.value.contains(f)===!0&&(s.value=!0,z.value===!0&&ie(f))}}function ut(){_(()=>{s.value=!1},30)}function be(){Ue.avoidRouteWatcher===!1?w(rt):m()}function je(){if(E===void 0){const r=he(()=>u.$route.fullPath,be);E=()=>{r(),E=void 0}}}function dt(r){e.push(r),n.value++,ge(),r.routeData===void 0||u.$route===void 0?w(()=>{if(z.value===!0){const f=Q.value,g=f!=null&&f!==""?e.find(D=>D.name.value===f):null;g&&ie(g.rootRef.value)}}):(je(),r.routeData.hasRouterLink.value===!0&&be())}function mt(r){e.splice(e.indexOf(r),1),n.value--,ge(),E!==void 0&&r.routeData!==void 0&&(e.every(f=>f.routeData===void 0)===!0&&E(),be())}const Ue={currentModel:Q,tabProps:A,hasFocus:s,hasActiveTab:O,registerTab:dt,unregisterTab:mt,verifyRouteModel:be,updateModel:Te,onKbdNavigate:st,avoidRouteWatcher:!1};$t(Xe,Ue);function ze(){v!==null&&clearTimeout(v),ae(),E!==void 0&&E()}let Ke;return Ze(ze),xt(()=>{Ke=E!==void 0,ze()}),Ct(()=>{Ke===!0&&je(),ge()}),()=>U("div",{ref:C,class:ke.value,role:"tablist",onFocusin:ct,onFocusout:ut},[U(Lt,{onResize:Ne}),U("div",{ref:M,class:ot.value,onScroll:re},Je(b.default)),U(ee,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(W.value===!0?"":" q-tabs__arrow--faded"),name:l.leftIcon||i.iconSet.tabs[l.vertical===!0?"up":"left"],onMousedownPassive:Le,onTouchstartPassive:Le,onMouseupPassive:ae,onMouseleavePassive:ae,onTouchendPassive:ae}),U(ee,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(G.value===!0?"":" q-tabs__arrow--faded"),name:l.rightIcon||i.iconSet.tabs[l.vertical===!0?"down":"right"],onMousedownPassive:Oe,onTouchstartPassive:Oe,onMouseupPassive:ae,onMouseleavePassive:ae,onTouchendPassive:ae})])}}),fe=we({name:"QTabPanel",props:Bt,setup(l,{slots:b}){return()=>U("div",{class:"q-tab-panel",role:"tabpanel"},Je(b.default))}}),at=we({name:"QTabPanels",props:{...jt,...kt},emits:Ut,setup(l,{slots:b}){const c=Fe(),u=Pt(l,c.proxy.$q),{updatePanelsList:i,getPanelContent:R,panelDirectives:y}=zt(),N=L(()=>"q-tab-panels q-panel-parent"+(u.value===!0?" q-tab-panels--dark q-dark":""));return()=>(i(b),Tt("div",{class:N.value},R(),"pan",l.swipeable,()=>y.value))}});const na={class:"my-card"},ia={class:"q-pt-none"},ra={class:"row q-pt-sm"},ca={class:"col-xs-12 col-md-7"},ua={class:"row"},da=t("div",{class:"col-11 flex justify-start items-center"},[t("label",{class:"text-h6 text-weight-medium"}," >> Datos del Cliente:")],-1),ma={class:"col-xs-12 col-md-6 col-sm-6"},va={class:"col-xs-12 col-md-6 col-sm-6"},fa={class:"col-xs-12 col-md-6 col-sm-6"},_a={class:"col-xs-12 col-md-6 col-sm-6"},pa={class:"col-xs-12 col-md-6 col-sm-6"},ga={class:"col-xs-12 col-md-6 col-sm-6"},ba={class:"col-xs-11 col-md-5"},ha={class:"row q-col-gutter-sm q-col-gutter-y-md"},ya=t("label",{class:"text-h6 text-weight-medium"}," >> Resumen Notificaciones:",-1),wa=[ya],qa={class:"col-xs-12 col-md-6"},$a={style:{display:"flex"}},xa={style:{width:"30%"},class:"q-mr-xs q-ml-md"},Ca=t("div",{style:{width:"70%","text-align":"left"}},[t("div",null,"22/12/2023"),t("br"),t("div",null,"D\xEDa de pago")],-1),ka={class:"col-xs-12 col-md-6"},Pa={style:{display:"flex"}},Ta={style:{width:"30%"},class:"q-mr-xs q-ml-md"},Ia=t("div",{style:{width:"70%","text-align":"left"}},[t("div",null,"22/12/2023"),t("br"),t("div",null,"D\xEDa de pago")],-1),Va={class:"col-xs-12 col-md-6"},Aa={style:{display:"flex"}},Sa={style:{width:"30%"},class:"q-mr-xs q-ml-md"},Ra=t("div",{style:{width:"70%","text-align":"left"}},[t("div",null,"22/12/2023"),t("br"),t("div",null,"D\xEDa de pago")],-1),Ea={class:"row justify-center q-mt-md"},Da={__name:"ResumenPage",setup(l){const{api:b,mostrarNotify:c,formCliente:u,validaciones:i,validarDatosPersonales:R}=$e(),y=V(!1),N=async()=>{if(!R())try{y.value=!0;const{planInternet:d,created_at:w,updated_at:m,...C}=u.value,{data:M}=await b.put(`/customers/actualizarDatosPersonales/${u.value.id}`,C);u.value={...M.cliente[0]},c("positive",M.msg),y.value=!1}catch(d){y.value=!1,c("warning",d.response.data.message)}};return(_,d)=>(h(),S(xe,{onSubmit:N},{default:o(()=>[t("div",na,[t("div",ia,[t("div",ra,[t("div",ca,[t("div",ua,[da,t("div",{class:x(["col-xs-12 col-md-4 flex items-center",[_.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"justify-end"]])},[t("label",{class:x(_.$q.screen.width<1022||"q-pr-md")}," Cliente: ",2)],2),t("div",ma,[a(J,{modelValue:p(u).nombres,"onUpdate:modelValue":[d[0]||(d[0]=w=>p(u).nombres=w),d[1]||(d[1]=w=>(p(u).nombres=p(u).nombres.toUpperCase(),p(i).nombres.isValid=!0))],modelModifiers:{trim:!0},error:!p(i).nombres.isValid,"input-class":"resaltarTextoInput",dense:"",outlined:""},{error:o(()=>[t("label",{class:x(_.$q.dark.isActive?"text-red-4":"text-negative")},P(p(i).nombres.message),3)]),_:1},8,["modelValue","error"])]),t("div",{class:x(["col-xs-12 col-md-4 flex items-center",[_.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"justify-end"]])},[t("label",{class:x(_.$q.screen.width<1022||"q-pr-md")}," Email: ",2)],2),t("div",va,[a(J,{modelValue:p(u).email,"onUpdate:modelValue":d[2]||(d[2]=w=>p(u).email=w),modelModifiers:{trim:!0},error:!p(i).email.isValid,"input-class":"resaltarTextoInput",onKeyup:d[3]||(d[3]=w=>p(i).email.isValid=!0),dense:"",outlined:""},{error:o(()=>[t("label",{class:x(_.$q.dark.isActive?"text-red-4":"text-negative")},P(p(i).email.message),3)]),_:1},8,["modelValue","error"])]),t("div",{class:x(["col-xs-12 col-md-4 flex items-center",[_.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"justify-end"]])},[t("label",{class:x(_.$q.screen.width<1022||"q-pr-md")}," Celular: ",2)],2),t("div",fa,[a(J,{type:_.$q.platform.is.mobile?"number":"text",modelValue:p(u).celular,"onUpdate:modelValue":d[4]||(d[4]=w=>p(u).celular=w),modelModifiers:{trim:!0},counter:"",maxlength:"10","input-class":"resaltarTextoInput",error:!p(i).celular.isValid,onKeyup:d[5]||(d[5]=w=>(p(i).celular.isValid=!0,p(u).celular=p(u).celular.replace(/\D/g,""))),dense:"",outlined:""},{error:o(()=>[t("label",{class:x(_.$q.dark.isActive?"text-red-4":"text-negative")},P(p(i).celular.message),3)]),_:1},8,["type","modelValue","error"])]),t("div",{class:x(["col-xs-12 col-md-4 flex items-center",[_.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"justify-end"]])},[t("label",{class:x(_.$q.screen.width<1022||"q-pr-md")}," Direcci\xF3n: ",2)],2),t("div",_a,[a(J,{modelValue:p(u).direccion,"onUpdate:modelValue":d[6]||(d[6]=w=>p(u).direccion=w),error:!p(i).direccion.isValid,"input-class":"resaltarTextoInput",onKeyup:d[7]||(d[7]=w=>p(i).direccion.isValid=!0),dense:"",outlined:""},{error:o(()=>[t("label",{class:x(_.$q.dark.isActive?"text-red-4":"text-negative")},P(p(i).direccion.message),3)]),_:1},8,["modelValue","error"])]),t("div",{class:x(["col-xs-12 col-md-4 flex items-center",[_.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"justify-end"]])},[t("label",{class:x(_.$q.screen.width<1022||"q-pr-md")}," Tipo de Documento: ",2)],2),t("div",pa,[a(De,{dense:"",modelValue:p(u).tipo_documento,"onUpdate:modelValue":[d[8]||(d[8]=w=>p(u).tipo_documento=w),d[9]||(d[9]=w=>p(i).tipo_documento.isValid=!0)],modelModifiers:{trim:!0},outlined:"",error:!p(i).tipo_documento.isValid,"emit-value":"","map-options":"",options:[{label:"RUC",value:"04"},{label:"Cedula",value:"05"},{label:"Pasaporte",value:"06"}]},{error:o(()=>[t("label",{class:x(_.$q.dark.isActive?"text-red-4":"text-negative")},P(p(i).tipo_documento.message),3)]),_:1},8,["modelValue","error"])]),t("div",{class:x(["col-xs-12 col-md-4 flex items-center",[_.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"justify-end"]])},[t("label",{class:x(_.$q.screen.width<1022||"q-pr-md")}," N. Identificaci\xF3n: ",2)],2),t("div",ga,[a(J,{type:_.$q.platform.is.mobile?"number":"text",modelValue:p(u).numero_documento,"onUpdate:modelValue":d[10]||(d[10]=w=>p(u).numero_documento=w),readonly:p(u).tipo_documento==="","input-class":"resaltarTextoInput",counter:"",maxlength:p(u).tipo_documento==="04"?13:10,error:!p(i).numero_documento.isValid,onKeyup:d[11]||(d[11]=w=>(p(i).numero_documento.isValid=!0,p(u).numero_documento=p(u).numero_documento.replace(/\D/g,""))),dense:"",outlined:""},{error:o(()=>[t("label",{class:x(_.$q.dark.isActive?"text-red-4":"text-negative")},P(p(i).numero_documento.message),3)]),_:1},8,["type","modelValue","readonly","maxlength","error"])])])]),t("div",ba,[t("div",ha,[t("div",{class:x(["col-11 flex justify-start items-center",[_.$q.screen.xs?"q-my-md":""]])},wa,2),t("div",qa,[t("div",null,[a(se,{class:"text-center q-py-sm",style:{width:"100%","text-align":"center","font-size":"15px",display:"block"},color:_.$q.dark.isActive?"indigo-6":"indigo-8",filled:""},{default:o(()=>[t("div",$a,[t("div",xa,[a(ee,{name:"calendar_month",style:{"font-size":"32px"}})]),Ca])]),_:1},8,["color"])])]),t("div",ka,[t("div",null,[a(se,{class:"text-center q-py-sm",style:{width:"100%","text-align":"center","font-size":"15px",display:"block"},color:(_.$q.dark.isActive,"orange-9"),filled:""},{default:o(()=>[t("div",Pa,[t("div",Ta,[a(ee,{name:"calendar_month",style:{"font-size":"32px"}})]),Ia])]),_:1},8,["color"])])]),t("div",Va,[t("div",null,[a(se,{class:"text-center q-py-sm",style:{width:"100%","text-align":"center","font-size":"15px",display:"block"},color:_.$q.dark.isActive?"red-7":"red-9",filled:""},{default:o(()=>[t("div",Aa,[t("div",Sa,[a(ee,{name:"calendar_month",style:{"font-size":"32px"}})]),Ra])]),_:1},8,["color"])])])])])])]),t("div",Ea,[t("div",{class:x(["q-pb-md",[_.$q.screen.width>600||" q-ml-lg"]])},[a(K,{type:"submit",icon:"save",loading:y.value,outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:o(()=>[$(" \xA0 Guardar Cambios ")]),_:1},8,["loading"])],2)])])]),_:1}))}};const Fa={class:"my-card"},Ma={class:"q-pt-none"},Na={class:"row q-pt-sm"},Qa={class:"col-12"},La={class:"row"},Oa=t("label",{class:"text-h6 text-weight-medium"}," >> Servicios de Internet:",-1),Ba={class:"text-h6 text-weight-medium"},ja={class:"col-12 q-mt-md"},Ua={__name:"ServiciosPage",setup(l){const b=[{name:"cont",label:"#",align:"center"},{name:"nombre_plan",align:"center",label:"Plan",field:"nombre_plan"},{name:"precio",label:"Costo",field:"precio",align:"center"},{name:"ipv4",label:"IP",field:"ipv4",align:"center"},{name:"router",label:"Router",field:"router",align:"center"},{name:"fecha_instalacion",label:"Instalado",field:"fecha_instalacion",align:"center"},{name:"direccion",label:"Direcci\xF3n",field:"direccion",align:"center"},{name:"estado",label:"Estado",field:"estado",align:"center"},{name:"acciones",label:"Acciones",field:"acciones",align:"center"}],{servicios:c}=Ce(),u=c.value;return(i,R)=>(h(),S(xe,{onSubmit:R[0]||(R[0]=()=>{})},{default:o(()=>[t("div",Fa,[t("div",Ma,[t("div",Na,[t("div",Qa,[t("div",La,[t("div",{class:x(["col-12 flex items-center",i.$q.screen.xs?"justify-center":"justify-between"])},[Oa,t("label",Ba,[a(K,{outline:"",color:"primary",label:"Agregar Servicio",class:x(["q-mr-xs",!i.$q.screen.xs||"q-mt-sm"])},null,8,["class"])])],2),t("div",ja,[a(et,{rows:p(u),columns:b,class:x([i.$q.dark.isActive?"":"my-sticky-header-table3"]),"hide-pagination":!0,"rows-per-page-options":[50],"row-key":"name"},{"body-cell-cont":o(y=>[a(j,{props:y},{default:o(()=>[$(P(y.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-estado":o(y=>[a(j,{props:y},{default:o(()=>[y.row.estado=="Activo"?(h(),S(se,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(h(),S(se,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":o(y=>[a(j,{props:y},{default:o(()=>[$(P(y.rowIndex+1),1)]),_:2},1032,["props"])]),_:1},8,["rows","class"])])])])])])])]),_:1}))}},za={__name:"ConfiguracionPage",setup(l){return(b,c)=>(h(),S(Kt,{edit:!0}))}};const de=l=>(At("data-v-1319842c"),l=l(),St(),l),Ka={class:"text-h6 text-center"},Ya={class:"row q-pt-lg q-gutter-lg justify-center"},Wa={class:"col-12"},Ga=de(()=>t("label",null,"Forma de pago:",-1)),Ha={class:"col-12 q-mt-sm"},Za=de(()=>t("label",null,"N\xBA transacci\xF3n:",-1)),Xa={key:0,class:"col-12 q-mt-sm"},Ja=de(()=>t("label",null,"Pagar Importe Total:",-1)),eo={class:"col-12 q-mt-sm"},to={key:1,class:"col-12 q-mt-sm"},ao=de(()=>t("label",null,"Monto Pendiente:",-1)),oo={key:2,class:"col-12 q-mt-sm"},lo=de(()=>t("label",null,"Sucursal a Facturar:",-1)),so={class:"col-12 q-mt-none"},no=de(()=>t("label",null,"Notas:",-1)),io={class:"col-xs-9 col-sm-12 q-mt-lg q-mb-md flex justify-center"},ro={__name:"ModalPago",props:["servicio","nuevoPago"],emits:["actualizarDatos"],setup(l,{emit:b}){const c=l,u=["forma_pago","montoPendiente","montoCancelar"],{api:i,claim:R,mostrarNotify:y,route:N}=$e(),{showModalPago:_}=Ce(),d=V([]),w=V(!1),m=V({forma_pago:"",n_transaccion:"",importe_total:!0,sucursal_id:"",montoCancelar:"",montoPendiente:"",detalle:""}),C=V({forma_pago:{message:"",isValid:!0},montoPendiente:{message:"",isValid:!0},montoCancelar:{message:"",isValid:!0},sucursal_id:{message:"",isValid:!0}});if(c.nuevoPago)if(c.servicio.pagos.length==0)m.value.montoPendiente=c.servicio.precio,m.value.montoCancelar=c.servicio.precio;else{let T=0;c.servicio.pagos.forEach(n=>{T+=parseFloat(n.valor)});const e=parseFloat(c.servicio.precio)-T;m.value.montoPendiente=e.toString(),m.value.montoCancelar=e.toString()}else m.value={...c.servicio.pago,montoCancelar:parseFloat(c.servicio.pago.valor).toFixed(2)};const M=T=>{let e=0;e=m.value[T];const n=/^\d{0,9}(\.\d{1,2})?$/;setTimeout(function(){let s=0;if(s=m.value[T],!n.test(s.toString())){const v=parseFloat(e.toString().substring(0,e.toString().length-1));m.value[T]=v}},0)},Q=()=>{let T=!1;return c.nuevoPago&&(u.forEach(e=>{(m.value[e].length==0||m.value[e]==0)&&(C.value[e].message="Debes completar este campo",C.value[e].isValid=!1,T=!0)}),(R.roles[0]=="Super-Administrador"||R.roles[0]=="Administrador")&&m.value.sucursal_id==""&&c.servicio.tipo_comprobante!="Recibo"&&parseFloat(m.value.montoCancelar)>=parseFloat(m.value.montoPendiente)&&(C.value.sucursal_id.message="Debes seleccionar una sucursal",C.value.sucursal_id.isValid=!1,T=!0)),T},z=["Efectivo Oficina/Sucursal","Dep\xF3sito Bancario","Transferencia Bancaria","Facilito","Punto Agil"],W=async()=>{if(Q())return;const T=Date.now(),e=me.formatDate(T,"DD/MM/YYYY"),n=me.formatDate(T,"HH:mma"),s=parseFloat(m.value.montoPendiente)-parseFloat(m.value.montoCancelar);let v=0;c.nuevoPago&&c.servicio.pagos.forEach(O=>{v+=parseFloat(O.valor)});let k;if(c.nuevoPago)k=c.servicio.pagos,k.unshift({valor:m.value.montoCancelar,monto_pendiente:s.toString(),totalAbonado:(v+parseFloat(m.value.montoCancelar)).toString(),fecha_abono:e,hora_abono:n,detalle:m.value.detalle,n_transaccion:m.value.n_transaccion,forma_pago:m.value.forma_pago});else{const O=c.servicio.pagos.pagos.findIndex(ne=>c.servicio.pago.hora_abono==ne.hora_abono&&c.servicio.pago.valor==ne.valor);c.servicio.pagos.pagos[O]={...m.value}}let E,A;c.nuevoPago?(E={pagos:k,estadoSRI:s<=0?"PAGADO":"PENDIENTE"},A=c.servicio.pago_id):(E={pagos:c.servicio.pagos.pagos},A=c.servicio.pagos.pago_id);try{let O={headers:{sucursal_id:m.value.sucursal_id}};w.value=!0;const{data:ne}=await i.patch(`/pagos/${A}`,E,O);if(s<=0&&c.servicio.tipo_comprobante!="Recibo"&&c.nuevoPago){let ke={customer_id:N.params.client_id,tipo:"EMISION",subtotal:parseFloat(c.servicio.precio),iva:parseFloat(c.servicio.iva),descuento:0,total:parseFloat(c.servicio.precio),entity:"Pagos",pago_id:c.servicio.pago_id,user_id:R.id,products:[{aplicaIva:c.servicio.iva>0,cantidad:1,pvp:c.servicio.precio,descuento:0,nombre:"SERVICIO DE INTERNET",codigoBarra:c.servicio.pago_id.split("-")[0]}]};await i.post("/CE/facturas/generarFacturaElectronica",ke,O)}w.value=!1,y("positive",ne.msg),_.value=!1,b("actualizarDatos")}catch(O){console.log(O)}},G=async T=>{d.value=[];const{data:e}=await i.get(`/sucursal/find/${T}/company`);e.forEach(n=>{d.value.push({label:n.nombre,value:n.id})}),d.value.length==1&&(m.value.sucursal_id=d.value[0].value)};return(R.roles[0]=="Super-Administrador"||R.roles[0]=="Administrador")&&G(R.company.id),(T,e)=>(h(),S(qe,{style:{width:"450px !important","max-width":"fit-content"}},{default:o(()=>[a(Ge,null,{default:o(()=>[t("div",Ka,[$(P(c.nuevoPago?"Agregar Pago:":"Editar Pago")+" ",1),le(a(K,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[Wt]])])]),_:1}),a(Me,{inset:""}),a(Ge,{class:"q-pt-none"},{default:o(()=>[a(xe,{onSubmit:W},{default:o(()=>[t("div",Ya,[t("div",Wa,[Ga,a(De,{color:"orange","transition-show":"scale","transition-hide":"scale","onUpdate:modelValue":[e[0]||(e[0]=n=>C.value.forma_pago.isValid=!0),e[1]||(e[1]=n=>m.value.forma_pago=n)],error:!C.value.forma_pago.isValid,outlined:"",modelValue:m.value.forma_pago,dense:"",options:z},{error:o(()=>[t("label",{class:x(T.$q.dark.isActive?"text-red-4":"text-negative")},P(C.value.forma_pago.message),3)]),_:1},8,["error","modelValue"])]),t("div",Ha,[Za,a(J,{modelValue:m.value.n_transaccion,"onUpdate:modelValue":e[2]||(e[2]=n=>m.value.n_transaccion=n),dense:"",outlined:""},null,8,["modelValue"])]),c.nuevoPago?(h(),te("div",Xa,[Ja,a(Vt,{color:"green","onUpdate:modelValue":[e[3]||(e[3]=n=>m.value.montoCancelar=m.value.montoPendiente),e[4]||(e[4]=n=>m.value.importe_total=n)],size:"lg",modelValue:m.value.importe_total},null,8,["modelValue"])])):Y("",!0),t("div",eo,[t("label",null,P(c.nuevoPago?"Monto a Cancelar:":"Monto Cancelado"),1),a(J,{modelValue:m.value.montoCancelar,"onUpdate:modelValue":[e[5]||(e[5]=n=>m.value.montoCancelar=n),e[6]||(e[6]=n=>(M("montoCancelar"),C.value.montoCancelar.isValid=!0))],modelModifiers:{trim:!0},readonly:m.value.importe_total||!c.nuevoPago,"input-style":"padding-right: 27px;",type:"number",step:"0.01",error:!C.value.montoCancelar.isValid,"input-class":"resaltarTextoInput",dense:"",outlined:""},{error:o(()=>[t("label",{class:x(T.$q.dark.isActive?"text-red-4":"text-negative")},P(C.value.montoCancelar.message),3)]),prepend:o(()=>[a(ee,{name:"attach_money"})]),_:1},8,["modelValue","readonly","error"])]),c.nuevoPago?(h(),te("div",to,[ao,a(J,{modelValue:m.value.montoPendiente,"onUpdate:modelValue":[e[7]||(e[7]=n=>m.value.montoPendiente=n),e[8]||(e[8]=n=>(M("montoPendiente"),C.value.montoPendiente.isValid=!0))],modelModifiers:{trim:!0},disable:"",type:"number",step:"0.01",error:!C.value.montoPendiente.isValid,"input-style":"padding-right: 27px;","input-class":"resaltarTextoInput",dense:"",outlined:""},{error:o(()=>[t("label",{class:x(T.$q.dark.isActive?"text-red-4":"text-negative")},P(C.value.montoCancelar.message),3)]),prepend:o(()=>[a(ee,{name:"attach_money"})]),_:1},8,["modelValue","error"])])):Y("",!0),c.servicio.tipo_comprobante!="Recibo"&&c.nuevoPago&&parseFloat(m.value.montoCancelar)>=parseFloat(m.value.montoPendiente)?(h(),te("div",oo,[lo,d.value.length>1?(h(),S(De,{key:0,modelValue:m.value.sucursal_id,"onUpdate:modelValue":[e[9]||(e[9]=n=>m.value.sucursal_id=n),e[10]||(e[10]=n=>C.value.sucursal_id.isValid=!0)],error:!C.value.sucursal_id.isValid,outlined:"",options:d.value,"emit-value":"","map-options":"",dense:""},{error:o(()=>[t("label",{class:x(T.$q.dark.isActive?"text-red-4":"text-negative")},P(C.value.sucursal_id.message),3)]),"no-option":o(()=>[a(ue,null,{default:o(()=>[a(Z,{class:"text-grey"},{default:o(()=>[$(" No se encontro sucursal ")]),_:1})]),_:1})]),_:1},8,["modelValue","error","options"])):Y("",!0)])):Y("",!0),t("div",so,[no,a(J,{modelValue:m.value.detalle,"onUpdate:modelValue":e[11]||(e[11]=n=>m.value.detalle=n),modelModifiers:{trim:!0},outlined:"",rows:"2",type:"textarea"},null,8,["modelValue"])]),t("div",io,[a(K,{type:"submit",icon:"save",loading:w.value,outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:o(()=>[$(" \xA0 Guardar ")]),_:1},8,["loading"])])])]),_:1})]),_:1})]),_:1}))}};var co=It(ro,[["__scopeId","data-v-1319842c"]]);const uo={class:"my-card"},mo={class:"q-pt-none"},vo={class:"row q-pt-sm"},fo={class:"col-12"},_o={class:"row"},po={class:"col-12 q-mt-md"},go=t("br",null,null,-1),bo=t("br",null,null,-1),ho=t("br",null,null,-1),yo=t("br",null,null,-1),wo={class:"row q-col-gutter-sm"},qo=t("div",{class:"full-width row flex-center text-lime-10 q-gutter-sm"},[t("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun registros ")],-1),$o={__name:"IndexFacturas",setup(l){const b=V([{name:"x",align:"center",label:" ",field:"x"},{name:"n_comprobantes",align:"center",label:"N. Comprobante",field:"n_comprobantes"},{name:"emitido",label:"Emitido",field:"emitido",align:"center"},{name:"vencimiento",label:"Vencimiento",field:"vencimiento",align:"center"},{name:"precio",label:"Total",field:"precio",align:"center"},{name:"iva",label:"Impuesto",field:"iva",align:"center"},{name:"pagado",label:"Pagado",field:"pagado",align:"center"},{name:"estado",label:"Estado",field:"estado",align:"center"},{name:"acciones",label:"Acciones",field:"acciones",align:"center"}]),c=V(!0),u=V({}),{api:i,servicios:R,pagos:y,showModalPago:N}=Ce(),{claim:_,mes_pago:d,route:w}=$e();let m;const C=()=>{const e=new Gt("http://205.235.6.108:3000/socket.io/socket.io.js",{extraHeaders:{autentication:_.id}});m==null||m.removeAllListeners(),m=e.socket("/"),m.on("updateStateInvoice",()=>{y.value=[],Q()})},M=async()=>{const{data:e}=await i.get("/customers/find/"+w.params.client_id);return e},Q=async()=>{try{y.value=[];const{data:e}=await i.get("/pagos/find/"+R.value[0].servicio_id);e.length>0&&(e[0].servicio.factura_id.tipo_comprobante=="Recibo"&&(b.value[1].label="Tipo Comprobante"),d.value.dia_pago=e[0].dia_pago,e[0].estadoSRI!=="PAGADO"||e[0].estadoSRI!=="AUTORIZADO"?d.value.estado="pendiente":d.value.estado="pagado"),e.forEach(n=>{var A;const s=me.addToDate(n.created_at,{days:n.servicio.factura_id.dia_pago-1});let v;n.servicio.factura_id.tipo_impuesto=="Impuestos incluido"?v=`${Math.floor(parseFloat(n.servicio.precio)*.12*100)/100}`:v=0;let k=0;n.pagos.forEach(O=>{k+=parseFloat(O.valor)});const E=(A=n.estadoSRI)==null?void 0:A.trim();y.value.push({ambiente:n.sucursal_id?n.sucursal_id.ambiente:"",clave_acceso:n.clave_acceso,company_name:n.servicio.router_id.company_id.nombre_comercial,num_comprobante:n.num_comprobante,sucursal_id:n.sucursal_id!==null?n.sucursal_id.id:null,pago_id:n.id,ruc:n.servicio.perfil_internet.router_id.company_id.ruc,direccion:n.sucursal_id!==null?n.sucursal_id.direccion:null,emitido:me.formatDate(n.created_at,"DD/MM/YYYY"),vencimiento:me.formatDate(s,"DD/MM/YYYY"),precio:`${n.servicio.precio}`,tipo_comprobante:n.servicio.factura_id.tipo_comprobante,iva:v,pagos:n.pagos,pagado:k,estado:E,cancelado:k>=parseFloat(n.servicio.precio),expand:!1,loading:!1})})}catch(e){console.log(e)}},z=async(e,n)=>{y.value[n].loading=!0;let s={headers:{sucursal_id:e.sucursal_id}},v={ambiente:e.ambiente,clave_acceso:e.clave_acceso,company_name:e.company_name,sucursal_id:e.sucursal_id,customer_id:w.params.client_id,num_comprobante:e.num_comprobante,tipo:"EMISION",subtotal:parseFloat(e.precio),iva:parseFloat(e.iva),descuento:0,total:parseFloat(e.precio),entity:"Pagos",pago_id:e.pago_id,user_id:_.id,products:[{aplicaIva:e.iva>0,cantidad:1,pvp:e.precio,descuento:0,nombre:"SERVICIO DE INTERNET",codigoBarra:e.pago_id.split("-")[0]}]};e.estado.trim()=="ERROR ENVIO RECEPCION"&&await i.post("/CE/facturas/recepcionComprobantesOffline",v,s),e.estado.trim()=="RECIBIDA"&&await i.post("/CE/facturas/autorizacionComprobantesOffline",v,s),y.value[n].loading=!1},W=async(e,n,s=null)=>{s&&(e.company_name=s.company_name,e.ruc=s.ruc,e.direccion=s.direccion);const v=await M(),k={cliente:v[0].nombres,tipoDoc:v[0].tipo_documento,num_doc:v[0].numero_documento,email:v[0].email};await Qt.post("http://127.0.0.1:3001/api/impresion",{data:e,dataCliente:k,userName:_.fullName,tipo:n})},G=(e,n,s,v)=>{Mt.create({title:"\xBFEstas seguro de eliminar este abono?",message:`<span style="display: block;width: 100%;display: flex;align-items: center;">
                  <strong style="display: inline-block;width: 40%;text-align: end;">
                    Fecha abonado:
                  </strong> 
                  <label style="display: inline-block;width: 57%;" class="q-ml-xs">
                    ${e.fecha_abono} ${e.hora_abono}
                  </label>
                </span>
                <span style="display: block;width: 100%;display: flex;align-items: center;">
                  <strong style="display: inline-block;width: 40%;text-align: end;">
                    Forma de pago:
                  </strong> 
                  <label style="display: inline-block;width: 57%;" class="q-ml-xs">
                    ${e.forma_pago} 
                  </label>
                </span>
                <span style="display: block;width: 100%;display: flex;align-items: center;">
                  <strong style="display: inline-block;width: 40%;text-align: end;">
                    Valor Abonado:
                  </strong> 
                  <label style="display: inline-block;width: 57%;" class="q-ml-xs">
                    $${parseFloat(e.valor).toFixed(2)}
                  </label>                
                </span>`,html:!0,ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{try{const k=[...n];let E=0;k.reverse().map((A,O)=>{e.hora_abono==A.hora_abono&&e.valor==A.valor?A.delete=!0:(A.totalAbonado=(parseFloat(A.valor)+E).toString(),A.monto_pendiente=(parseFloat(s)-parseFloat(A.totalAbonado)).toString(),E+=parseFloat(A.totalAbonado))}),setTimeout(async()=>{const A=k.filter(O=>O.delete!==!0);await i.patch(`/pagos/${v}`,{pagos:A}),Q()},1e3)}catch(k){mostrarNotify("negative",k.response.data.message)}})},T=async e=>{await i.post(`/CE/facturas/getRide/${e}`,{},{responseType:"blob"}).then(n=>{var s=new Blob([n.data],{type:"application/pdf"}),v=URL.createObjectURL(s);window.open(v),this.overlay=!1}).catch(n=>{n.response.status==422&&this.$setLaravelErrors(n.response.data.errors),this.overlay=!1})};return Q(),C(),(e,n)=>(h(),te(Ee,null,[a(xe,{onSubmit:n[0]||(n[0]=()=>{})},{default:o(()=>[t("div",uo,[t("div",mo,[t("div",vo,[t("div",fo,[t("div",_o,[t("div",po,[a(et,{rows:p(y),columns:b.value,class:x([e.$q.dark.isActive?"":"my-sticky-header-table3"]),"hide-pagination":!0,"rows-per-page-options":[50],"row-key":"name"},{body:o(s=>[a(He,{props:s},{default:o(()=>[s.row.estado!="NO PAGADO"?(h(),S(j,{key:0,"auto-width":""},{default:o(()=>[a(K,{size:"sm",color:"accent",round:"",dense:"",onClick:v=>s.row.expand=!s.row.expand,icon:s.row.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1024)):(h(),S(j,{key:1,"auto-width":""})),a(j,{key:"n_comprobantes",props:s},{default:o(()=>[$(P(s.row.tipo_comprobante=="Recibo"?"Recibo":s.row.num_comprobante==""||s.row.num_comprobante==null?"- - - - - -":s.row.num_comprobante),1)]),_:2},1032,["props"]),a(j,{key:"emitido",props:s},{default:o(()=>[$(P(s.row.emitido),1)]),_:2},1032,["props"]),a(j,{key:"vencimiento",props:s},{default:o(()=>[$(P(s.row.vencimiento),1)]),_:2},1032,["props"]),a(j,{key:"precio",props:s},{default:o(()=>[$(" $"+P(s.row.precio),1)]),_:2},1032,["props"]),a(j,{key:"iva",props:s},{default:o(()=>[$(" $"+P(s.row.iva),1)]),_:2},1032,["props"]),a(j,{key:"pagado",props:s},{default:o(()=>[$(" $"+P(s.row.pagado),1)]),_:2},1032,["props"]),a(j,{key:"estado",props:s},{default:o(()=>[s.row.estado=="AUTORIZADO"?(h(),S(se,{key:0,outline:"",class:"q-py-xs q-px-md",color:"secondary"},{default:o(()=>[$(" PAGADO "),go,$(" Y "),bo,$(" AUTORIZADO ")]),_:1})):s.row.estado=="NO PAGADO"||s.row.estado=="PENDIENTE"?(h(),S(se,{key:1,outline:"",class:"q-py-xs q-px-md",color:e.$q.dark.isActive?"blue-grey-3":"blue-grey-7",label:s.row.estado},null,8,["color","label"])):(h(),S(se,{key:2,outline:"",class:"q-py-xs q-px-md",color:e.$q.dark.isActive?"warning":"orange-10"},{default:o(()=>[$(" PAGADO "),ho,$(" - "),yo,$(" "+P(s.row.estado),1)]),_:2},1032,["color"]))]),_:2},1032,["props"]),a(j,{key:"acciones",props:s},{default:o(()=>[s.row.cancelado?Y("",!0):(h(),S(K,{key:0,round:"",color:"blue-grey",onClick:v=>(N.value=!0,u.value=s.row),icon:"done",size:"10px",class:"q-mr-sm"},{default:o(()=>[a(ye,{class:"bg-indigo",anchor:"top middle",self:"center middle"},{default:o(()=>[$(" Agregar Pago ")]),_:1})]),_:2},1032,["onClick"])),s.row.estado=="ERROR ENVIO RECEPCION"||s.row.estado=="ERROR ENVIO RECEPCION - ANULACION"||s.row.estado=="RECIBIDA"?(h(),S(K,{key:1,round:"",color:"blue-grey",icon:"fa-solid fa-retweet",loading:s.row.loading,onClick:v=>z(s.row,s.rowIndex),size:"10px",class:"q-mr-sm"},{default:o(()=>[a(ye,{class:"bg-indigo",anchor:"top middle",self:"center middle"},{default:o(()=>[$(" Emitir Factura Electr\xF3nica ")]),_:1})]),_:2},1032,["loading","onClick"])):Y("",!0),s.row.estado=="AUTORIZADO"?(h(),S(K,{key:2,round:"",color:"blue-grey",icon:"print",onClick:v=>W(s.row,"factura"),size:"10px",class:"q-mr-sm"},{default:o(()=>[a(ye,{class:"bg-indigo",anchor:"top middle",self:"center middle"},{default:o(()=>[$(" Imprimir comprobante ")]),_:1})]),_:2},1032,["onClick"])):Y("",!0),s.row.estado=="AUTORIZADO"?(h(),S(K,{key:3,round:"",color:"blue-grey",icon:"fa-solid fa-file-pdf",onClick:v=>T(s.row.clave_acceso),size:"10px",class:"q-mr-sm"},{default:o(()=>[a(ye,{class:"bg-indigo",anchor:"top middle",self:"center middle"},{default:o(()=>[$(" Descargar PDF ")]),_:1})]),_:2},1032,["onClick"])):Y("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"]),le(a(He,{props:s},{default:o(()=>[a(j,{colspan:"100%"},{default:o(()=>[t("div",wo,[(h(!0),te(Ee,null,Rt(s.row.pagos,(v,k)=>(h(),te("div",{key:k,class:"col-4"},[a(Yt,{bordered:"",padding:"",dense:""},{default:o(()=>[a(H,{header:"",class:"text-center"},{default:o(()=>[$(" Fecha Abonado: "+P(v.fecha_abono)+" "+P(v.hora_abono),1)]),_:2},1024),le((h(),S(ue,{tag:"label"},{default:o(()=>[a(Z,null,{default:o(()=>[a(H,null,{default:o(()=>[$("Forma de Pago:")]),_:1})]),_:1}),a(Z,{side:"",top:"",class:"justify-center"},{default:o(()=>[a(H,null,{default:o(()=>[$(P(v.forma_pago),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[ce]]),le((h(),S(ue,{tag:"label",class:""},{default:o(()=>[a(Z,null,{default:o(()=>[a(H,null,{default:o(()=>[$("Valor Abonado:")]),_:1})]),_:1}),a(Z,{side:"",top:"",class:"justify-center"},{default:o(()=>[a(H,null,{default:o(()=>[$("$"+P(v.valor),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[ce]]),le((h(),S(ue,{tag:"label"},{default:o(()=>[a(Z,null,{default:o(()=>[a(H,null,{default:o(()=>[$("N\xBA transacci\xF3n:")]),_:1})]),_:1}),a(Z,{side:"",top:"",class:"justify-center"},{default:o(()=>[a(H,null,{default:o(()=>[$(P(v.n_transaccion),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[ce]]),le((h(),S(ue,{tag:"label"},{default:o(()=>[a(Z,null,{default:o(()=>[a(H,null,{default:o(()=>[$("Detalle:")]),_:1})]),_:1}),a(Z,{side:"",top:"",class:"justify-center"},{default:o(()=>[a(H,null,{default:o(()=>[$(P(v.detalle==""?"Sin detalles":v.detalle),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[ce]]),le((h(),S(ue,{tag:"label"},{default:o(()=>[a(Z,null,{default:o(()=>[a(H,{class:"text-center"},{default:o(()=>[s.row.estado=="PENDIENTE"?(h(),S(K,{key:0,square:"",onClick:E=>(N.value=!0,u.value={pagos:s.row,pago:v},c.value=!1),color:e.$q.dark.isActive?"blue-grey-2":"blue-grey-7",class:"q-px-md q-mr-md",outline:"",rounded:"",dense:"","icon-right":"edit"},null,8,["onClick","color"])):Y("",!0),a(K,{square:"",onClick:E=>W(v,"Recibo",s.row),color:e.$q.dark.isActive?"blue-grey-2":"blue-grey-7",class:"q-px-md",outline:"",rounded:"",dense:"","icon-right":"print"},null,8,["onClick","color"]),s.row.estado=="PENDIENTE"?(h(),S(K,{key:1,square:"",onClick:E=>G(v,s.row.pagos,s.row.precio,s.row.pago_id),color:e.$q.dark.isActive?"blue-grey-2":"blue-grey-7",class:"q-px-md q-ml-md",outline:"",rounded:"",dense:"","icon-right":"delete"},null,8,["onClick","color"])):Y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[ce]])]),_:2},1024)]))),128))])]),_:2},1024)]),_:2},1032,["props"]),[[Et,s.row.expand]])]),"no-data":o(({icon:s})=>[qo]),_:1},8,["rows","columns","class"])])])])])])])]),_:1}),a(Ft,{modelValue:p(N),"onUpdate:modelValue":n[1]||(n[1]=s=>Dt(N)?N.value=s:null)},{default:o(()=>[a(co,{servicio:u.value,nuevoPago:c.value,onActualizarDatos:Q},null,8,["servicio","nuevoPago"])]),_:1},8,["modelValue"])],64))}},xo={class:"q-gutter-y-md"},Co={__name:"FacturacionPagos",setup(l){const b=V("facturas");return(c,u)=>(h(),te("div",xo,[a(qe,null,{default:o(()=>[a(tt,{modelValue:b.value,"onUpdate:modelValue":u[0]||(u[0]=i=>b.value=i),draggable:"false",dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},{default:o(()=>[a(ve,{name:"facturas",label:"Facturas"}),a(ve,{name:"configuracion",label:"Configuraci\xF3n"})]),_:1},8,["modelValue"]),a(Me),a(at,{modelValue:b.value,"onUpdate:modelValue":u[1]||(u[1]=i=>b.value=i),animated:""},{default:o(()=>[a(fe,{name:"facturas"},{default:o(()=>[a($o)]),_:1}),a(fe,{name:"configuracion"},{default:o(()=>[a(za)]),_:1})]),_:1},8,["modelValue"])]),_:1})]))}};const ko={class:"q-gutter-y-md"},Po={__name:"IndexPage",setup(l){const b=V("resumen");return(c,u)=>(h(),te("div",ko,[a(qe,null,{default:o(()=>[a(tt,{modelValue:b.value,"onUpdate:modelValue":u[0]||(u[0]=i=>b.value=i),draggable:"false",dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:o(()=>[a(ve,{name:"resumen",label:"Resumen"}),a(ve,{name:"servicios",label:"Servicios"}),a(ve,{name:"facturacion/pagos",label:"Facturaci\xF3n/Pagos"})]),_:1},8,["modelValue"]),a(Me),a(at,{modelValue:b.value,"onUpdate:modelValue":u[1]||(u[1]=i=>b.value=i),animated:""},{default:o(()=>[a(fe,{name:"resumen"},{default:o(()=>[a(Da)]),_:1}),a(fe,{name:"servicios"},{default:o(()=>[b.value=="servicios"?(h(),S(Ua,{key:0})):Y("",!0)]),_:1}),a(fe,{name:"facturacion/pagos"},{default:o(()=>[b.value=="facturacion/pagos"?(h(),S(Co,{key:0})):Y("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1})]))}},To={class:"q-ma-lg q-pt-md"},Io={class:"row q-col-gutter-md",style:{"justify-content":"center"}},Vo={class:"text-h6 text-center",style:{position:"relative",top:"-8px",left:"17px"}},Ao={class:"row q-col-gutter-md",style:{"justify-content":"center"}},So={class:"col-xs-11 col-md-11 q-pt-xs"},tl={__name:"EditCliente",setup(l){const{api:b,route:c,formCliente:u,formFacturacion:i}=$e(),{servicios:R}=Ce(),y=V("");return(async()=>{R.value=[];const{data:_}=await b.get("/customers/find/"+c.params.client_id);_[0].planInternet.forEach(d=>{i.value={...d.factura_id},R.value.push({servicio_id:d.id,precio:d.precio,direccion:`${d.direccion==""?"- - - - -":d.direccion}`,fecha_instalacion:d.fecha_instalacion,ipv4:d.ipv4,nombre_plan:d.perfil_internet.nombre_plan,router:d.router_id.nombre,estado:`${d.isActive?"Activo":"Inactivo"}`})}),y.value=_[0].nombres,u.value={..._[0]}})(),(_,d)=>(h(),te(Ee,null,[t("div",To,[t("div",Io,[t("div",{class:x(["col-xs-12 q-pl-none",[_.$q.screen.width<1022?"q-pt-sm col-md-6":"col-md-6"]])},[a(_t,{class:x(["row q-mr-xs",[_.$q.screen.width<1022?"justify-center q-pt-sm":"justify-start "]])},{default:o(()=>[a(Ae,{label:"Inicio",icon:"home",to:"/"}),a(Ae,{label:"Clientes",icon:"fa-solid fa-list",to:"/clientes"}),a(Ae,{label:"Nuevo",icon:"add_circle"})]),_:1},8,["class"])],2),t("div",{class:x(["col-xs-12",[_.$q.screen.width<1022?"text-center q-pt-sm col-md-6 q-pl-none":"text-right col-md-5"]])},[t("label",Vo,P(y.value),1)],2)])]),t("div",Ao,[t("div",So,[a(qe,{flat:"",class:"shadow_custom q-pt-none"},{default:o(()=>[a(Po,{edit:!0})]),_:1})])])],64))}};export{tl as default};
