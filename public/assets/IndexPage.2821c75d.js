import{Q as P,a as b,b as V}from"./QTable.53dd9133.js";import{Q as E,a as x}from"./QTooltip.225b355e.js";import{r as p,D as I,o as t,c as u,e as m,f as s,g as o,aP as L,ad as i,aj as c,am as f,ah as R,al as S,h as d,Q as U,aU as j,i as _,R as q,ae as k,af as h}from"./index.5dd10283.js";import{Q as z}from"./QBadge.b3e59354.js";import{Q as G}from"./QPageSticky.63323a81.js";import{C as D}from"./ClosePopup.96ab75e3.js";import{u as H}from"./useCliente.397e33eb.js";import"./QList.bdbe1265.js";import"./QSelect.8e3666f0.js";import"./QChip.048e91b3.js";import"./QItemLabel.d0a97cb7.js";import"./format.2bc25e5f.js";import"./useHelpers.e76a1553.js";import"./use-quasar.900b3eea.js";import"./axios.17c54324.js";import"./date.71d9da42.js";const J={class:"q-ma-lg q-pt-md"},K={class:"row q-col-gutter-lg"},M={class:"col-12"},O={key:0},W={key:1},X={key:2},Y={class:"full-width row flex-center text-lime-10 q-gutter-sm"},Z=m("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),ve={__name:"IndexPage",setup(ee){const T=[{name:"acciones",label:"acciones",align:"center"},{name:"nombre",align:"center",label:"Cliente",field:"nombres",sortable:!0},{name:"tipo_documento",align:"center",label:"Tipo de Documento",field:"tipo_documento"},{name:"numero_documento",align:"center",label:"Numero de Documento",field:"numero_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Celular",field:"celular",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{api:w,mostrarNotify:C,confirmDelete:A,isDeleted:B,loading:y}=H();const g=p(""),$=p([]),v=async()=>{y.value=!0;try{const{data:l}=await w.get("/customers");$.value=l}catch(l){C("warning",l.response.data.message)}y.value=!1},Q=async(l,a)=>{try{const{data:{msg:e}}=await w.patch(`/customers/${l}/${a}`);C("positive",e),v()}catch(e){console.log(e)}};I(B,(l,a)=>{l&&v()});const F=async l=>{try{A("Estas seguro de eliminar este cliente?",`/customers/${l}`)}catch(a){console.log(a)}};v();const r=p("list"),N=p({rowsPerPage:10});return(l,a)=>(t(),u(f,null,[m("div",J,[m("div",K,[m("div",M,[s(L,{flat:"",class:"shadow_custom"},{default:o(()=>[s(P,{"title-class":"text-grey-7 text-h6",title:"Listado de Clientes",rows:$.value,loading:R(y),"hide-header":r.value==="grid",columns:T,"row-key":"name",grid:r.value==="grid",filter:g.value,pagination:N.value},{header:o(e=>[s(E,{props:e,style:{height:"60px"}},{default:o(()=>[(t(!0),u(f,null,S(e.cols,n=>(t(),i(V,{key:n.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:o(()=>[k(h(n.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":o(e=>[l.$q.screen.xs?c("",!0):(t(),i(d,{key:0,onClick:a[0]||(a[0]=n=>l.$router.push({name:"cliente.add"})),outline:"",color:"primary",label:"Agregar Cliente",class:"q-mr-xs"})),s(U,{style:j(l.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=n=>g.value=n),placeholder:"Buscar..."},{append:o(()=>[s(_,{name:"search"})]),_:1},8,["style","modelValue"]),r.value==="list"?(t(),i(d,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:o(()=>[q((t(),i(x,{disable:l.$q.platform.is.mobile},{default:o(()=>[k(h(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[D]])]),_:2},1032,["icon","onClick"])):c("",!0),e.inFullscreen?c("",!0):(t(),i(d,{key:2,flat:"",round:"",dense:"",icon:r.value==="grid"?"list":"grid_on",onClick:a[2]||(a[2]=n=>{r.value=r.value==="grid"?"list":"grid",l.separator=r.value==="grid"?"none":"horizontal"})},{default:o(()=>[q((t(),i(x,{disable:l.$q.platform.is.mobile},{default:o(()=>[k(h(r.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[D]])]),_:1},8,["icon"]))]),"body-cell-tipo_documento":o(e=>[s(b,{props:e},{default:o(()=>[m("div",null,[e.row.tipo_documento==4?(t(),u("label",O,"RUC")):e.row.tipo_documento==5?(t(),u("label",W,"Cedula")):(t(),u("label",X,"Pasaporte"))])]),_:2},1032,["props"])]),"body-cell-estado":o(e=>[s(b,{props:e},{default:o(()=>[e.row.isActive?(t(),i(z,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(t(),i(z,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":o(e=>[s(b,{props:e},{default:o(()=>[e.row.isActive?(t(),i(d,{key:0,round:"",color:"blue-grey",onClick:n=>l.$router.push({name:"cliente.edit",params:{client_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):c("",!0),e.row.isActive?(t(),u(f,{key:1},[e.row.isActive?(t(),i(d,{key:0,round:"",color:"blue-grey",icon:"close",onClick:n=>Q(e.row.id,!1),size:"10px"},null,8,["onClick"])):c("",!0)],64)):(t(),u(f,{key:2},[e.row.isActive?c("",!0):(t(),i(d,{key:0,round:"",color:"blue-grey",icon:"done",onClick:n=>Q(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.estado?c("",!0):(t(),i(d,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:n=>F(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":o(({icon:e})=>[m("div",Y,[s(_,{size:"2em",name:"sentiment_dissatisfied"}),Z,s(_,{size:"2em",name:g.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),l.$q.screen.xs?(t(),i(G,{key:0,position:"bottom-right",offset:[18,18]},{default:o(()=>[s(d,{round:"",color:"secondary",size:"lg",icon:"add",onClick:a[3]||(a[3]=e=>l.$router.push({name:"cliente.add"}))})]),_:1})):c("",!0)],64))}};export{ve as default};
