import{api as t}from"./axios.aaa8af3b.js";import{u as h}from"./useHelpers.aa70fe88.js";import{r as u}from"./index.34de80b5.js";const o=u(!1),d=u([]),r=u({id:"",nombre:"",router_id:"",red:"",cidr:"",tipo_uso:""}),s=u({nombre:{message:"",isValid:!0},router_id:{message:"",isValid:!0},red:{message:"",isValid:!0},cidr:{message:"",isValid:!0},tipo_uso:{message:"",isValid:!0}}),I=b=>{const{mostrarNotify:n,claim:c,router:m,route:p}=h(),l=["nombre","router_id","cidr","tipo_uso"],v=async()=>{d.value=[];const{data:e}=await t.get(`/router/find/${c.company.id}`);e.forEach(a=>{d.value.push({label:a.nombre,value:a.id})})},f=()=>{r.value={id:"",nombre:"",router_id:"",red:"",cidr:"",tipo_uso:""}},g=()=>{l.push("red"),l.forEach(e=>{s.value[e].isValid=!0})},_=()=>{let e=!1;l.forEach(i=>{(r.value[i].length==0||r.value[i]==0)&&(s.value[i].message="Debes completar este campo",s.value[i].isValid=!1,e=!0)});const a=r.value.red.split(".");return a.length==1?(s.value.red.message="Ingresa la IP de la red",s.value.red.isValid=!1,e=!0):a.length>1&&(a[0].includes("_")||a[1].includes("_")||a[2].includes("_")||a[3].includes("_"))&&(s.value.red.message="Completa este campo",s.value.red.isValid=!1,e=!0),e};return{api:t,claim:c,cargarRouter:v,formRed:r,loading:o,listRouter:d,limpiarFormulario:f,validaciones:s,quitarErrores:g,route:p,onSubmit:async e=>{if(!_())try{o.value=!0,e?await t.patch(`/red-ipv4/${r.value.id}`,r.value):await t.post("/red-ipv4",r.value),n("positive",`Router ${e?"editado":"agregado"} exitosamente`),o.value=!1,m.push({name:"redesIpv4.index"})}catch(a){o.value=!1,n("warning",a.response.data.message)}}}};export{I as u};
