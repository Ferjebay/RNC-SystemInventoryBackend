import{Q as D,a as w,b as I}from"./QTable.a29e230b.js";import{Q as R,a as Q}from"./QTooltip.eb0eb4b7.js";import{d as S,r as g,v as L,o,c as b,e as p,f as s,g as a,aR as O,ad as u,a9 as t,af as d,aj as v,ai as U,h as c,Q as j,aW as G,i as C,O as q,aa as y,ab as k}from"./index.a0af90d8.js";import{Q as E}from"./QBadge.57a9e4b4.js";import{Q as H}from"./QPageSticky.daef24f0.js";import{C as z}from"./ClosePopup.0a722c91.js";import{u as W}from"./useHelpers.c128bb69.js";import{u as J}from"./useEmpresa.afbe0d00.js";import{u as K}from"./useRolPermisos.c221bf10.js";import"./QList.600b1838.js";import"./QSelect.a8dffeb9.js";import"./QChip.1e4a924c.js";import"./QItemLabel.f168f8c2.js";import"./format.cbf00d5d.js";import"./use-quasar.094693f8.js";import"./axios.678fca59.js";const M={class:"q-ma-lg q-pt-md"},X={class:"row q-col-gutter-lg"},Y={class:"col-12"},Z={class:"full-width row flex-center text-lime-10 q-gutter-sm"},ee=p("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),ye=S({__name:"IndexPage",setup(ae){const F=[{name:"acciones",label:"Acciones",align:"center"},{label:"R.U.C",field:"ruc",align:"left",name:"b"},{label:"Nombre Comercial",field:"nombre_comercial",align:"left",name:"c"},{label:"Raz\xF3n Social",field:"razon_social",align:"left",name:"d"},{label:"Telefono",field:"telefono",align:"center",name:"e"},{label:"Email",field:"email",name:"email",align:"center"},{label:"Obligado Contabilidad",name:"obligadoContabilidad",align:"center"},{label:"Estado",name:"estado",align:"center"}];let{api:_}=J();const{validarPermisos:m}=K(),f=g(""),$=g([]),N=g(!1),{mostrarNotify:T,confirmDelete:A,isDeleted:B}=W(),h=async()=>{const{data:l}=await _.get("/companies");$.value=l},x=async(l,i)=>{try{const{data:{msg:e}}=await _.patch(`/companies/${l}/${i}`);T("positive",e),h()}catch(e){console.log(e)}};L(B,(l,i)=>{l&&h()});const P=async l=>{A("Estas seguro de eliminar esta empresa?",`/companies/${l}`)};h();const n=g("list"),V=g({rowsPerPage:10});return(l,i)=>(o(),b(v,null,[p("div",M,[p("div",X,[p("div",Y,[s(O,{flat:"",class:"shadow_custom"},{default:a(()=>[s(D,{"title-class":"text-grey-7 text-h6",title:"Listado de Empresas",rows:$.value,loading:N.value,"hide-header":n.value==="grid",columns:F,"row-key":"name",grid:n.value==="grid",filter:f.value,pagination:V.value},{header:a(e=>[s(R,{props:e,style:{height:"60px"}},{default:a(()=>[(o(!0),b(v,null,U(e.cols,r=>(o(),t(I,{key:r.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:a(()=>[y(k(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":a(e=>[!l.$q.screen.xs&&u(m)("crear.empresa")?(o(),t(c,{key:0,onClick:i[0]||(i[0]=r=>l.$router.push({name:"Agregar Empresa"})),outline:"",color:"primary",label:"Agregar Empresa",class:"q-mr-xs"})):d("",!0),s(j,{style:G(l.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":i[1]||(i[1]=r=>f.value=r),placeholder:"Buscar..."},{append:a(()=>[s(C,{name:"search"})]),_:1},8,["style","modelValue"]),n.value==="list"?(o(),t(c,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:a(()=>[q((o(),t(Q,{disable:l.$q.platform.is.mobile},{default:a(()=>[y(k(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[z]])]),_:2},1032,["icon","onClick"])):d("",!0),e.inFullscreen?d("",!0):(o(),t(c,{key:2,flat:"",round:"",dense:"",icon:n.value==="grid"?"list":"grid_on",onClick:i[2]||(i[2]=r=>{n.value=n.value==="grid"?"list":"grid",l.separator=n.value==="grid"?"none":"horizontal"})},{default:a(()=>[q((o(),t(Q,{disable:l.$q.platform.is.mobile},{default:a(()=>[y(k(n.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[z]])]),_:1},8,["icon"]))]),"body-cell-obligadoContabilidad":a(e=>[s(w,{props:e},{default:a(()=>[y(k(e.row.obligado_contabilidad?"SI":"NO"),1)]),_:2},1032,["props"])]),"body-cell-estado":a(e=>[s(w,{props:e},{default:a(()=>[e.row.isActive?(o(),t(E,{key:0,outline:"",color:"positive",label:"Activo",ss:"q-pa-sm"})):(o(),t(E,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":a(e=>[s(w,{props:e},{default:a(()=>[e.row.isActive?(o(),b(v,{key:0},[u(m)("editar.empresa")?(o(),t(c,{key:0,round:"",color:"blue-grey",onClick:r=>l.$router.push({name:"Editar Empresa",params:{empresa_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"])):d("",!0),u(m)("inactivar.empresa")?(o(),t(c,{key:1,round:"",color:"blue-grey",icon:"close",onClick:r=>x(e.row.id,!1),size:"10px"},null,8,["onClick"])):d("",!0)],64)):(o(),b(v,{key:1},[u(m)("activar.empresa")?(o(),t(c,{key:0,round:"",color:"blue-grey",icon:"done",onClick:r=>x(e.row.id,!0),size:"10px"},null,8,["onClick"])):d("",!0),!e.row.estado&&u(m)("eliminar.empresa")?(o(),t(c,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:r=>P(e.row.id),size:"10px"},null,8,["onClick"])):d("",!0)],64))]),_:2},1032,["props"])]),"no-data":a(({icon:e})=>[p("div",Z,[s(C,{size:"2em",name:"sentiment_dissatisfied"}),ee,s(C,{size:"2em",name:f.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),l.$q.screen.xs&&u(m)("crear.empresa")?(o(),t(H,{key:0,position:"bottom-right",offset:[18,18]},{default:a(()=>[s(c,{round:"",color:"secondary",size:"lg",icon:"add",onClick:i[3]||(i[3]=e=>l.$router.push({name:"Agregar Empresa"}))})]),_:1})):d("",!0)],64))}});export{ye as default};
