import{Q as K,a as $,b as A,c as M}from"./QTable.4623bfd2.js";import{Q as W,a as T}from"./QTooltip.8de217d5.js";import{d as I,o,ab as n,g as a,aN as P,f as l,e as _,ac as p,O as V,h as d,aO as B,N as X,r as v,C as D,c as w,ah as m,af as f,aQ as g,aR as S,ak as k,aj as Y,Q as Z,i as q,ad as h}from"./index.9a69bdf9.js";import{Q as ee}from"./QPageSticky.ba34640d.js";import{C as z}from"./ClosePopup.d29d88a9.js";import{u as ae}from"./useHelpers.110a86a1.js";import{u as R,_ as le,a as oe}from"./AddEmpresa.7b91b1f7.js";import"./QList.565596f8.js";import"./QSelect.d1e92d92.js";import"./QChip.cdeb0aad.js";import"./QItemLabel.a344fdf0.js";import"./format.2bc25e5f.js";import"./use-quasar.882813a0.js";import"./axios.1a9376d4.js";import"./QFile.ea296c12.js";import"./QForm.951ed4e0.js";const te={class:"text-h6"},ie=I({__name:"EditEmpresa",setup(L){const{isValid:C}=R();return C.vulue=!1,(x,Q)=>(o(),n(P,{style:{width:"843px !important","max-width":"fit-content"}},{default:a(()=>[l(B,null,{default:a(()=>[_("div",te,[p(" Editar Empresa "),V(l(d,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[z]])])]),_:1}),l(X,{inset:""}),l(B,{class:"q-pt-none"},{default:a(()=>[l(le,{edit:!0})]),_:1})]),_:1}))}}),se={class:"q-ma-lg q-pt-md"},ne={class:"row q-col-gutter-lg"},re={class:"col-12"},de={class:"full-width row flex-center text-lime-10 q-gutter-sm"},ce=_("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),$e=I({__name:"IndexPage",setup(L){const C=[{name:"acciones",label:"Acciones",align:"center"},{label:"R.U.C",field:"ruc",align:"left",name:"b"},{label:"Nombre Comercial",field:"nombre_comercial",align:"left",name:"c"},{label:"Raz\xF3n Social",field:"razon_social",align:"left",name:"d"},{label:"Telefono",field:"telefono",align:"center",name:"e"},{label:"Email",field:"email",name:"email",align:"center"},{label:"Obligado Contabilidad",name:"obligadoContabilidad",align:"center"},{label:"Estado",name:"estado",align:"center"}];let{api:x,actualizarLista:Q,modalAgregarEmpresa:s,modalEditarEmpresa:u,formEmpresa:E}=R();const b=v(""),N=v([]),O=v(!1),{mostrarNotify:U,confirmDelete:j,isDeleted:G}=ae();D(Q,(i,t)=>{i&&y()});const y=async()=>{const{data:i}=await x.get("/companies");N.value=i,Q.value=!1},F=async(i,t)=>{try{const{data:{msg:e}}=await x.patch(`/companies/${i}/${t}`);U("positive",e),y()}catch(e){console.log(e)}};D(G,(i,t)=>{i&&y()});const H=async i=>{j("Estas seguro de eliminar esta empresa?",`/companies/${i}`)};y();const c=v("list"),J=v({rowsPerPage:10});return(i,t)=>(o(),w(k,null,[_("div",se,[_("div",ne,[_("div",re,[l(P,{flat:"",class:"shadow_custom"},{default:a(()=>[l(K,{"title-class":"text-grey-7 text-h6",title:"Listado de Empresas",rows:N.value,loading:O.value,"hide-header":c.value==="grid",columns:C,"row-key":"name",grid:c.value==="grid",filter:b.value,pagination:J.value},{header:a(e=>[l(W,{props:e,style:{height:"60px"}},{default:a(()=>[(o(!0),w(k,null,Y(e.cols,r=>(o(),n(M,{key:r.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:a(()=>[p(h(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":a(e=>[i.$q.screen.xs?m("",!0):(o(),n(d,{key:0,onClick:t[0]||(t[0]=r=>g(s)?s.value=!f(s):s=!f(s)),outline:"",color:"primary",label:"Agregar Empresa",class:"q-mr-xs"})),l(Z,{outlined:"",dense:"",debounce:"300",modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=r=>b.value=r),placeholder:"Buscar..."},{append:a(()=>[l(q,{name:"search"})]),_:1},8,["modelValue"]),c.value==="list"?(o(),n(d,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:a(()=>[V((o(),n(T,{disable:i.$q.platform.is.mobile},{default:a(()=>[p(h(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[z]])]),_:2},1032,["icon","onClick"])):m("",!0),e.inFullscreen?m("",!0):(o(),n(d,{key:2,flat:"",round:"",dense:"",icon:c.value==="grid"?"list":"grid_on",onClick:t[2]||(t[2]=r=>{c.value=c.value==="grid"?"list":"grid",i.separator=c.value==="grid"?"none":"horizontal"})},{default:a(()=>[V((o(),n(T,{disable:i.$q.platform.is.mobile},{default:a(()=>[p(h(c.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[z]])]),_:1},8,["icon"]))]),"body-cell-obligadoContabilidad":a(e=>[l($,{props:e},{default:a(()=>[p(h(e.row.obligado_contabilidad?"SI":"NO"),1)]),_:2},1032,["props"])]),"body-cell-estado":a(e=>[l($,{props:e},{default:a(()=>[e.row.isActive?(o(),n(A,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(o(),n(A,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":a(e=>[l($,{props:e},{default:a(()=>[e.row.isActive?(o(),w(k,{key:0},[l(d,{round:"",color:"blue-grey",onClick:r=>(g(E)?E.value={...e.row,logo:null,logo_old:e.row.logo==null?null:e.row.logo,archivo_certificado:null,archivo_certificado_old:e.row.archivo_certificado}:E={...e.row,logo:null,logo_old:e.row.logo==null?null:e.row.logo,archivo_certificado:null,archivo_certificado_old:e.row.archivo_certificado},g(u)?u.value=!0:u=!0),icon:"edit",class:"q-mr-sm",size:"10px"},null,8,["onClick"]),e.row.isActive?(o(),n(d,{key:0,round:"",color:"blue-grey",icon:"close",onClick:r=>F(e.row.id,!1),size:"10px"},null,8,["onClick"])):m("",!0)],64)):(o(),w(k,{key:1},[e.row.isActive?m("",!0):(o(),n(d,{key:0,round:"",color:"blue-grey",icon:"done",onClick:r=>F(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.estado?m("",!0):(o(),n(d,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:r=>H(e.row.id),size:"10px"},null,8,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":a(({icon:e})=>[_("div",de,[l(q,{size:"2em",name:"sentiment_dissatisfied"}),ce,l(q,{size:"2em",name:b.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),i.$q.screen.xs?(o(),n(ee,{key:0,position:"bottom-right",offset:[18,18]},{default:a(()=>[l(d,{round:"",color:"secondary",size:"lg",icon:"add",onClick:t[3]||(t[3]=e=>g(s)?s.value=!f(s):s=!f(s))})]),_:1})):m("",!0),l(S,{modelValue:f(s),"onUpdate:modelValue":t[4]||(t[4]=e=>g(s)?s.value=e:s=e)},{default:a(()=>[l(oe)]),_:1},8,["modelValue"]),l(S,{modelValue:f(u),"onUpdate:modelValue":t[5]||(t[5]=e=>g(u)?u.value=e:u=e)},{default:a(()=>[l(ie)]),_:1},8,["modelValue"])],64))}});export{$e as default};
