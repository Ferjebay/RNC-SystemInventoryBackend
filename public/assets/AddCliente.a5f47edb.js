import{r as m,v as U,D as S,d as D,o as N,ad as w,g as v,ah as o,e as a,ai as y,f as u,Q as d,h as Q,aP as B,ae as F,R as M,aQ as x,O as z}from"./index.d41bbc77.js";import{C as K}from"./ClosePopup.1e4fc19e.js";import{u as A}from"./useHelpers.26f595d3.js";import{api as C}from"./axios.285a4291.js";import{Q as E}from"./QSelect.e2298bca.js";import{Q as O}from"./QForm.430f58c0.js";const _=m(!1),e=m({company_id:"",nombres:"",tipo_documento:"",numero_documento:"",email:"",celular:"",direccion:""}),h=m(!1),V=m(!1),q=m(!1),$=()=>{const{claim:c,mostrarNotify:r}=A(),l=()=>{e.value.nombres="",e.value.tipo_documento="",e.value.numero_documento="",e.value.email="",e.value.celular="",e.value.direccion=""},p=()=>{e.value.numero_documento=e.value.numero_documento.replace(/\D/g,""),e.value.celular=e.value.celular.replace(/\D/g,"")};return U(()=>{S(e.value,(t,f)=>{if(e.value.nombres=t.nombres.toUpperCase(),t.tipo_documento!==""&&t.tipo_documento!=="04"&&e.value.numero_documento.length>10){const g=t.numero_documento.length-10,i=t.numero_documento.substring(0,t.numero_documento.length-g);e.value.numero_documento=i}})}),{actualizarLista:q,formCliente:e,loading:_,limpiarFormulario:l,allowOnlyNumber:p,modalAgregarCliente:h,modalEditarCliente:V,validateNumDocument:[t=>t.length>=(e.value.tipo_documento==="04"?13:10)||`Debes completar ${e.value.tipo_documento==="04"?13:10} digitos`],validateNumCelular:[t=>t.length>=10||"Debes completar 10 digitos"],onSubmit:async t=>{try{_.value=!0,e.value.company_id=c.company.id,t?await C.patch("/customers/"+e.value.id,e.value):await C.post("/customers",e.value),r("positive",`Cliente ${t?"editado":"agregado"} exitosamente`),h.value=!1,V.value=!1,q.value=!0,_.value=!1}catch(f){r("warning",f.response.data.message),_.value=!1}}}},P={class:"row q-pt-lg q-gutter-lg justify-center"},T=a("label",null,"Nombres:",-1),j={class:"col-xs-12 col-sm-5"},k=a("label",null,"Tipo de Documento:",-1),R={class:"col-xs-12 col-sm-5"},G=a("label",null,"Numero de Documento:",-1),H={class:"col-xs-12 col-sm-5"},I=a("label",null,"Email:",-1),L={class:"col-xs-12 col-sm-5"},J=a("label",null,"Celular:",-1),W=a("label",null,"Direcci\xF3n:",-1),X={class:"col-xs-9 col-sm-12 flex justify-center"},Y=D({__name:"FormCliente",props:{edit:{type:Boolean}},setup(c){const r=c,{formCliente:l,loading:p,allowOnlyNumber:b,validateNumDocument:t,validateNumCelular:f,onSubmit:g}=$();return(i,s)=>(N(),w(O,{onSubmit:s[6]||(s[6]=n=>o(g)(r.edit))},{default:v(()=>[a("div",P,[a("div",{class:y(["col-xs-12 col-sm-11",[i.$q.screen.xs?"":"q-px-md"]])},[T,u(d,{modelValue:o(l).nombres,"onUpdate:modelValue":s[0]||(s[0]=n=>o(l).nombres=n),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])],2),a("div",j,[k,u(E,{dense:"",modelValue:o(l).tipo_documento,"onUpdate:modelValue":s[1]||(s[1]=n=>o(l).tipo_documento=n),modelModifiers:{trim:!0},filled:"","emit-value":"","map-options":"",options:[{label:"RUC",value:"04"},{label:"Cedula",value:"05"},{label:"Pasaporte",value:"06"}]},null,8,["modelValue"])]),a("div",R,[G,u(d,{type:i.$q.platform.is.mobile?"number":"text",modelValue:o(l).numero_documento,"onUpdate:modelValue":s[2]||(s[2]=n=>o(l).numero_documento=n),readonly:o(l).tipo_documento==="",counter:"",maxlength:o(l).tipo_documento==="04"?13:10,rules:o(t),"lazy-rules":"",dense:"",filled:"",required:"",onKeyup:o(b)},null,8,["type","modelValue","readonly","maxlength","rules","onKeyup"])]),a("div",H,[I,u(d,{modelValue:o(l).email,"onUpdate:modelValue":s[3]||(s[3]=n=>o(l).email=n),modelModifiers:{trim:!0},type:"email",dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",L,[J,u(d,{type:i.$q.platform.is.mobile?"number":"text",modelValue:o(l).celular,"onUpdate:modelValue":s[4]||(s[4]=n=>o(l).celular=n),modelModifiers:{trim:!0},counter:"",maxlength:"10",rules:o(f),"lazy-rules":"",onKeyup:o(b),dense:"",filled:"",required:""},null,8,["type","modelValue","rules","onKeyup"])]),a("div",{class:y(["col-xs-12 col-sm-11",[i.$q.screen.xs?"":"q-px-md"]])},[W,u(d,{modelValue:o(l).direccion,"onUpdate:modelValue":s[5]||(s[5]=n=>o(l).direccion=n),dense:"",filled:"",required:""},null,8,["modelValue"])],2),a("div",X,[u(Q,{label:i.edit?"Editar":"Guardar",loading:o(p),class:"q-px-xl",type:"submit",color:"green-9"},null,8,["label","loading"])])])]),_:1}))}}),Z={class:"text-h6 text-center"},ne=D({__name:"AddCliente",setup(c){const{limpiarFormulario:r}=$();return r(),(l,p)=>(N(),w(B,{style:{width:"710px !important","max-width":"fit-content"}},{default:v(()=>[u(x,null,{default:v(()=>[a("div",Z,[F(" Agregar Cliente "),M(u(Q,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[K]])])]),_:1}),u(z,{inset:""}),u(x,{class:"q-pt-none"},{default:v(()=>[u(Y,{edit:!1})]),_:1})]),_:1}))}});export{ne as _,Y as a,$ as u};
