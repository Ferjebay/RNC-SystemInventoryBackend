import{Q as z,a as C,b as A,c as I}from"./QTable.43eb5067.js";import{Q as $,a as Q}from"./QTooltip.161c43e5.js";import{d as D,r as u,C as v,t as R,o as i,c as p,e as f,f as r,g as a,aN as U,ak as H,aj as L,Q as S,i as w,ab as c,O as q,ac as h,ad as b,h as y,ah as B}from"./index.f79d0ec0.js";import{C as F}from"./ClosePopup.7ee0673a.js";import{api as j}from"./axios.bfe01e18.js";import{u as G}from"./useEmail.ef268fa0.js";import{u as M}from"./useHelpers.6134727c.js";import"./QList.b3782200.js";import"./QSelect.a2bd1843.js";import"./QChip.d3919d7a.js";import"./QItemLabel.4dc0bf17.js";import"./format.2bc25e5f.js";import"./use-quasar.d82b6d9b.js";const O={class:"q-ma-lg q-pt-md"},J={class:"row q-col-gutter-lg"},K={class:"col-12"},W={key:0},X={key:1},Y={class:"full-width row flex-center text-lime-10 q-gutter-sm"},Z=f("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),he=D({__name:"IndexPage",setup(ee){let{actualizarTabla:P,modalAgregarProducto:ae,modalEditarProducto:te,formProduct:oe}=G();const E=[{name:"acciones",label:"acciones",align:"center"},{name:"empresa_name",label:"Empresa",align:"center",field:"empresa_name"},{name:"host",label:"Host",align:"center",field:"host"},{name:"puerto",label:"Puerto",align:"center",field:"puerto"},{name:"usuario",label:"Usuario",align:"center",field:"usuario"},{name:"password",label:"Contrase\xF1a",align:"center",field:"password"}],{mostrarNotify:se,confirmDelete:le,isDeleted:N}=M(),x=u([]),T=u("codigo"),m=u(""),k=u(),_=u(!1),n=u({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:5});v(N,(l,o)=>{l&&g(1,n.value.rowsPerPage,null)}),v(T,(l,o)=>{g(1,n.value.rowsPerPage,null)}),v(P,(l,o)=>{l&&(g(1,n.value.rowsPerPage,null),P.value=!1)});const g=async(l=1,o=5,e=null)=>{try{const{data:t}=await j.get("/email");console.log(t),t.forEach(s=>{s.empresa_name=s.company_id.nombre_comercial,s.host=s.host==""?"----------":s.host,s.usuario=s.usuario==""?"----------":s.usuario,s.password=s.password==""?"----------":s.password}),x.value=t}catch(t){console.log(t)}};async function V(l){const{page:o,rowsPerPage:e,sortBy:t,descending:s}=l.pagination;_.value=!0,await g(o,e),n.value.page=o,n.value.rowsPerPage=e,n.value.sortBy=t,n.value.descending=s,_.value=!1}R(()=>{k.value.requestServerInteraction()});const d=u("list");return(l,o)=>(i(),p("div",O,[f("div",J,[f("div",K,[r(U,{flat:"",class:"shadow_custom"},{default:a(()=>[r(z,{"title-class":"text-grey-7 text-h6",title:"Emails Config",rows:x.value,loading:_.value,"hide-header":d.value==="grid",columns:E,"row-key":"name",grid:d.value==="grid",filter:m.value,pagination:n.value,"onUpdate:pagination":o[2]||(o[2]=e=>n.value=e),"rows-per-page-options":[3,7,15,0],ref_key:"tableRef",ref:k,"binary-state-sort":"",onRequest:V},{header:a(e=>[r($,{props:e,style:{height:"60px"}},{default:a(()=>[(i(!0),p(H,null,L(e.cols,t=>(i(),c(I,{key:t.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:a(()=>[h(b(t.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":a(e=>[r(S,{outlined:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=t=>m.value=t),placeholder:"Buscar..."},{append:a(()=>[r(w,{name:"search"})]),_:1},8,["modelValue"]),d.value==="list"?(i(),c(y,{key:0,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:a(()=>[q((i(),c(Q,{disable:l.$q.platform.is.mobile},{default:a(()=>[h(b(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[F]])]),_:2},1032,["icon","onClick"])):B("",!0),e.inFullscreen?B("",!0):(i(),c(y,{key:1,flat:"",round:"",dense:"",icon:d.value==="grid"?"list":"grid_on",onClick:o[1]||(o[1]=t=>{d.value=d.value==="grid"?"list":"grid",l.separator=d.value==="grid"?"none":"horizontal"})},{default:a(()=>[q((i(),c(Q,{disable:l.$q.platform.is.mobile},{default:a(()=>[h(b(d.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[F]])]),_:1},8,["icon"]))]),"body-cell-acciones":a(e=>[r(C,{props:e},{default:a(()=>[r(y,{color:"indigo",icon:"edit",label:"Editar",size:"md",class:"q-px-md",onClick:t=>l.$router.push({name:"email.edit",params:{email_id:e.row.company_id.id}})},null,8,["onClick"])]),_:2},1032,["props"])]),"body-cell-estado":a(e=>[r(C,{props:e},{default:a(()=>[r(A,{outline:"",class:"q-py-xs q-px-md",color:e.row.isActive?"positive":"dark"},{default:a(()=>[e.row.isActive?(i(),p("span",W,"Activo")):(i(),p("span",X,"Inactivo"))]),_:2},1032,["color"])]),_:2},1032,["props"])]),"no-data":a(({icon:e})=>[f("div",Y,[r(w,{size:"2em",name:"sentiment_dissatisfied"}),Z,r(w,{size:"2em",name:m.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]))}});export{he as default};
