import{Q as z,a as C,b as A,c as I}from"./QTable.09f856ca.js";import{Q as $,a as Q}from"./QTooltip.32cb7c17.js";import{d as D,r as u,C as v,t as R,o as i,c as g,e as f,f as r,g as a,aN as U,ak as H,aj as L,Q as S,i as w,ab as c,O as q,ac as h,ad as b,h as y,ah as B}from"./index.f22722bd.js";import{C as F}from"./ClosePopup.fd71a8b2.js";import{api as j}from"./axios.08aaed9e.js";import{u as G}from"./useEmail.f79db192.js";import{u as M}from"./useHelpers.338f1731.js";import"./QList.704abf2c.js";import"./QSelect.3e31a6de.js";import"./QChip.90496d82.js";import"./QItemLabel.4426becf.js";import"./format.2bc25e5f.js";import"./use-quasar.a4e78766.js";const O={class:"q-ma-lg q-pt-md"},J={class:"row q-col-gutter-lg"},K={class:"col-12"},W={key:0},X={key:1},Y={class:"full-width row flex-center text-lime-10 q-gutter-sm"},Z=f("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),he=D({__name:"IndexPage",setup(ee){let{actualizarTabla:P,modalAgregarProducto:ae,modalEditarProducto:te,formProduct:oe}=G();const E=[{name:"acciones",label:"acciones",align:"center"},{name:"empresa_name",label:"Empresa",align:"center",field:"empresa_name"},{name:"host",label:"Host",align:"center",field:"host"},{name:"puerto",label:"Puerto",align:"center",field:"puerto"},{name:"usuario",label:"Usuario",align:"center",field:"usuario"},{name:"password",label:"Contrase\xF1a",align:"center",field:"password"}],{mostrarNotify:se,confirmDelete:le,isDeleted:N}=M(),x=u([]),T=u("codigo"),m=u(""),k=u(),_=u(!1),n=u({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:5});v(N,(l,t)=>{l&&p(1,n.value.rowsPerPage,null)}),v(T,(l,t)=>{p(1,n.value.rowsPerPage,null)}),v(P,(l,t)=>{l&&(p(1,n.value.rowsPerPage,null),P.value=!1)});const p=async(l=1,t=5,e=null)=>{try{const{data:o}=await j.get("/email");o.forEach(s=>{s.empresa_name=s.company_id.nombre_comercial,s.host=s.host==""?"----------":s.host,s.usuario=s.usuario==""?"----------":s.usuario,s.password=s.password==""?"----------":s.password}),x.value=o}catch(o){console.log(o)}};async function V(l){const{page:t,rowsPerPage:e,sortBy:o,descending:s}=l.pagination;_.value=!0,await p(t,e),n.value.page=t,n.value.rowsPerPage=e,n.value.sortBy=o,n.value.descending=s,_.value=!1}R(()=>{k.value.requestServerInteraction()});const d=u("list");return(l,t)=>(i(),g("div",O,[f("div",J,[f("div",K,[r(U,{flat:"",class:"shadow_custom"},{default:a(()=>[r(z,{"title-class":"text-grey-7 text-h6",title:"Emails Config",rows:x.value,loading:_.value,"hide-header":d.value==="grid",columns:E,"row-key":"name",grid:d.value==="grid",filter:m.value,pagination:n.value,"onUpdate:pagination":t[2]||(t[2]=e=>n.value=e),"rows-per-page-options":[3,7,15,0],ref_key:"tableRef",ref:k,"binary-state-sort":"",onRequest:V},{header:a(e=>[r($,{props:e,style:{height:"60px"}},{default:a(()=>[(i(!0),g(H,null,L(e.cols,o=>(i(),c(I,{key:o.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:a(()=>[h(b(o.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":a(e=>[r(S,{outlined:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=o=>m.value=o),placeholder:"Buscar..."},{append:a(()=>[r(w,{name:"search"})]),_:1},8,["modelValue"]),d.value==="list"?(i(),c(y,{key:0,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:a(()=>[q((i(),c(Q,{disable:l.$q.platform.is.mobile},{default:a(()=>[h(b(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[F]])]),_:2},1032,["icon","onClick"])):B("",!0),e.inFullscreen?B("",!0):(i(),c(y,{key:1,flat:"",round:"",dense:"",icon:d.value==="grid"?"list":"grid_on",onClick:t[1]||(t[1]=o=>{d.value=d.value==="grid"?"list":"grid",l.separator=d.value==="grid"?"none":"horizontal"})},{default:a(()=>[q((i(),c(Q,{disable:l.$q.platform.is.mobile},{default:a(()=>[h(b(d.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[F]])]),_:1},8,["icon"]))]),"body-cell-acciones":a(e=>[r(C,{props:e},{default:a(()=>[r(y,{color:"indigo",icon:"edit",label:"Editar",size:"md",class:"q-px-md",onClick:o=>l.$router.push({name:"email.edit",params:{email_id:e.row.company_id.id}})},null,8,["onClick"])]),_:2},1032,["props"])]),"body-cell-estado":a(e=>[r(C,{props:e},{default:a(()=>[r(A,{outline:"",class:"q-py-xs q-px-md",color:e.row.isActive?"positive":"dark"},{default:a(()=>[e.row.isActive?(i(),g("span",W,"Activo")):(i(),g("span",X,"Inactivo"))]),_:2},1032,["color"])]),_:2},1032,["props"])]),"no-data":a(({icon:e})=>[f("div",Y,[r(w,{size:"2em",name:"sentiment_dissatisfied"}),Z,r(w,{size:"2em",name:m.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]))}});export{he as default};
