import{d as M,r as I,v as $,o as v,a7 as P,g as n,ab as t,e as r,ac as i,f as p,a9 as b,Q as x,i as G,c as C,ad as w,ag as K,ah as Y,h as V,a8 as k,N as H}from"./index.21549384.js";import{Q as j}from"./QSelect.9dc0cfb3.js";import{Q as J}from"./QBadge.eb49d4d2.js";import{Q as A}from"./QExpansionItem.90a3d22c.js";import{Q as O}from"./QForm.9b547efd.js";import{C as W}from"./ClosePopup.7c577e28.js";import{u as X}from"./useRedIpv4.6bd66f4c.js";const Z={class:"col-xs-12 col-md-6"},ee={class:"row"},le={class:"col-xs-12 col-md-7"},se={class:"col-xs-12 col-md-6"},te={class:"row"},ae={class:"col-xs-12 col-md-7"},re={class:"col-xs-12 col-md-6"},oe={class:"row"},ie={class:"col-xs-12 col-md-7"},de={key:0},ne={class:"col-xs-12 col-md-6"},ue={class:"row"},ce={class:"col-xs-12 col-md-7"},Ie=M({__name:"FormRedIpv4",props:{edit:{type:Boolean}},setup(_){const y=_,f=I(!0);let c=I(""),h=I();const{cargarRouter:N,formRed:s,loading:R,listRouter:B,validaciones:d,onSubmit:Q}=X(y.edit),u=I([{label:"CLASE A",active:!0,children:[{label:"8 (255.0.0.0 - 16777214 hosts, 16777216 IP)"},{label:"9 (255.128.0.0 - 8388606 hosts, 8388608 IP)"},{label:"10 (255.192.0.0 - 4194302 hosts, 4194304 IP)"},{label:"11 (255.224.0.0 - 2097150 hosts, 2097152 IP)"},{label:"12 (255.240.0.0 - 1048574 hosts, 1048576 IP)"},{label:"13 (255.248.0.0 - 524286 hosts, 524288 IP)"},{label:"14 (255.252.0.0 - 262142 hosts, 262144 IP)"},{label:"15 (255.254.0.0 - 131070 hosts, 131072 IP)"}]},{label:"CLASE B",active:!0,children:[{label:"16 (255.255.0.0 - 65534 hosts, 65536 IP)"},{label:"17 (255.255.128.0 - 32766 hosts, 32768 IP)"},{label:"18 (255.255.192.0 - 16382 hosts, 16384 IP)"},{label:"19 (255.255.224.0 - 8190 hosts, 8192 IP)"},{label:"20 (255.255.240.0 - 4094 hosts, 4096 IP)"},{label:"21 (255.255.248.0 - 2046 hosts, 2048 IP)"},{label:"22 (255.255.252.0 - 1022 hosts, 1024 IP)"},{label:"23 (255.255.254.0 - 510 hosts, 512 IP)"}]},{label:"CLASE C",active:!0,children:[{label:"24 (255.255.255.0 - 254 hosts, 256 IP)"},{label:"25 (255.255.255.128 - 126 hosts, 128 IP)"},{label:"26 (255.255.255.192 - 62 hosts, 64 IP)"},{label:"27 (255.255.255.224 - 30 hosts, 32 IP)"},{label:"28 (255.255.255.240 - 14 hosts, 16 IP)"},{label:"29 (255.255.255.248 - 6 hosts, 8 IP)"},{label:"30 (255.255.255.252 - 2 hosts, 4 IP)"},{label:"31 (255.255.255.254 - 0 hosts, 2 IP)"},{label:"32 (255.255.255.252 - 0 hosts, 1 IP)"}]}]),S=l=>l.opt.children.some(e=>e.label===s.value.cidr),E=l=>{const e=l.split(".").map(Number);if(e[0]===10)return"Clase A";if(e[0]===172&&e[1]>=16&&e[1]<=31)return"Clase B";if(e[0]===192&&e[1]===168)return"Clase C"},T=l=>{var e=l.split(".").map(Number);return e[0]>=1&&e[0]<=126?"Clase A":e[0]>=128&&e[0]<=191?"Clase B":e[0]>=192&&e[0]<=223?"Clase C":"No es una IP Privada o Publica"},U=l=>{d.value.red.isValid=!0;const e=l.target.value.replace(/[^0-9.]/g,"");s.value.red=e,D()},z=l=>{function e(m){return m.split(".").reduce((q,L)=>(q<<8)+parseInt(L,10),0)>>>0}const a=[{inicio:"10.0.0.0",fin:"10.255.255.255"},{inicio:"172.16.0.0",fin:"172.31.255.255"},{inicio:"192.168.0.0",fin:"192.168.255.255"}],o=e(l);for(const m of a){const g=e(m.inicio),q=e(m.fin);if(o>=g&&o<=q)return!0}return!1};$(()=>s.value.cidr,l=>{F(l),d.value.cidr.isValid=!0});const D=()=>{if(s.value.red.split(".").length==4&&s.value.red.split(".")[3]!=""){const l=z(s.value.red);l?c.value=E(s.value.red):c.value=T(s.value.red),c.value!="No es una IP Privada o Publica"?(f.value=!1,h.value=l,c.value=="Clase A"&&(u.value[0].active=!0,u.value[1].active=!0,u.value[2].active=!0),c.value=="Clase B"&&(u.value[0].active=!1,u.value[1].active=!0,u.value[2].active=!0),c.value=="Clase C"&&(u.value[0].active=!1,u.value[1].active=!1,u.value[2].active=!0)):(h.value=null,f.value=!0,d.value.red.isValid=!1,d.value.red.message=c.value)}else f.value=!0},F=l=>{if(s.value.cidr.length>0){const e=l.split("-")[0].split(" ")[1].split("(")[1].split("."),a=parseInt(l.split("-")[0].split(" ")[0]),o=s.value.red.split(".");c.value=="Clase C"&&(o.splice(3,1),s.value.red=`${o.join(".")}.${e[3]}`),c.value=="Clase B"&&(a>=16&&a<=23?(o.splice(2,2),s.value.red=`${o.join(".")}.${e[2]}.0 `):(o.splice(3,1),s.value.red=`${o.join(".")}.${e[3]}`)),c.value=="Clase A"&&(a>=8&&a<=15?(o.splice(1,3),s.value.red=`${o.join(".")}.${e[1]}.0.0 `):a>=16&&a<=23?(o.splice(2,2),s.value.red=`${o.join(".")}.${e[2]}.0 `):(o.splice(3,1),s.value.red=`${o.join(".")}.${e[3]}`))}};return $(()=>s.value.red,l=>{setTimeout(()=>{if(s.value.cidr.length>1&&s.value.red.split(".").length==4&&s.value.red.split(".")[3]!=""){const e=s.value.red.split("."),a=u.value[2].children;let o=[];a.forEach(m=>{let g=parseInt(m.label.split("-")[0].split(" ")[1].split("(")[1].split(".")[3]);o.push(g)}),o.includes(parseInt(e[3]))||(s.value.cidr="")}},2e3)}),N(),(l,e)=>(v(),P(O,{onSubmit:e[8]||(e[8]=a=>t(Q)(y.edit)),class:"q-mt-md"},{default:n(()=>[r("div",{class:i(["row q-col-gutter-md q-px-lg",l.$q.screen.width<1022||"q-col-gutter-y-lg q-pt-md"])},[r("div",Z,[r("div",ee,[r("div",{class:i(["col-xs-12 col-md-4 flex items-center justify-end",[l.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"texto-rigth q-pb-md"]])},[r("label",{class:i(l.$q.screen.width<1022||"q-pr-md")}," Nombre: ",2)],2),r("div",le,[p(x,{modelValue:t(s).nombre,"onUpdate:modelValue":[e[0]||(e[0]=a=>t(s).nombre=a),e[1]||(e[1]=a=>(t(s).nombre=t(s).nombre.toUpperCase(),t(d).nombre.isValid=!0))],modelModifiers:{trim:!0},placeholder:"nombre de red",error:!t(d).nombre.isValid,"input-class":"resaltarTextoInput",dense:"",outlined:""},{error:n(()=>[r("label",{class:i(l.$q.dark.isActive?"text-red-4":"text-negative")},b(t(d).nombre.message),3)]),_:1},8,["modelValue","error"])])])]),r("div",se,[r("div",te,[r("div",{class:i(["col-xs-12 col-md-4 flex items-center justify-end",[l.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"justify-end q-pb-md"]])},[r("label",{class:i(l.$q.screen.width<1022||"q-pr-md")}," Router: ",2)],2),r("div",ae,[p(j,{dense:"",modelValue:t(s).router_id,"onUpdate:modelValue":[e[2]||(e[2]=a=>t(s).router_id=a),e[3]||(e[3]=a=>t(d).router_id.isValid=!0)],modelModifiers:{trim:!0},outlined:"",error:!t(d).router_id.isValid,"emit-value":"","map-options":"",options:t(B)},{error:n(()=>[r("label",{class:i(l.$q.dark.isActive?"text-red-4":"text-negative")},b(t(d).router_id.message),3)]),_:1},8,["modelValue","error","options"])])])]),r("div",re,[r("div",oe,[r("div",{class:i(["col-xs-12 col-md-4 flex items-center justify-end",[l.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"texto-rigth q-pb-md"]])},[r("label",{class:i(l.$q.screen.width<1022||"q-pr-md")}," Red: ",2)],2),r("div",ie,[p(x,{modelValue:t(s).red,"onUpdate:modelValue":e[4]||(e[4]=a=>t(s).red=a),modelModifiers:{trim:!0},error:!t(d).red.isValid,onKeyup:e[5]||(e[5]=a=>U(a)),"input-style":"padding-right: 27px;","input-class":"resaltarTextoInput",dense:"",outlined:""},{error:n(()=>[r("label",{class:i(l.$q.dark.isActive?"text-red-4":"text-negative")},b(t(d).red.message),3)]),append:n(()=>[p(J,{outlined:"",color:"blue-grey-6",style:{height:"100%",width:"19%",position:"absolute",right:"0px","justify-content":"center","font-size":"14px",cursor:"pointer"}},{default:n(()=>[p(G,{name:"fa-solid fa-network-wired",size:"xs"})]),_:1})]),hint:n(()=>[t(s).red.split(".").length<4||t(s).red.split(".")[3]==""?(v(),C("label",de," Ejm: 192.168.1.0 ")):t(h)!=null?(v(),C("label",{key:1,style:{"font-size":"13px"},class:i(l.$q.dark.isActive?"text-green-6":"text-green-9")},b(t(h)?"IP Privada":"IP Publica"),3)):w("",!0)]),_:1},8,["modelValue","error"])])])]),r("div",ne,[r("div",ue,[r("div",{class:i(["col-xs-12 col-md-4 flex items-center justify-end",[l.$q.screen.width<1022?"justify-center q-mt-sm q-pb-xs":"justify-end q-pb-md"]])},[r("label",{class:i(l.$q.screen.width<1022||"q-pr-md")}," CIDR: ",2)],2),r("div",ce,[p(j,{outlined:"",modelValue:t(s).cidr,"onUpdate:modelValue":e[6]||(e[6]=a=>t(s).cidr=a),options:u.value,dense:"",error:!t(d).cidr.isValid,readonly:f.value,color:"teal",clearable:"","options-selected-class":"text-deep-orange-8"},{option:n(a=>[p(A,{"expand-separator":"",disable:!a.opt.active,group:"somegroup","default-opened":S(a),"header-class":"text-weight-bold","header-style":"text-align: center;",label:a.opt.label},{default:n(()=>[(v(!0),C(Y,null,K(a.opt.children,o=>H((v(),P(A,{key:o,"hide-expand-icon":"",clickable:"",class:i(t(s).cidr===o.label&&!l.$q.dark.isActive?"bg-indigo-3":t(s).cidr===o.label&&l.$q.dark.isActive?"bg-deep-purple-13":""),"dense-toggle":"",label:o.label,"header-inset-level":0,onClick:m=>t(s).cidr=o.label},null,8,["class","label","onClick"])),[[W]])),128))]),_:2},1032,["disable","default-opened","label"])]),error:n(()=>[r("label",{class:i(l.$q.dark.isActive?"text-red-4":"text-negative")},b(t(d).cidr.message),3)]),_:1},8,["modelValue","options","error","readonly"])])])]),r("div",{class:i(["col-xs-12 col-md-12 flex q-py-lg",[l.$q.screen.width<600?"justify-center q-pt-none q-mb-md q-ml-md":"justify-between"]])},[l.$q.screen.width>600?(v(),P(V,{key:0,icon:"arrow_back",onClick:e[7]||(e[7]=a=>l.$router.push("/servicios/internet")),outline:"",rounded:"",class:"q-ml-md",color:l.$q.dark.isActive?"blue-grey-2":"blue-grey-10"},{default:n(()=>[k(" \xA0 Regresar ")]),_:1},8,["color"])):w("",!0),p(V,{type:"submit",icon:"save",loading:t(R),outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:n(()=>[k(" \xA0 Guardar Cambios ")]),_:1},8,["loading"])],2)],2)]),_:1}))}});export{Ie as _};
