import{m as ll,I as al,aR as sl,J as ol,bu as tl,r as C,n as x,v as ge,aB as il,s as rl,p as _,z as ul,aT as nl,bl as dl,T as ml,O as we,h as ae,_ as cl,d as vl,C as fl,o as R,a9 as ee,g as f,ad as l,f as c,aV as pl,e as o,Q as O,ae as w,ab as U,i as S,aa as ve,c as le,af as F,w as hl,bs as J,aX as gl,aW as bl,S as De,aU as yl}from"./index.ca7b667e.js";import{k as K,a as Me,Q as Ee}from"./format.f35043b7.js";import{Q as fe}from"./QSelect.8fcb8d59.js";import{Q as _l}from"./QFile.57e8650d.js";import{T as Vl}from"./TouchPan.19d176a1.js";import{u as xl,a as wl,b as ql,g as kl,Q as Ie}from"./QPopupProxy.af2514fc.js";import{_ as pe,f as Cl}from"./date.9154a754.js";import{Q as Sl}from"./QTree.055cd64f.js";import{Q as Pl}from"./QForm.673f8cd7.js";import{C as Ue}from"./ClosePopup.a0cb6a9f.js";import{u as Al}from"./useHelpers.9a0288d5.js";function Dl(r,A){if(r.hour!==null){if(r.minute===null)return"minute";if(A===!0&&r.second===null)return"second"}return"hour"}function Ml(){const r=new Date;return{hour:r.getHours(),minute:r.getMinutes(),second:r.getSeconds(),millisecond:r.getMilliseconds()}}var Ne=ll({name:"QTime",props:{...al,...sl,...xl,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:r=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(r)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:wl,setup(r,{slots:A,emit:j}){const D=ul(),{$q:M}=D.proxy,T=ol(r,M),{tabindex:E,headerClass:Q,getLocale:L,getCurrentDate:s}=ql(r,M),v=tl(r),p=nl(v);let N,q;const se=C(null),H=x(()=>Te()),B=x(()=>L()),oe=x(()=>Qe()),Y=pe(r.modelValue,H.value,B.value,r.calendar,oe.value),g=C(Dl(Y)),n=C(Y),d=C(Y.hour===null||Y.hour<12),a=x(()=>`q-time q-time--${r.landscape===!0?"landscape":"portrait"}`+(T.value===!0?" q-time--dark q-dark":"")+(r.disable===!0?" disabled":r.readonly===!0?" q-time--readonly":"")+(r.bordered===!0?" q-time--bordered":"")+(r.square===!0?" q-time--square no-border-radius":"")+(r.flat===!0?" q-time--flat no-shadow":"")),i=x(()=>{const e=n.value;return{hour:e.hour===null?"--":P.value===!0?K(e.hour):String(d.value===!0?e.hour===0?12:e.hour:e.hour>12?e.hour-12:e.hour),minute:e.minute===null?"--":K(e.minute),second:e.second===null?"--":K(e.second)}}),P=x(()=>r.format24h!==null?r.format24h:M.lang.date.format24h),$e=x(()=>{const e=g.value==="hour",t=e===!0?12:60,m=n.value[g.value];let V=`rotate(${Math.round(m*(360/t))-180}deg) translateX(-50%)`;return e===!0&&P.value===!0&&n.value.hour>=12&&(V+=" scale(.7)"),{transform:V}}),qe=x(()=>n.value.hour!==null),Re=x(()=>qe.value===!0&&n.value.minute!==null),G=x(()=>r.hourOptions!==void 0?e=>r.hourOptions.includes(e):r.options!==void 0?e=>r.options(e,null,null):null),te=x(()=>r.minuteOptions!==void 0?e=>r.minuteOptions.includes(e):r.options!==void 0?e=>r.options(n.value.hour,e,null):null),ie=x(()=>r.secondOptions!==void 0?e=>r.secondOptions.includes(e):r.options!==void 0?e=>r.options(n.value.hour,n.value.minute,e):null),$=x(()=>{if(G.value===null)return null;const e=ue(0,11,G.value),t=ue(12,11,G.value);return{am:e,pm:t,values:e.values.concat(t.values)}}),W=x(()=>te.value!==null?ue(0,59,te.value):null),X=x(()=>ie.value!==null?ue(0,59,ie.value):null),re=x(()=>{switch(g.value){case"hour":return $.value;case"minute":return W.value;case"second":return X.value}}),Oe=x(()=>{let e,t,m=0,b=1;const V=re.value!==null?re.value.values:void 0;g.value==="hour"?P.value===!0?(e=0,t=23):(e=0,t=11,d.value===!1&&(m=12)):(e=0,t=55,b=5);const I=[];for(let h=e,k=e;h<=t;h+=b,k++){const z=h+m,Ze=V!==void 0&&V.includes(z)===!1,el=g.value==="hour"&&h===0?P.value===!0?"00":"12":h;I.push({val:z,index:k,disable:Ze,label:el})}return I}),je=x(()=>[[Vl,ze,void 0,{stop:!0,prevent:!0,mouse:!0}]]);ge(()=>r.modelValue,e=>{const t=pe(e,H.value,B.value,r.calendar,oe.value);(t.dateHash!==n.value.dateHash||t.timeHash!==n.value.timeHash)&&(n.value=t,t.hour===null?g.value="hour":d.value=t.hour<12)}),ge([H,B],()=>{cl(()=>{xe()})});function ke(){const e={...s(),...Ml()};xe(e),Object.assign(n.value,e),g.value="hour"}function ue(e,t,m){const b=Array.apply(null,{length:t+1}).map((V,I)=>{const h=I+e;return{index:h,val:m(h)===!0}}).filter(V=>V.val===!0).map(V=>V.index);return{min:b[0],max:b[b.length-1],values:b,threshold:t+1}}function Ce(e,t,m){const b=Math.abs(e-t);return Math.min(b,m-b)}function be(e,{min:t,max:m,values:b,threshold:V}){if(e===t)return t;if(e<t||e>m)return Ce(e,t,V)<=Ce(e,m,V)?t:m;const I=b.findIndex(z=>e<=z),h=b[I-1],k=b[I];return e-h<=k-e?h:k}function Te(){return r.calendar!=="persian"&&r.mask!==null?r.mask:`HH:mm${r.withSeconds===!0?":ss":""}`}function Qe(){if(typeof r.defaultDate!="string"){const e=s(!0);return e.dateHash=kl(e),e}return pe(r.defaultDate,"YYYY/MM/DD",void 0,r.calendar)}function ye(){return dl(D)===!0||re.value!==null&&(re.value.values.length===0||g.value==="hour"&&P.value!==!0&&$.value[d.value===!0?"am":"pm"].values.length===0)}function _e(){const e=se.value,{top:t,left:m,width:b}=e.getBoundingClientRect(),V=b/2;return{top:t+V,left:m+V,dist:V*.7}}function ze(e){if(ye()!==!0){if(e.isFirst===!0){N=_e(),q=ne(e.evt,N);return}q=ne(e.evt,N,q),e.isFinal===!0&&(N=!1,q=null,Se())}}function Se(){g.value==="hour"?g.value="minute":r.withSeconds&&g.value==="minute"&&(g.value="second")}function ne(e,t,m){const b=il(e),V=Math.abs(b.top-t.top),I=Math.sqrt(Math.pow(Math.abs(b.top-t.top),2)+Math.pow(Math.abs(b.left-t.left),2));let h,k=Math.asin(V/I)*(180/Math.PI);if(b.top<t.top?k=t.left<b.left?90-k:270+k:k=t.left<b.left?k+90:270-k,g.value==="hour"){if(h=k/30,$.value!==null){const z=P.value!==!0?d.value===!0:$.value.am.values.length!==0&&$.value.pm.values.length!==0?I>=t.dist:$.value.am.values.length!==0;h=be(h+(z===!0?0:12),$.value[z===!0?"am":"pm"])}else h=Math.round(h),P.value===!0?I<t.dist?h<12&&(h+=12):h===12&&(h=0):d.value===!0&&h===12?h=0:d.value===!1&&h!==12&&(h+=12);P.value===!0&&(d.value=h<12)}else h=Math.round(k/6)%60,g.value==="minute"&&W.value!==null?h=be(h,W.value):g.value==="second"&&X.value!==null&&(h=be(h,X.value));return m!==h&&Ge[g.value](h),h}const Ve={hour(){g.value="hour"},minute(){g.value="minute"},second(){g.value="second"}};function Fe(e){e.keyCode===13&&Pe()}function He(e){e.keyCode===13&&Ae()}function Be(e){ye()!==!0&&(M.platform.is.desktop!==!0&&ne(e,_e()),Se())}function Ye(e){ye()!==!0&&ne(e,_e())}function Je(e){if(e.keyCode===13)g.value="hour";else if([37,39].includes(e.keyCode)){const t=e.keyCode===37?-1:1;if($.value!==null){const m=P.value===!0?$.value.values:$.value[d.value===!0?"am":"pm"].values;if(m.length===0)return;if(n.value.hour===null)de(m[0]);else{const b=(m.length+m.indexOf(n.value.hour)+t)%m.length;de(m[b])}}else{const m=P.value===!0?24:12,b=P.value!==!0&&d.value===!1?12:0,V=n.value.hour===null?-t:n.value.hour;de(b+(24+V+t)%m)}}}function Ke(e){if(e.keyCode===13)g.value="minute";else if([37,39].includes(e.keyCode)){const t=e.keyCode===37?-1:1;if(W.value!==null){const m=W.value.values;if(m.length===0)return;if(n.value.minute===null)me(m[0]);else{const b=(m.length+m.indexOf(n.value.minute)+t)%m.length;me(m[b])}}else{const m=n.value.minute===null?-t:n.value.minute;me((60+m+t)%60)}}}function Le(e){if(e.keyCode===13)g.value="second";else if([37,39].includes(e.keyCode)){const t=e.keyCode===37?-1:1;if(X.value!==null){const m=X.value.values;if(m.length===0)return;if(n.value.seconds===null)ce(m[0]);else{const b=(m.length+m.indexOf(n.value.second)+t)%m.length;ce(m[b])}}else{const m=n.value.second===null?-t:n.value.second;ce((60+m+t)%60)}}}function de(e){n.value.hour!==e&&(n.value.hour=e,Z())}function me(e){n.value.minute!==e&&(n.value.minute=e,Z())}function ce(e){n.value.second!==e&&(n.value.second=e,Z())}const Ge={hour:de,minute:me,second:ce};function Pe(){d.value===!1&&(d.value=!0,n.value.hour!==null&&(n.value.hour-=12,Z()))}function Ae(){d.value===!0&&(d.value=!1,n.value.hour!==null&&(n.value.hour+=12,Z()))}function Z(){if(G.value!==null&&G.value(n.value.hour)!==!0){n.value=pe(),g.value="hour";return}if(te.value!==null&&te.value(n.value.minute)!==!0){n.value.minute=null,n.value.second=null,g.value="minute";return}if(r.withSeconds===!0&&ie.value!==null&&ie.value(n.value.second)!==!0){n.value.second=null,g.value="second";return}n.value.hour===null||n.value.minute===null||r.withSeconds===!0&&n.value.second===null||xe()}function xe(e){const t=Object.assign({...n.value},e),m=r.calendar==="persian"?K(t.hour)+":"+K(t.minute)+(r.withSeconds===!0?":"+K(t.second):""):Cl(new Date(t.year,t.month===null?null:t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),H.value,B.value,t.year,t.timezoneOffset);t.changed=m!==r.modelValue,j("update:modelValue",m,t)}function We(){const e=[_("div",{class:"q-time__link "+(g.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:E.value,onClick:Ve.hour,onKeyup:Je},i.value.hour),_("div",":"),_("div",qe.value===!0?{class:"q-time__link "+(g.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:E.value,onKeyup:Ke,onClick:Ve.minute}:{class:"q-time__link"},i.value.minute)];r.withSeconds===!0&&e.push(_("div",":"),_("div",Re.value===!0?{class:"q-time__link "+(g.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:E.value,onKeyup:Le,onClick:Ve.second}:{class:"q-time__link"},i.value.second));const t=[_("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},e)];return P.value===!1&&t.push(_("div",{class:"q-time__header-ampm column items-between no-wrap"},[_("div",{class:"q-time__link "+(d.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:E.value,onClick:Pe,onKeyup:Fe},"AM"),_("div",{class:"q-time__link "+(d.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:E.value,onClick:Ae,onKeyup:He},"PM")])),_("div",{class:"q-time__header flex flex-center no-wrap "+Q.value},t)}function Xe(){const e=n.value[g.value];return _("div",{class:"q-time__content col relative-position"},[_(ml,{name:"q-transition--scale"},()=>_("div",{key:"clock"+g.value,class:"q-time__container-parent absolute-full"},[_("div",{ref:se,class:"q-time__container-child fit overflow-hidden"},[we(_("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Be,onMousedown:Ye},[_("div",{class:"q-time__clock-circle fit"},[_("div",{class:"q-time__clock-pointer"+(n.value[g.value]===null?" hidden":r.color!==void 0?` text-${r.color}`:""),style:$e.value}),Oe.value.map(t=>_("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${t.index}`+(t.val===e?" q-time__clock-position--active "+Q.value:t.disable===!0?" q-time__clock-position--disable":"")},[_("span",t.label)]))])]),je.value)])])),r.nowBtn===!0?_(ae,{class:"q-time__now-button absolute",icon:M.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:r.color,textColor:r.textColor,tabindex:E.value,onClick:ke}):null])}return D.proxy.setNow=ke,()=>{const e=[Xe()],t=rl(A.default);return t!==void 0&&e.push(_("div",{class:"q-time__actions"},t)),r.name!==void 0&&r.disable!==!0&&p(e,"push"),_("div",{class:a.value,tabindex:-1},[We(),_("div",{class:"q-time__main col overflow-auto"},e)])}}}),El=[{label:"Seleccionar todos los permisos",value:"Seleccionar todos los permisos",children:[{label:"Proveedores",value:"Proveedores",children:[{label:"Ver Proveedores",value:"index.proveedores"},{label:"Crear Proveedor",value:"crear.proveedor"},{label:"Editar Proveedor",value:"editar.proveedor"},{label:"Activar Proveedor",value:"activar.proveedor"},{label:"Inactivar Proveedor",value:"inactivar.proveedor"},{label:"Eliminar Proveedor",value:"eliminar.proveedor"}]},{label:"Clientes",value:"Clientes",children:[{label:"Ver Clientes",value:"index.clientes"},{label:"Crear Cliente",value:"crear.cliente"},{label:"Editar Cliente",value:"editar.cliente"},{label:"Activar Cliente",value:"activar.cliente"},{label:"Inactivar Cliente",value:"inactivar.cliente"},{label:"Eliminar Cliente",value:"eliminar.cliente"}]},{label:"Productos Y Servicios",value:"Productos Y Servicios",children:[{label:"Ver Prod. Y Serv.",value:"index.productos"},{label:"Crear Prod. Y Serv.",value:"crear.productos"},{label:"Editar Prod. Y Serv.",value:"editar.productos"},{label:"Activar Prod. Y Serv.",value:"activar.productos"},{label:"Inactivar Prod. Y Serv.",value:"inactivar.productos"},{label:"Eliminar Prod. Y Serv.",value:"eliminar.productos"}]},{label:"Compras",value:"Compras",children:[{label:"Ver Compras",value:"index.compras"},{label:"Crear Compra",value:"crear.compra"},{label:"Anular Compra",value:"anular.compra"}]},{label:"Ventas",value:"Ventas",children:[{label:"Ver Ventas",value:"index.ventas"},{label:"Crear Venta",value:"crear.venta"},{label:"Anular Venta",value:"anular.venta"}]},{label:"Gesti\xF3n Personal",value:"Gesti\xF3n Personal",children:[{label:"Ver Usuarios",value:"index.usuario"},{label:"Crear Usuario",value:"crear.usuario"},{label:"Editar Usuario",value:"editar.usuario"},{label:"Activar Usuario",value:"activar.usuario"},{label:"Inactivar Usuario",value:"inactivar.usuario"},{label:"Eliminar Usuario",value:"eliminar.usuario"}]},{label:"Roles Y Permisos",value:"Roles Y Permisos",children:[{label:"Ver Roles",value:"index.rol"},{label:"Crear Rol",value:"crear.rol"},{label:"Editar Rol",value:"editar.rol"},{label:"Eliminar Rol",value:"eliminar.rol"}]},{label:"Correo",value:"Correo",children:[{label:"Ver Correos",value:"index.correo"},{label:"Editar Correo",value:"editar.correo"}]},{label:"Empresas",value:"Empresas",children:[{label:"Ver Empresas",value:"index.empresa"},{label:"Crear Empresa",value:"crear.empresa"},{label:"Editar Empresa",value:"editar.empresa"},{label:"Activar Empresa",value:"activar.empresa"},{label:"Inactivar Empresa",value:"inactivar.empresa"},{label:"Eliminar Empresa",value:"eliminar.empresa"}]},{label:"Sucursales",value:"Sucursales",children:[{label:"Ver Sucursales",value:"index.sucursal"},{label:"Crear Sucursal",value:"crear.sucursal"},{label:"Editar Sucursal",value:"editar.sucursal"},{label:"Activar Sucursal",value:"activar.sucursal"},{label:"Inactivar Sucursal",value:"inactivar.sucursal"},{label:"Eliminar Sucursal",value:"eliminar.sucursal"}]}]}];const he=C(!1),u=C({usuario:"",email:"",cedula:"",celular:"",fullName:"",roles:[""],permisos:[""],horarios_dias:[],horarios_time:["",""],receiveSupportEmail:!1,company:"",sucursales:[""],password:"",confirmPassword:"",foto:null,foto_old:null,isActive:!0}),y=C({usuario:{message:"",isValid:!0},email:{message:"",isValid:!0},cedula:{message:"",isValid:!0},celular:{message:"",isValid:!0},fullName:{message:"",isValid:!0},roles:{message:"",isValid:!0},permisos:{message:"",isValid:!0},horarios_dias:{message:"",isValid:!0},foto:{message:"",isValid:!0},horarios_time:{message:"",isValid:!0},company:{message:"",isValid:!0},sucursales:{message:"",isValid:!0},password:{message:"",isValid:!0},confirmPassword:{message:"",isValid:!0}}),Il=()=>{const{api:r,mostrarNotify:A,router:j,route:D}=Al(),M=async()=>{const{data:s}=await r.get("/companies");return s},T=()=>{u.value.email="",u.value.password="",u.value.cedula="",u.value.celular="",u.value.fullName="",u.value.usuario="",u.value.company="",u.value.roles=[""],u.value.permisos=[],u.value.horarios_dias=[],u.value.horarios_time=[],u.value.receiveSupportEmail=!1},E=()=>{A("negative","El tipo de archivo es invalido")},Q=s=>{let v=!1;var p=/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/;return["fullName","usuario","celular","company","confirmPassword","password","email"].forEach(q=>{!s&&(q!="password"||q!="confirmPassword")&&u.value[q].length==0&&(y.value[q].message="Debes completar este campo",y.value[q].isValid=!1,v=!0)}),u.value.company.length!=0&&u.value.roles[0].length==0&&(y.value.roles.message="Debes elegir un Rol",y.value.roles.isValid=!1,v=!0),u.value.company.length!==0&&u.value.roles[0]!=="SUPER-ADMINISTRADOR"&&u.value.roles[0]!=="ADMINISTRADOR"&&u.value.sucursales[0].length===0&&(y.value.sucursales.message="Debes elegir una sucursal",y.value.sucursales.isValid=!1,v=!0),(u.value.roles[0]=="SUPER-ADMINISTRADOR"||u.value.roles[0]=="ADMINISTRADOR")&&(u.value.sucursales=[]),s?u.value.password!=null&&(u.value.password.length>0&&u.value.password.length<8&&(y.value.password.message="La contrase\xF1a debe tener minimo 8 caracter",y.value.password.isValid=!1,v=!0),u.value.confirmPassword.length>0&&u.value.confirmPassword.length<8?(y.value.confirmPassword.message="La contrase\xF1a debe tener minimo 8 caracter",y.value.confirmPassword.isValid=!1,v=!0):u.value.confirmPassword!=u.value.password&&(y.value.confirmPassword.message="Las contrase\xF1as no coinciden, verificar",y.value.confirmPassword.isValid=!1,v=!0)):(y.value.password.isValid&&u.value.password.length<8&&(y.value.password.message="La contrase\xF1a debe tener minimo 8 caracter",y.value.password.isValid=!1,v=!0),y.value.password.isValid&&u.value.confirmPassword.length<8?(y.value.confirmPassword.message="La contrase\xF1a debe tener minimo 8 caracter",y.value.confirmPassword.isValid=!1,v=!0):u.value.password.length!==0&&u.value.confirmPassword!=u.value.password&&(y.value.confirmPassword.message="Las contrase\xF1as no coinciden, verificar",y.value.confirmPassword.isValid=!1,v=!0)),y.value.email.isValid&&!p.test(u.value.email)&&(y.value.email.message="Ingresa un email valido",y.value.email.isValid=!1,v=!0),u.value.permisos.length==0&&(y.value.permisos.message="*Debes elegir al menos un permiso",y.value.permisos.isValid=!1,v=!0),v},L=async s=>{if(!Q(s))try{he.value=!0,console.log(u.value.sucursales);let v=new FormData;v.append("usuario",u.value.usuario),v.append("email",u.value.email),v.append("celular",u.value.celular),v.append("fullName",u.value.fullName),v.append("roles",JSON.stringify(u.value.roles)),v.append("permisos",JSON.stringify(u.value.permisos)),v.append("horarios_dias",JSON.stringify(u.value.horarios_dias)),v.append("horarios_time",JSON.stringify(u.value.horarios_time)),v.append("receiveSupportEmail",JSON.stringify(u.value.receiveSupportEmail)),v.append("company",u.value.company),v.append("sucursales",JSON.stringify(u.value.sucursales)),v.append("password",JSON.stringify(u.value.password)),v.append("confirmPassword",JSON.stringify(u.value.confirmPassword)),v.append("foto",u.value.foto),v.append("foto_old",u.value.foto_old),v.append("isActive",JSON.stringify(u.value.isActive)),s?await r.patch("/auth/edit/"+u.value.id,v,{headers:{"Content-Type":"multipart/form-data"}}):await r.post("/auth/register",v,{headers:{"Content-Type":"multipart/form-data"}}),A("positive",`Usuario ${s?"editado":"creado"} exitosamente.`),he.value=!1,j.push({name:"Ver Usuarios"})}catch(v){console.log(v),he.value=!1,A("warning",v.response.data.message)}};return{api:r,getCompanies:M,formUser:u,loading:he,onRejected:E,limpiarFormulario:T,expanded:C(["Seleccionar todos los permisos"]),onSubmit:L,validaciones:y,route:D,showPass:C(!0),showConfirmPass:C(!0)}},Ul={class:"row q-pt-sm"},Nl={class:"col-xs-12 col-md-8"},$l={class:"row"},Rl=o("div",{class:"col-11 flex justify-start items-center"},[o("label",{class:"text-h6 text-weight-medium"},"Datos:")],-1),Ol=o("div",{class:"col-4 flex justify-end items-center"},[o("label",null,"Nombre:")],-1),jl={class:"col-xs-7 col-sm-6 q-ml-md"},Tl=o("div",{class:"col-4 flex justify-end items-center q-my-sm"},[o("label",null,"Usuario:")],-1),Ql={class:"col-xs-7 col-sm-6 q-ml-md q-my-sm"},zl=o("div",{class:"col-4 flex justify-end items-center"},[o("label",null,"Email:")],-1),Fl={class:"col-xs-7 col-sm-6 q-ml-md"},Hl=o("div",{class:"col-4 flex justify-end items-center q-my-sm"},[o("label",null,"T\xE9lefono Movil:")],-1),Bl={class:"col-xs-7 col-sm-6 q-ml-md q-my-sm"},Yl=o("label",{class:"text-h6 text-weight-medium"},"Configuraci\xF3n:",-1),Jl=[Yl],Kl=o("div",{class:"col-4 flex justify-end items-center"},[o("label",{for:""},"Empresa:")],-1),Ll={class:"col-xs-7 col-sm-6 q-ml-md"},Gl={key:0,class:"col-4 flex justify-end items-center q-mt-sm"},Wl=o("label",null,"Rol:",-1),Xl=[Wl],Zl={key:1,class:"col-xs-7 col-sm-6 q-ml-md q-mt-sm"},ea={key:2,class:"col-4 flex justify-end items-center q-mt-sm"},la=o("label",null,"Sucursal:",-1),aa=[la],sa={key:3,class:"col-xs-7 col-sm-6 q-ml-md q-mt-sm"},oa=o("div",{class:"col-4 flex justify-end items-center q-mt-sm"},[o("label",{for:""},"Estado:")],-1),ta={class:"col-xs-7 col-sm-6 q-ml-md q-mt-sm"},ia=o("div",{class:"col-4 flex justify-end items-center q-mt-sm"},[o("label",{for:""},"Foto:")],-1),ra={class:"col-xs-7 col-sm-6 q-ml-md q-mt-lg"},ua=o("div",{class:"col-4 flex justify-end items-center q-my-sm"},null,-1),na=o("div",{class:"col-6 q-ml-md q-my-sm"},null,-1),da=o("div",{class:"col-4 flex justify-end items-center q-my-sm"},[o("label",{for:""},"Horario Acceso:")],-1),ma={class:"col-xs-7 col-sm-6 q-ml-md q-my-sm flex"},ca={style:{display:"flex","flex-direction":"column"}},va=o("label",{class:"q-ml-md"}," Lunes ",-1),fa={style:{display:"flex","flex-direction":"column"}},pa=o("label",{class:"q-ml-md"}," Martes ",-1),ha={style:{display:"flex","flex-direction":"column"}},ga=o("label",{class:"q-ml-md"}," Miercoles ",-1),ba={style:{display:"flex","flex-direction":"column"}},ya=o("label",{class:"q-ml-md"},"Jueves",-1),_a={style:{display:"flex","flex-direction":"column"}},Va=o("label",{class:"q-ml-md"}," Viernes ",-1),xa={style:{display:"flex","flex-direction":"column"}},wa=o("label",{class:"q-ml-md"}," Sabado ",-1),qa=o("div",{class:"col-4 flex justify-end items-center q-my-sm"},[o("label",{class:"q-mb-md"},"Horario:")],-1),ka={class:"col-xs-7 col-sm-6 q-ml-md q-my-sm"},Ca={class:"row"},Sa={class:"col-xs-12 col-sm-5"},Pa={class:"row items-center justify-end"},Aa={class:"col-xs-12 col-sm-5 offset-sm-1"},Da={class:"row items-center justify-end"},Ma={class:"col-11 flex justify-start items-center"},Ea=o("div",{class:"col-4 flex justify-end items-center"},[o("label",null,"Contrase\xF1a:")],-1),Ia={class:"col-xs-7 col-sm-6 q-ml-md"},Ua=o("div",{class:"col-4 flex justify-end items-center q-my-sm"},[o("label",{for:""},"Repite Contrase\xF1a:")],-1),Na={class:"col-xs-7 col-sm-6 q-ml-md q-my-sm"},$a={class:"col-xs-11 col-md-4"},Ra={class:"row"},Oa=o("label",{class:"text-h6 text-weight-medium"},"Permisos:",-1),ja=[Oa],Wa=vl({__name:"FormUser",props:{edit:{type:Boolean}},setup(r){const A=r,j=C([]),D=C(El),M=C([]),T=C([]);let E=!1;const{api:Q,getCompanies:L,formUser:s,expanded:v,validaciones:p,showConfirmPass:N,showPass:q,onRejected:se,loading:H,onSubmit:B}=Il();fl(async()=>{await Promise.all([oe(),Y()]),A.edit&&s.value.roles[0]=="SUPER-ADMINISTRADOR"?(await Promise.resolve(),D.value[0].disabled=!0):D.value[0].disabled=!1});const oe=async()=>{j.value=[],(await L()).forEach(a=>{j.value.push({label:a.nombre_comercial,value:a.id})})},Y=async()=>{const{data:d}=await Q.get("/roles-and-permisos");d.forEach(a=>{T.value.unshift({label:a.nombre,value:a.nombre,permisos:a.permisos})})},g=()=>{const d=T.value.find(a=>a.value==s.value.roles[0]);(d==null?void 0:d.label)=="SUPER-ADMINISTRADOR"?D.value[0].disabled=!0:D.value[0].disabled=!1,s.value.permisos=d.permisos};ge(()=>s.value.permisos,d=>{d.length>0?p.value.permisos.isValid=!0:p.value.permisos.isValid=!1}),ge(()=>s.value.company,d=>{n(s.value.company)});const n=async d=>{M.value=[],(!A.edit||E)&&(s.value.sucursales=[""]),E=!0;const{data:a}=await Q.get(`/sucursal/find/${d}/company`);a.forEach(i=>{M.value.push({label:i.nombre,value:i.id})})};return(d,a)=>(R(),ee(Pl,{onSubmit:a[38]||(a[38]=i=>l(B)(A.edit))},{default:f(()=>[c(yl,{class:"my-card"},{default:f(()=>[c(pl,{class:"q-pt-none"},{default:f(()=>[o("div",Ul,[o("div",Nl,[o("div",$l,[Rl,Ol,o("div",jl,[c(O,{modelValue:l(s).fullName,"onUpdate:modelValue":[a[0]||(a[0]=i=>l(s).fullName=i),a[1]||(a[1]=i=>l(p).fullName.isValid=!0)],modelModifiers:{trim:!0},error:!l(p).fullName.isValid,"input-style":"text-transform: uppercase;",dense:"",outlined:""},{error:f(()=>[o("label",{class:w(d.$q.dark.isActive?"text-red-4":"text-negative")},U(l(p).fullName.message),3)]),_:1},8,["modelValue","error"])]),Tl,o("div",Ql,[c(O,{modelValue:l(s).usuario,"onUpdate:modelValue":[a[2]||(a[2]=i=>l(s).usuario=i),a[3]||(a[3]=i=>l(p).usuario.isValid=!0)],modelModifiers:{trim:!0},error:!l(p).usuario.isValid,dense:"",outlined:""},{error:f(()=>[o("label",{class:w(d.$q.dark.isActive?"text-red-4":"text-negative")},U(l(p).usuario.message),3)]),append:f(()=>[c(S,{name:"person",size:"1.3rem"})]),_:1},8,["modelValue","error"])]),zl,o("div",Fl,[c(O,{modelValue:l(s).email,"onUpdate:modelValue":[a[4]||(a[4]=i=>l(s).email=i),a[5]||(a[5]=i=>l(p).email.isValid=!0)],modelModifiers:{trim:!0},error:!l(p).email.isValid,type:"text",dense:"",outlined:""},{error:f(()=>[o("label",{class:w(d.$q.dark.isActive?"text-red-4":"text-negative")},U(l(p).email.message),3)]),append:f(()=>[c(S,{name:"mail",size:"1.2rem"})]),_:1},8,["modelValue","error"])]),Hl,o("div",Bl,[c(O,{modelValue:l(s).celular,"onUpdate:modelValue":[a[6]||(a[6]=i=>l(s).celular=i),a[8]||(a[8]=i=>l(p).celular.isValid=!0)],counter:"",maxlength:"10",onKeyup:a[7]||(a[7]=i=>l(s).celular=l(s).celular.replace(/\D/g,"")),"lazy-rules":"",error:!l(p).celular.isValid,dense:"",outlined:""},{error:f(()=>[o("label",{class:w(d.$q.dark.isActive?"text-red-4":"text-negative")},U(l(p).celular.message),3)]),append:f(()=>[c(S,{name:"call",size:"1.2rem"})]),_:1},8,["modelValue","error"])]),o("div",{class:w(["col-11 flex justify-start items-center",[d.$q.screen.xs?"q-my-md":""]])},Jl,2),Kl,o("div",Ll,[c(fe,{color:"orange","transition-show":"scale","transition-hide":"scale",outlined:"",modelValue:l(s).company,"onUpdate:modelValue":[a[9]||(a[9]=i=>l(s).company=i),a[10]||(a[10]=i=>l(p).company.isValid=!0)],dense:"",error:!l(p).company.isValid,options:j.value,"emit-value":"","map-options":""},{error:f(()=>[o("label",{class:w(d.$q.dark.isActive?"text-red-4":"text-negative")},U(l(p).company.message),3)]),"no-option":f(()=>[c(Me,null,{default:f(()=>[c(Ee,{class:"text-grey"},{default:f(()=>[ve(" No hay resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","error","options"])]),l(s).company.length!==0?(R(),le("div",Gl,Xl)):F("",!0),l(s).company.length!==0?(R(),le("div",Zl,[c(fe,{modelValue:l(s).roles[0],"onUpdate:modelValue":[a[11]||(a[11]=i=>l(s).roles[0]=i),a[12]||(a[12]=i=>(l(p).roles.isValid=!0,g()))],outlined:"",dense:"","transition-show":"scale","transition-hide":"scale",error:!l(p).roles.isValid,options:T.value,"emit-value":"","map-options":""},{error:f(()=>[o("label",{class:w(d.$q.dark.isActive?"text-red-4":"text-negative")},U(l(p).roles.message),3)]),_:1},8,["modelValue","error","options"])])):F("",!0),l(s).roles[0]!==""&&l(s).company.length!==0&&l(s).roles[0]!=="ADMINISTRADOR"&&l(s).roles[0]!=="SUPER-ADMINISTRADOR"?(R(),le("div",ea,aa)):F("",!0),l(s).roles[0]!==""&&l(s).company.length!==0&&l(s).roles[0]!=="ADMINISTRADOR"&&l(s).roles[0]!=="SUPER-ADMINISTRADOR"?(R(),le("div",sa,[c(fe,{modelValue:l(s).sucursales[0],"onUpdate:modelValue":[a[13]||(a[13]=i=>l(s).sucursales[0]=i),a[14]||(a[14]=i=>l(p).sucursales.isValid=!0)],outlined:"",dense:"",required:"","emit-value":"","map-options":"","transition-show":"scale","transition-hide":"scale",error:!l(p).sucursales.isValid,options:M.value},{error:f(()=>[o("label",{class:w(d.$q.dark.isActive?"text-red-4":"text-negative")},U(l(p).sucursales.message),3)]),"no-option":f(()=>[c(Me,null,{default:f(()=>[c(Ee,{class:"text-grey"},{default:f(()=>[ve(" No se encontro resultados ")]),_:1})]),_:1})]),_:1},8,["modelValue","error","options"])])):F("",!0),oa,o("div",ta,[c(fe,{modelValue:l(s).isActive,"onUpdate:modelValue":a[15]||(a[15]=i=>l(s).isActive=i),outlined:"",dense:"","emit-value":"","map-options":"",options:[{label:"Activo",value:!0},{label:"Inactivo",value:!1}]},{append:f(()=>[l(s).isActive?(R(),ee(S,{key:0,size:"1.2rem",name:"fa-solid fa-user-check"})):(R(),ee(S,{key:1,name:"fa-solid fa-user-xmark",size:"1.2rem"}))]),_:1},8,["modelValue"])]),ia,o("div",ra,[c(_l,{dense:"",outlined:"","bottom-slots":"",accept:".jpg, .png, .jpeg",onRejected:l(se),"onUpdate:modelValue":[a[17]||(a[17]=i=>l(p).foto.isValid=!0),a[18]||(a[18]=i=>l(s).foto=i)],error:!l(p).foto.isValid,modelValue:l(s).foto,label:l(s).foto_old==null?"Cargar Imagen":l(s).foto_old},{error:f(()=>[o("label",{class:w(d.$q.dark.isActive?"text-red-4":"text-negative")},U(l(p).foto.message),3)]),prepend:f(()=>[c(S,{name:"fa-solid fa-image"})]),append:f(()=>[typeof l(s).foto=="object"&&l(s).foto!==null?(R(),ee(S,{key:0,name:"close",onClick:a[16]||(a[16]=hl(i=>l(s).foto=null,["stop","prevent"])),class:"cursor-pointer"})):F("",!0)]),_:1},8,["onRejected","error","modelValue","label"])]),ua,na,da,o("div",ma,[o("div",ca,[c(J,{class:"q-ml-sm",size:"lg",val:"Lunes",modelValue:l(s).horarios_dias,"onUpdate:modelValue":a[19]||(a[19]=i=>l(s).horarios_dias=i)},null,8,["modelValue"]),va]),o("div",fa,[c(J,{class:"q-ml-sm",size:"lg",val:"Martes",modelValue:l(s).horarios_dias,"onUpdate:modelValue":a[20]||(a[20]=i=>l(s).horarios_dias=i)},null,8,["modelValue"]),pa]),o("div",ha,[c(J,{class:"q-ml-sm",size:"lg",val:"Miercoles",modelValue:l(s).horarios_dias,"onUpdate:modelValue":a[21]||(a[21]=i=>l(s).horarios_dias=i)},null,8,["modelValue"]),ga]),o("div",ba,[c(J,{class:"q-ml-sm",size:"lg",val:"Jueves",modelValue:l(s).horarios_dias,"onUpdate:modelValue":a[22]||(a[22]=i=>l(s).horarios_dias=i)},null,8,["modelValue"]),ya]),o("div",_a,[c(J,{class:"q-ml-sm",size:"lg",val:"Viernes",modelValue:l(s).horarios_dias,"onUpdate:modelValue":a[23]||(a[23]=i=>l(s).horarios_dias=i)},null,8,["modelValue"]),Va]),o("div",xa,[c(J,{class:"q-ml-sm",size:"lg",val:"Sabado",modelValue:l(s).horarios_dias,"onUpdate:modelValue":a[24]||(a[24]=i=>l(s).horarios_dias=i)},null,8,["modelValue"]),wa])]),qa,o("div",ka,[o("div",Ca,[o("div",Sa,[c(O,{outlined:"",modelValue:l(s).horarios_time[0],"onUpdate:modelValue":a[26]||(a[26]=i=>l(s).horarios_time[0]=i),mask:"time",dense:""},{append:f(()=>[c(S,{name:"access_time",class:"cursor-pointer"},{default:f(()=>[c(Ie,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:f(()=>[c(Ne,{modelValue:l(s).horarios_time[0],"onUpdate:modelValue":a[25]||(a[25]=i=>l(s).horarios_time[0]=i)},{default:f(()=>[o("div",Pa,[we(c(ae,{label:"Close",color:"primary",flat:""},null,512),[[Ue]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),o("div",Aa,[c(O,{outlined:"",modelValue:l(s).horarios_time[1],"onUpdate:modelValue":a[28]||(a[28]=i=>l(s).horarios_time[1]=i),mask:"time",dense:""},{append:f(()=>[c(S,{name:"access_time",class:"cursor-pointer"},{default:f(()=>[c(Ie,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:f(()=>[c(Ne,{modelValue:l(s).horarios_time[1],"onUpdate:modelValue":a[27]||(a[27]=i=>l(s).horarios_time[1]=i)},{default:f(()=>[o("div",Da,[we(c(ae,{label:"Close",color:"primary",flat:""},null,512),[[Ue]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),o("div",Ma,[o("label",{class:w(["text-h6 text-weight-medium",[d.$q.screen.xs?"q-my-md":""]])}," Nueva Contrase\xF1a: ",2)]),Ea,o("div",Ia,[c(O,{type:l(q)?"password":"text",outlined:"",dense:"","onUpdate:modelValue":[a[30]||(a[30]=i=>l(p).password.isValid=!0),a[31]||(a[31]=i=>l(s).password=i)],error:!l(p).password.isValid,modelValue:l(s).password,modelModifiers:{trim:!0}},{error:f(()=>[o("label",{class:w(d.$q.dark.isActive?"text-red-4":"text-negative")},U(l(p).password.message),3)]),append:f(()=>[c(S,{name:l(q)?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:a[29]||(a[29]=i=>q.value=!l(q))},null,8,["name"])]),prepend:f(()=>[c(S,{name:"key",color:"blue-grey-3"})]),_:1},8,["type","error","modelValue"])]),Ua,o("div",Na,[c(O,{type:l(N)?"password":"text",outlined:"",dense:"","onUpdate:modelValue":[a[33]||(a[33]=i=>l(p).confirmPassword.isValid=!0),a[34]||(a[34]=i=>l(s).confirmPassword=i)],error:!l(p).confirmPassword.isValid,modelValue:l(s).confirmPassword,modelModifiers:{trim:!0}},{error:f(()=>[o("label",{class:w(d.$q.dark.isActive?"text-red-4":"text-negative")},U(l(p).confirmPassword.message),3)]),append:f(()=>[c(S,{name:l(N)?"visibility_off":"visibility",color:"blue-grey",class:"cursor-pointer",onClick:a[32]||(a[32]=i=>N.value=!l(N))},null,8,["name"])]),prepend:f(()=>[c(S,{name:"key",color:"blue-grey-3"})]),_:1},8,["type","error","modelValue"])])])]),o("div",$a,[o("div",Ra,[o("div",{class:w(["col-11 flex justify-start items-center",[d.$q.screen.xs?"q-my-md":""]])},ja,2),c(Sl,{class:w(["col-xs-11 col-sm-11 col-sm-11",[d.$q.screen.xs?"offset-1":""]]),"default-expand-all":!1,nodes:D.value,"label-key":"label","node-key":"value","control-color":"deep-orange-14","tick-strategy":"leaf",expanded:l(v),"onUpdate:expanded":a[35]||(a[35]=i=>gl(v)?v.value=i:null),ticked:l(s).permisos,"onUpdate:ticked":a[36]||(a[36]=i=>l(s).permisos=i)},null,8,["class","nodes","expanded","ticked"]),l(p).permisos.isValid?F("",!0):(R(),le("div",{key:0,class:w(["col-11 text-center",d.$q.dark.isActive?"text-red-4":"text-negative"])},[o("label",null,U(l(p).permisos.message),1)],2))])])])]),_:1}),c(bl,{class:w(["q-pb-md",[l(De).width<600?"justify-center q-ml-xl":"justify-between"]])},{default:f(()=>[l(De).width>600?(R(),ee(ae,{key:0,type:"submit",icon:"arrow_back",onClick:a[37]||(a[37]=i=>d.$router.push("/usuarios")),outline:"",rounded:"",class:"q-mr-lg",color:d.$q.dark.isActive?"blue-grey-2":"blue-grey-10"},{default:f(()=>[ve(" \xA0 Regresar ")]),_:1},8,["color"])):F("",!0),c(ae,{type:"submit",icon:"save",loading:l(H),outline:"",rounded:"",class:"q-mr-lg",style:{color:"#696cff"}},{default:f(()=>[ve(" \xA0 Guardar Cambios ")]),_:1},8,["loading"])]),_:1},8,["class"])]),_:1})]),_:1}))}});export{Wa as _,Il as u};
