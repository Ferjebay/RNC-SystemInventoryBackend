import{Q as P,a as k,b as B}from"./QTable.ad1e511b.js";import{Q as F,a as p}from"./QTooltip.52734735.js";import{r as v,v as V,o,c as u,e as g,f as i,g as l,aP as Y,a7 as n,ad as s,ah as _,ab as L,ag as M,h as c,Q as U,aU as R,i as w,N as D,a8 as m,a9 as C,bs as G}from"./index.af8b3988.js";import{Q as x}from"./QBadge.ddf5e601.js";import{Q as O}from"./QPageSticky.7750face.js";import{C as z}from"./ClosePopup.7344a6c9.js";import{u as j}from"./useCliente.aa15ca83.js";import{d as H}from"./date.8fa43a55.js";import"./QList.98420712.js";import"./QSelect.ffbc2950.js";import"./QChip.f2c2a808.js";import"./QItemLabel.4b75afc5.js";import"./format.2bc25e5f.js";import"./useHelpers.0233898e.js";import"./use-quasar.af321354.js";import"./axios.d45fc5d6.js";const J={class:"q-ma-lg q-pt-md"},K={class:"row q-col-gutter-lg"},W={class:"col-12"},X={key:0},Z={key:1},ee={key:2},te={class:"full-width row flex-center text-lime-10 q-gutter-sm"},le=g("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1),he={__name:"IndexPage",setup(ae){const I=[{name:"acciones",label:"acciones",align:"center"},{name:"nombre",align:"center",label:"Cliente",field:"nombres",sortable:!0},{name:"ip",align:"center",label:"IP",field:"ip",sortable:!0},{name:"direccion",align:"center",label:"Direcci\xF3n Servicio",field:"direccion",sortable:!0},{name:"tipo_documento",align:"center",label:"T. Doc.",field:"tipo_documento"},{name:"numero_documento",align:"center",label:"Num. de Doc.",field:"numero_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Movil",field:"celular",align:"center"},{name:"instalado",label:"Instalado",field:"instalado",align:"center"},{name:"total_cobrar",label:"Total Cobrar",field:"total_cobrar",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"}];let{api:$,mostrarNotify:f,confirmDelete:S,isDeleted:E,loading:y}=j();const b=v(""),q=v([]),h=async()=>{y.value=!0;try{const{data:a}=await $.get("/customers");a.length>0&&(a.forEach(t=>{t.ip=t.planInternet[0].ipv4,t.total_cobrar=`$${t.planInternet[0].precio}`,t.direccion=`${t.planInternet[0].direccion==""?"- - - - - -":t.planInternet[0].direccion}`,t.instalado=H.formatDate(t.planInternet[0].fecha_instalacion,"DD/MM/YYYY")}),q.value=a)}catch(a){f("warning",a.response.data.message)}y.value=!1},Q=async(a,t)=>{try{const{data:{msg:e}}=await $.patch(`/customers/${a}/${t}`);f("positive",e),h()}catch(e){console.log(e)}};V(E,(a,t)=>{a&&h()});const T=async a=>{try{S("Estas seguro de eliminar este cliente?",`/customers/${a}`)}catch(t){console.log(t)}},A=a=>{G.create({title:`<div class="text-center">
                <i class="fa-regular fa-circle-question"></i>
                  Suspender
              </div>`,message:`<div class="text-center">                  
                    Estas Seguro que deseas suspender al cliente
                </div>
                <div class="text-center">                  
                  ${a.nombres}
                </div>`,html:!0,ok:{push:!0,label:"Si, Suspender",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{try{f("positive","Cliente Suspendido")}catch(t){f("negative",t.response.data.message)}})};h();const d=v("list"),N=v({rowsPerPage:10});return(a,t)=>(o(),u(_,null,[g("div",J,[g("div",K,[g("div",W,[i(Y,{flat:"",class:"shadow_custom"},{default:l(()=>[i(P,{"title-class":"text-grey-7 text-h6",title:"Listado de Clientes",rows:q.value,loading:L(y),"hide-header":d.value==="grid",columns:I,"row-key":"name",grid:d.value==="grid",filter:b.value,pagination:N.value},{header:l(e=>[i(F,{props:e,style:{height:"60px"}},{default:l(()=>[(o(!0),u(_,null,M(e.cols,r=>(o(),n(B,{key:r.name,props:e,class:"text-grey-7 text-weight-bold text-uppercase",style:{"font-size":"13px"}},{default:l(()=>[m(C(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":l(e=>[a.$q.screen.xs?s("",!0):(o(),n(c,{key:0,onClick:t[0]||(t[0]=r=>a.$router.push({name:"cliente.add"})),outline:"",color:"primary",label:"Agregar Cliente",class:"q-mr-xs"})),i(U,{style:R(a.$q.screen.width>700||"width: 70%"),outlined:"",dense:"",debounce:"300",modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=r=>b.value=r),placeholder:"Buscar..."},{append:l(()=>[i(w,{name:"search"})]),_:1},8,["style","modelValue"]),d.value==="list"?(o(),n(c,{key:1,flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen},{default:l(()=>[D((o(),n(p,{disable:a.$q.platform.is.mobile},{default:l(()=>[m(C(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)]),_:2},1032,["disable"])),[[z]])]),_:2},1032,["icon","onClick"])):s("",!0),e.inFullscreen?s("",!0):(o(),n(c,{key:2,flat:"",round:"",dense:"",icon:d.value==="grid"?"list":"grid_on",onClick:t[2]||(t[2]=r=>{d.value=d.value==="grid"?"list":"grid",a.separator=d.value==="grid"?"none":"horizontal"})},{default:l(()=>[D((o(),n(p,{disable:a.$q.platform.is.mobile},{default:l(()=>[m(C(d.value==="grid"?"List":"Grid"),1)]),_:1},8,["disable"])),[[z]])]),_:1},8,["icon"]))]),"body-cell-tipo_documento":l(e=>[i(k,{props:e},{default:l(()=>[g("div",null,[e.row.tipo_documento==4?(o(),u("label",X,"RUC")):e.row.tipo_documento==5?(o(),u("label",Z,"Cedula")):(o(),u("label",ee,"Pasaporte"))])]),_:2},1032,["props"])]),"body-cell-estado":l(e=>[i(k,{props:e},{default:l(()=>[e.row.isActive?(o(),n(x,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(o(),n(x,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":l(e=>[i(k,{props:e},{default:l(()=>[e.row.isActive?(o(),n(c,{key:0,round:"",color:"blue-grey",onClick:r=>a.$router.push({name:"cliente.edit",params:{client_id:e.row.id}}),icon:"edit",class:"q-mr-sm",size:"10px"},{default:l(()=>[i(p,{class:"bg-indigo",anchor:"top middle",self:"center middle"},{default:l(()=>[m(" Editar ")]),_:1})]),_:2},1032,["onClick"])):s("",!0),e.row.isActive?(o(),n(c,{key:1,round:"",color:"blue-grey",onClick:r=>A(e.row),icon:"power_settings_new",class:"q-mr-sm",size:"10px"},{default:l(()=>[i(p,{class:"bg-indigo",anchor:"top middle",self:"center middle"},{default:l(()=>[m(" Suspender ")]),_:1})]),_:2},1032,["onClick"])):s("",!0),e.row.isActive?(o(),u(_,{key:2},[e.row.isActive?(o(),n(c,{key:0,round:"",color:"blue-grey",icon:"close",onClick:r=>Q(e.row.id,!1),size:"10px"},null,8,["onClick"])):s("",!0)],64)):(o(),u(_,{key:3},[e.row.isActive?s("",!0):(o(),n(c,{key:0,round:"",color:"blue-grey",icon:"done",onClick:r=>Q(e.row.id,!0),size:"10px"},null,8,["onClick"])),e.row.estado?s("",!0):(o(),n(c,{key:1,round:"",color:"blue-grey",class:"q-ml-sm",icon:"delete",onClick:r=>T(e.row.id),size:"10px"},{default:l(()=>[i(p,{class:"bg-indigo",anchor:"top middle",self:"center middle"},{default:l(()=>[m(" Eliminar ")]),_:1})]),_:2},1032,["onClick"]))],64))]),_:2},1032,["props"])]),"no-data":l(({icon:e})=>[g("div",te,[i(w,{size:"2em",name:"sentiment_dissatisfied"}),le,i(w,{size:"2em",name:b.value?"filter_b_and_w":e},null,8,["name"])])]),_:1},8,["rows","loading","hide-header","grid","filter","pagination"])]),_:1})])])]),a.$q.screen.xs?(o(),n(O,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[i(c,{round:"",color:"secondary",size:"lg",icon:"add",onClick:t[3]||(t[3]=e=>a.$router.push({name:"cliente.add"}))})]),_:1})):s("",!0)],64))}};export{he as default};
